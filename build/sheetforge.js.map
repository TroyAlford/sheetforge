{"version":3,"sources":["webpack://sheetforge/webpack/universalModuleDefinition","webpack://sheetforge/webpack/bootstrap","webpack://sheetforge/./source/utilities/noop.js","webpack://sheetforge/./source/utilities/unique.js","webpack://sheetforge/./source/models/generic/ICategorizable/ICategorizable.js","webpack://sheetforge/./source/utilities/splitObjectPath.js","webpack://sheetforge/./source/utilities/getPathValue.js","webpack://sheetforge/./source/utilities/setPathValue.js","webpack://sheetforge/./source/models/generic/IEditable/IEditable.js","webpack://sheetforge/./source/utilities/hash.js","webpack://sheetforge/./source/models/generic/IIdentity/IIdentity.js","webpack://sheetforge/./source/utilities/findParent.js","webpack://sheetforge/./source/utilities/math/math.js","webpack://sheetforge/./source/utilities/math/toSymbols.js","webpack://sheetforge/./source/utilities/math/calculate.js","webpack://sheetforge/./source/models/Attribute/Attribute.js","webpack://sheetforge/./source/models/Descriptor/Descriptor.js","webpack://sheetforge/./source/utilities/compareBy.js","webpack://sheetforge/./source/models/generic/Collection/Collection.js","webpack://sheetforge/./source/models/Effect/Effect.js","webpack://sheetforge/./source/models/Item/Item.js","webpack://sheetforge/./source/models/Resource/Resource.js","webpack://sheetforge/./source/models/Skill/Skill.js","webpack://sheetforge/./source/models/ResourceCost/ResourceCost.js","webpack://sheetforge/./source/models/Spell/Spell.js","webpack://sheetforge/./source/models/Trait/Trait.js","webpack://sheetforge/./source/utilities/flatten.js","webpack://sheetforge/./source/models/Character/Character.js","webpack://sheetforge/./source/models/types/between.js","webpack://sheetforge/./source/models/Layout/Layout.js","webpack://sheetforge/./source/utilities/bound.js","webpack://sheetforge/./source/components/Editable/Editable.js","webpack://sheetforge/./source/utilities/range.js","webpack://sheetforge/./source/components/Rating/Rating.js","webpack://sheetforge/./source/components/Attribute/Attribute.js","webpack://sheetforge/./source/components/Descriptor/Descriptor.js","webpack://sheetforge/./source/components/Effect/Effect.js","webpack://sheetforge/./source/components/Expandable/Expandable.js","webpack://sheetforge/./source/components/MultiToggle/MultiToggle.js","webpack://sheetforge/./source/utilities/debounce.js","webpack://sheetforge/./source/components/List/List.js","webpack://sheetforge/./source/components/Item/Item.js","webpack://sheetforge/./source/components/Resource/Resource.js","webpack://sheetforge/./source/components/Skill/Skill.js","webpack://sheetforge/./source/components/ResourceCost/ResourceCost.js","webpack://sheetforge/./source/components/Spell/Spell.js","webpack://sheetforge/./source/components/Trait/Trait.js","webpack://sheetforge/./source/components/index.js","webpack://sheetforge/./source/components/Conditions/Conditions.js","webpack://sheetforge/./source/components/Layout/Layout.js","webpack://sheetforge/./source/models/index.js","webpack://sheetforge/./source/components/Sheet/Sheet.js","webpack://sheetforge/./source/index.js","webpack://sheetforge/./source/components/Expandable/Expandable.scss","webpack://sheetforge/./source/components/Effect/Effect.scss","webpack://sheetforge/./source/components/Item/Item.scss","webpack://sheetforge/./fontello/css/sheetforge-embedded.css","webpack://sheetforge/./source/components/Sheet/Sheet.scss","webpack://sheetforge/./source/components/Spell/Spell.scss","webpack://sheetforge/./source/components/Editable/Editable.scss","webpack://sheetforge/./source/components/Skill/Skill.scss","webpack://sheetforge/./source/components/Rating/Rating.scss","webpack://sheetforge/./source/components/Conditions/Conditions.scss","webpack://sheetforge/./source/components/MultiToggle/MultiToggle.scss","webpack://sheetforge/./source/components/List/List.scss","webpack://sheetforge/./source/components/Attribute/Attribute.scss","webpack://sheetforge/./source/components/Descriptor/Descriptor.scss","webpack://sheetforge/./source/components/Layout/Layout.scss","webpack://sheetforge/./source/components/Trait/Trait.scss","webpack://sheetforge/./source/components/Resource/Resource.scss","webpack://sheetforge/./source/components/ResourceCost/ResourceCost.scss"],"names":["array","filter","item","index","all","indexOf","getValue","noop","types","model","volatile","isICategorizable","views","self","getCategories","name","categories","split","pop","unique","map","category","trim","Boolean","sort","lastUsedName","categoryValue","PATH_SPLITTER","path","match","object","undefined","splitObjectPath","Array","isArray","property","target","reduce","o","key","value","isIEditable","set","IEditable","savedVersion","isDirty","deepEqual","toJSON","actions","afterCreate","isPathDirty","current","getPathValue","initial","markAsClean","Object","keys","forEach","isObservableArray","child","reset","assign","setPathValue","hash","radix","string","String","h","char","charCodeAt","Math","abs","toString","randomHash","random","filterFunction","hasParent","parent","getParent","math","core","create","import","require","expression","fns","symbols","parse","traverse","node","fn","push","type","includes","data","options","defaultSymbolValue","safeData","toSymbols","symbol","eval","compose","IIdentity","ICategorizable","modifiedValue","raw","optional","union","number","character","findParent","p","isCharacter","id","toLowerCase","replace","isComputed","computing","effects","activeEffects","effect","targetId","modifier","sum","modifierText","sourceName","join","computed","values","attribute","attributes","findBy","calculate","error","process","console","preProcessSnapshot","snapshot","postProcessSnapshot","named","prop","reversed","objectA","objectB","a","Map","get","b","localeCompare","TYPE","TypedArrayWrapper","asArray","slice","first","length","at","last","n","clear","delete","deleteAt","_","every","find","findById","identifierAttribute","searchElement","fromIndex","element","insert","splice","concat","shift","start","end","some","sortBy","direction","TypeError","compareBy","reverse","deleteCount","toObject","keyProp","valueProp","entry","unshift","custom","fromSnapshot","getValidationMessage","f","is","isTargetType","condition","afterAttach","available","CollectionOf","Attribute","isApplicable","conditions","source","description","Effect","equipped","maximum","mastery","theory","isComplex","isSimple","amount","resourceName","resources","Resource","resource","level","costs","ResourceCost","isActive","cast","isAffordable","cost","flatten","depth","Infinity","JSON","stringify","next","descriptors","Descriptor","experience","items","Item","skills","Skill","spells","Spell","traits","Trait","availableConditions","e","i","trait","spell","min","max","defaultTo","refinement","Layout","categorize","children","late","colSpan","between","columns","maybe","sortOption","title","literal","TYPES","Editable","editing","resetValue","props","onChange","state","handleToggleEditing","editor","editorType","getEditorType","focus","forceEditMode","setSelectionRange","parseFloat","Number","isNaN","bound","event","ctrlKey","metaKey","onKeyDown","isDefaultPrevented","resetChanges","nodeName","readOnly","setState","onEditStart","onEditEnd","select","toggleBoolean","createRefWithAutoFocus","lines","placeholder","paragraphs","line","className","handleChange","selectOnFocus","handleKeys","onKeyPress","onKeyUp","renderStatic","step","readOnlyValue","showPlaceholder","displayValue","renderBoolean","renderSlider","renderMultiline","renderNumber","renderText","classes","onFocus","handleReceivingFocus","tabIndex","renderEditor","React","Component","Rating","parseInt","getAttribute","allowExcess","iconExcess","iconOff","iconOn","total","range","handleIconClick","observer","CACHE","forceUpdate","onDelete","onSnapshotDisposer","onSnapshot","handleSnapshot","rating","modifierClassName","handleChangeName","handleCommitName","handleChangeValue","handleCommitValue","handleValueKeyDown","display","getter","handleChangeTarget","handleChangeModifier","handleChangeCondition","Expandable","expanded","createRef","classList","expander","parentElement","onToggle","omitItemWrapper","expandByDefault","add","toggleButtonParent","toggleButtonText","toggleState","buttonProps","onClick","handleToggle","ref","toggleButton","createPortal","renderExpanded","MultiToggle","selected","option","handleOptionClick","debounce","func","wait","immediate","timeout","args","later","apply","callNow","clearTimeout","setTimeout","NO_CATEGORY","buildSorter","A","B","aString","bString","Model","sortOptions","sorter","comparitor","collection","parentNode","layout","clicked","handleToggleCategorized","handleFilterChange","filterEl","sortable","handleSortChange","categoryItems","getCategoryItems","renderItem","sorted","categorized","handleToggleExpanded","handleDelete","sortOptionIndex","onLayoutSnapshotDisposer","Sortable","container","disabled","draggable","handle","onEnd","remove","querySelectorAll","targetIndex","onStart","onDataSnapshotDisposer","hasCategories","listStyle","renderSortWidget","renderCategoryWidget","handleAdd","renderCategory","list","EffectList","ListOf","EffectModel","handleToggleEquipped","onToggleExpanded","handleChangeDescription","handleChangeCurrent","handleChangeMaximum","onChangeName","onChangeTheory","onChangeMastery","handleChangeResource","handleChangeAmount","ListOfCosts","ResourceCostModel","onResourceSnapshotDisposer","handleToggleActive","handleChangeLevel","handleCast","isCurrent","handleCheckbox","renderCondition","snapshotJSON","parentColumns","width","titleBar","handleChangeTitle","Sheet","size","window","matchMedia","matches","typename","List","models","components","renderComponent","onCharacterSnapshotDisposer","handleWindowResize","addEventListener","onMount","removeEventListener","bind"],"mappings":"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","file":"sheetforge.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"sheetforge\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"sheetforge\"] = factory();\n\telse\n\t\troot[\"sheetforge\"] = factory();\n})(global, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"05fm\");\n","export default () => {}\n","export default (array = []) => (\n  array.filter((item, index, all) => all.indexOf(item) === index)\n)\n","import { types } from 'mobx-state-tree'\nimport noop from '@/utilities/noop'\nimport unique from '@/utilities/unique'\n\nexport default (getValue = noop) => types.model({\n}).volatile(() => ({\n  isICategorizable: true,\n})).views((self) => {\n  function getCategories() {\n    if (!self.name) return []\n\n    const categories = self.name.split(':')\n    categories.pop() // remove the name\n\n    return unique(categories.map(category => category.trim()).filter(Boolean)).sort()\n  }\n  let lastUsedName = self.name\n  let categories = getCategories()\n\n  return {\n    get categories() {\n      if (!self.name || self.name === lastUsedName) return categories\n\n      lastUsedName = self.name\n      categories = getCategories()\n\n      return categories\n    },\n    get categoryValue() { return getValue(self) },\n  }\n})\n","const PATH_SPLITTER = /([a-z0-9-_]+)(?![[\"'\\].])*/ig\n\nexport default (path) => {\n  if (typeof path !== 'string') return null\n  return path.match(PATH_SPLITTER)\n}\n","import splitObjectPath from '@/utilities/splitObjectPath'\n\nexport default (object, path) => {\n  if (typeof path !== 'string') return undefined\n\n  const split = splitObjectPath(path)\n\n  if (!Array.isArray(split)) return undefined\n\n  const property = split.pop()\n  const target = split.reduce((o, key) => o[key] || {}, object)\n\n  if (target) return target[property]\n  return undefined\n}\n","import splitObjectPath from '@/utilities/splitObjectPath'\n\nexport default (object, path, value) => {\n  const split = splitObjectPath(path)\n  const property = split.pop()\n  const target = split.reduce((o, key) => o[key] || {}, object)\n\n  if (target && target.isIEditable) {\n    target.set(property, value)\n  } else {\n    target[property] = value\n  }\n}\n","import deepEqual from 'deep-equal'\nimport { isObservableArray } from 'mobx'\nimport { types } from 'mobx-state-tree'\nimport getPathValue from '@/utilities/getPathValue'\nimport setPathValue from '@/utilities/setPathValue'\n\nconst IEditable = types.model('IEditable', {\n  // Any\n}).volatile(() => ({\n  isIEditable: true,\n  savedVersion: {},\n})).views(self => ({\n  get isDirty() { return !deepEqual(self.toJSON(), self.savedVersion) },\n})).actions(self => ({\n  /* eslint-disable no-param-reassign */\n\n  afterCreate() { self.savedVersion = self.toJSON() },\n  isPathDirty: (path) => {\n    const current = getPathValue(self.toJSON(), path)\n    const initial = getPathValue(self.savedVersion, path)\n    return !deepEqual(current, initial)\n  },\n  markAsClean() {\n    self.savedVersion = self.toJSON()\n\n    Object.keys(self.savedVersion).forEach((key) => {\n      const value = self[key]\n      if (!value) { return }\n\n      if (value.isIEditable) {\n        value.markAsClean()\n      } else if (isObservableArray(value)) {\n        value.forEach(child => (child && child.isIEditable && child.markAsClean()))\n      }\n    })\n  },\n  reset() { Object.assign(self, self.savedVersion) },\n  set(key = {}, value = undefined) {\n    if (typeof key === 'string' && value !== undefined) {\n      // allows: model.set('foo.bar', 'bar')\n      if (self[key] !== undefined) {\n        self[key] = value\n      } else {\n        setPathValue(self, key, value)\n      }\n    } else if (typeof key === 'object' && value === undefined) {\n      // allows: model.set({ foo: 'Foo', bar: 'Bar' })\n      Object.assign(self, key)\n    }\n  },\n\n  /* eslint-enable no-param-reassign */\n}))\n\nexport default IEditable\n","export default function hash(value = '', radix = 16) {\n  const string = String(value)\n  let h = 0\n  string.split('').forEach((char) => {\n    /* eslint-disable no-bitwise */\n    h = ((h << 5) - h) + char.charCodeAt(0)\n    h &= h // Convert to 32-bit integer\n    /* eslint-enable no-bitwise */\n  })\n  return Math.abs(h).toString(radix)\n}\n\nexport const randomHash = () => hash(Math.random().toString())\n","import { types } from 'mobx-state-tree'\nimport { randomHash } from '@/utilities/hash'\n\nexport default types.model({\n  // Nothing\n}).volatile(() => ({\n  hash: '',\n})).actions(self => ({\n  afterCreate() { self.hash = randomHash() }, // eslint-disable-line no-param-reassign\n}))\n","import { getParent, hasParent } from 'mobx-state-tree'\n\nexport default (child, filterFunction = Boolean) => {\n  if (!hasParent(child)) { return null }\n\n  let parent = getParent(child)\n  while (parent) {\n    if (filterFunction(parent)) {\n      return parent\n    }\n\n    if (!hasParent(parent)) { return null }\n    parent = getParent(parent)\n  }\n\n  return null\n}\n","import core from 'mathjs/core'\n\nconst math = core.create()\nmath.import(require('mathjs/lib/expression/function/eval'))\nmath.import(require('mathjs/lib/expression/function/parse'))\nmath.import(require('mathjs/lib/function/arithmetic/add'))\nmath.import(require('mathjs/lib/function/arithmetic/ceil'))\nmath.import(require('mathjs/lib/function/arithmetic/divide'))\nmath.import(require('mathjs/lib/function/arithmetic/floor'))\nmath.import(require('mathjs/lib/function/arithmetic/mod'))\nmath.import(require('mathjs/lib/function/arithmetic/multiply'))\nmath.import(require('mathjs/lib/function/arithmetic/pow'))\nmath.import(require('mathjs/lib/function/arithmetic/round'))\nmath.import(require('mathjs/lib/function/arithmetic/subtract'))\nmath.import(require('mathjs/lib/function/logical'))\nmath.import(require('mathjs/lib/function/statistics/max'))\nmath.import(require('mathjs/lib/function/statistics/mean'))\nmath.import(require('mathjs/lib/function/statistics/min'))\nmath.import(require('mathjs/lib/function/statistics/sum'))\nmath.import(require('mathjs/lib/type/matrix/function/matrix'))\nmath.import(require('mathjs/lib/type/matrix/Matrix'))\nmath.import(require('mathjs/lib/type/matrix/DenseMatrix'))\n\nexport default math\n","import math from '@/utilities/math'\n\nexport default (expression) => {\n  const fns = []\n  const symbols = []\n\n  math.parse(expression).traverse((node) => {\n    if (node.fn) {\n      fns.push(node.fn.name)\n    }\n    if (\n      node.type === 'SymbolNode'\n      && !symbols.includes(node.name)\n      && !fns.includes(node.name)\n    ) {\n      symbols.push(node.name)\n    }\n  })\n  return symbols\n}\n","import math from '@/utilities/math'\nimport toSymbols from '@/utilities/math/toSymbols'\n\nexport default (expression = '', data = {}, options = { defaultSymbolValue: 0 }) => {\n  const safeData = { ...data }\n  toSymbols(expression).forEach((symbol) => {\n    if (safeData[symbol] === undefined) {\n      safeData[symbol] = options.defaultSymbolValue\n    }\n  })\n\n  return math.eval(expression, safeData)\n}\n","import { types } from 'mobx-state-tree'\nimport ICategorizable from '@/models/generic/ICategorizable'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\nimport findParent from '@/utilities/findParent'\nimport math from '@/utilities/math'\nimport calculate from '@/utilities/math/calculate'\nimport toSymbols from '@/utilities/math/toSymbols'\n\nexport default types.compose(\n  IIdentity,\n  ICategorizable(self => self.modifiedValue()),\n  IEditable,\n  types.model({\n    name: 'New Attribute...',\n    raw: types.optional(types.union(types.number, types.string), 0),\n  }).views(self => ({\n    get character() { return findParent(self, p => p.isCharacter) },\n    get id() {\n      return self.name.split(':').pop()\n        .trim().toLowerCase()\n        .replace(/[^a-z0-9]/ig, '')\n    },\n    get isComputed() { return typeof self.raw === 'string' },\n  })).actions((self) => {\n    let computing = false\n\n    return ({\n      effects() {\n        if (!self.character) return []\n        return self.character.activeEffects().filter(effect => effect.targetId === self.id)\n      },\n      modifiedValue() { return (self.value() || 0) + self.modifier() },\n      modifier() { return math.sum(self.effects().map(effect => effect.modifier)) },\n      modifierText() {\n        return self.effects().map(effect => `${effect.sourceName()}: ${effect.modifier}`).join(', ')\n      },\n      value() {\n        if (!self.isComputed) return self.raw\n        if (self.character === null) return 0\n        if (computing) return 0\n\n        computing = true\n        let computed = 0\n\n        try {\n          const values = toSymbols(self.raw).reduce((all, symbol) => {\n            const attribute = self.character.attributes.findBy('id', symbol)\n            return Object.assign(all, { [symbol]: attribute ? attribute.modifiedValue() : 0 })\n          }, {})\n\n          computed = calculate(self.raw, values)\n        } catch (error) {\n          // eslint-disable-next-line no-undef\n          if (process.env.NODE_ENV !== 'production') {\n            // eslint-disable-next-line no-console\n            console.error(`Error computing: ${self.raw}`)\n          }\n          computed = 0\n        }\n\n        computing = false\n        return computed\n      },\n    })\n  }).preProcessSnapshot(({ value, ...snapshot }) => ({ ...snapshot, raw: value }))\n    .postProcessSnapshot(({ raw, ...snapshot }) => ({ ...snapshot, value: raw }))\n).named('Attribute')\n","import { types } from 'mobx-state-tree'\nimport ICategorizable from '@/models/generic/ICategorizable'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\n\nexport default types.compose(\n  IIdentity,\n  ICategorizable(),\n  IEditable,\n  types.model({\n    name: 'New Descriptor...',\n    value: '',\n  })\n).named('Descriptor')\n","export default (prop, reversed = false) => (objectA, objectB) => {\n  const a = String(objectA instanceof Map ? objectA.get(prop) : objectA[prop])\n  const b = String(objectB instanceof Map ? objectB.get(prop) : objectB[prop])\n\n  if (reversed) return b.localeCompare(a)\n  return a.localeCompare(b)\n}\n","import { isObservableArray } from 'mobx'\nimport { types } from 'mobx-state-tree'\nimport compareBy from '@/utilities/compareBy'\n\nexport default (TYPE, options = {}) => {\n  const TypedArrayWrapper = types.model({\n    values: types.array(TYPE),\n  }).views(self => ({\n    get asArray() { return self.values.slice() },\n    get first() { return self.length ? self.at(0) : undefined },\n    get last() { return self.length ? self.at(self.length - 1) : undefined },\n    get length() { return self.values.length },\n  })).actions(self => ({\n    /* eslint-disable no-param-reassign */\n\n    at: n => self.values[n],\n    clear: () => self.values.clear(),\n    delete: (object) => { self.values.replace(self.values.filter(item => item !== object)) },\n    deleteAt: (index) => { self.values.replace(self.values.filter((_, n) => n !== index)) },\n    every: fn => self.values.every(fn),\n    filter: fn => self.values.filter(fn),\n    find: fn => self.values.find(fn),\n    findBy: (key, value) => self.find(item => item[key] === value),\n    findById: (id) => {\n      if (!TYPE.identifierAttribute) return null\n      return self.find(item => item[TYPE.identifierAttribute] === id) || null\n    },\n    forEach: fn => self.values.forEach(fn),\n    includes: (searchElement, fromIndex) => self.values.includes(searchElement, fromIndex),\n    indexOf: element => self.values.indexOf(element),\n    insert: (object, index) => self.splice(index, 0, object),\n    map: fn => self.values.map(fn),\n    pop: () => self.values.pop(),\n    push: (...values) => self.values.replace([].concat(self.values, values)),\n    reduce: (fn, initial) => self.values.reduce(fn, initial),\n    replace: values => self.values.replace(values),\n    shift: () => self.values.shift(),\n    slice: (start, end) => self.values.slice(start, end),\n    some: fn => self.values.some(fn),\n    sortBy: (property, direction = 'asc') => {\n      if (!['asc', 'desc'].includes(direction)) {\n        throw new TypeError(`direction must be \"asc\" or \"desc\", got: \"${direction}\"`)\n      }\n      const values = self.values.slice().sort(compareBy(property))\n      self.values.replace(direction === 'desc' ? values.reverse() : values)\n      return self\n    },\n    splice: (index, deleteCount, value) => self.values.splice(index, deleteCount, value),\n    toObject: (keyProp, valueProp) => self.values.reduce((object, entry) => {\n      const key = entry[keyProp]\n      const value = valueProp !== undefined ? entry[valueProp] : entry\n      return { ...object, [key]: typeof value === 'function' ? value() : value }\n    }, {}),\n    unshift: (...values) => self.values.replace([].concat(values, self.values)),\n\n    /* eslint-enable no-param-reassign */\n  })).postProcessSnapshot(({ values }) => values)\n\n  return types.custom({\n    ...options,\n    fromSnapshot: (snapshot = []) => TypedArrayWrapper.create({ values: snapshot }),\n    getValidationMessage: (snapshot) => {\n      if (!snapshot) return ''\n      if (isObservableArray(snapshot) || Array.isArray(snapshot)) {\n        if (snapshot.every(f => TYPE.is(f))) return ''\n      }\n\n      return 'Collection types must be assigned an array of values or null'\n    },\n    isTargetType: target => TypedArrayWrapper.is(target),\n    name: options.name || 'Collection',\n  })\n}\n","import { types } from 'mobx-state-tree'\nimport Attribute from '@/models/Attribute'\nimport CollectionOf from '@/models/generic/Collection'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\nimport findParent from '@/utilities/findParent'\n\nexport default types.compose(\n  IIdentity,\n  IEditable,\n  types.model({\n    condition: '',\n    modifier: 0,\n    targetId: '',\n  }).actions(self => ({\n    afterAttach() {\n      if (!self.targetId && self.available().length) {\n        // eslint-disable-next-line no-param-reassign\n        self.targetId = self.available().first.id\n      }\n    },\n\n    available() {\n      const character = self.character()\n      return character ? character.attributes : CollectionOf(Attribute).create([])\n    },\n    character() { return findParent(self, p => p.isCharacter) },\n    isApplicable() {\n      const character = self.character()\n      return Boolean(\n        !self.condition ||\n        (character && character.conditions.includes(self.condition))\n      )\n    },\n    source() { return findParent(self, p => p.name) || null },\n    sourceName() { return self.source() ? self.source().name : 'Unknown' },\n    target() {\n      const character = self.character()\n      return character ? character.attributes.findBy('name', self.targetId) : null\n    },\n  }))\n).named('Effect')\n","import { types } from 'mobx-state-tree'\nimport Effect from '@/models/Effect'\nimport CollectionOf from '@/models/generic/Collection'\nimport ICategorizable from '@/models/generic/ICategorizable'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\n\nexport default types.compose(\n  IIdentity,\n  ICategorizable(),\n  IEditable,\n  types.model({\n    description: '',\n    effects: CollectionOf(Effect),\n    equipped: false,\n    name: 'New Item...',\n  }),\n).named('Item')\n","import { types } from 'mobx-state-tree'\nimport ICategorizable from '@/models/generic/ICategorizable'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\n\nexport default types.compose(\n  IIdentity,\n  ICategorizable(),\n  IEditable,\n  types.model({\n    current: 0,\n    maximum: 10,\n    name: 'New Resource...',\n  })\n).named('Resource')\n","import { types } from 'mobx-state-tree'\nimport ICategorizable from '@/models/generic/ICategorizable'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\n\nexport default types.compose(\n  IIdentity,\n  ICategorizable(self => self.mastery),\n  IEditable,\n  types.model({\n    mastery: 1,\n    name: 'New Skill...',\n    theory: 0,\n  }).views(self => ({\n    get isComplex() { return self.theory !== 0 },\n    get isSimple() { return self.theory === 0 },\n  }))\n).named('Skill')\n","import { types } from 'mobx-state-tree'\nimport CollectionOf from '@/models/generic/Collection'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\nimport Resource from '@/models/Resource'\nimport findParent from '@/utilities/findParent'\n\nexport default types.compose(\n  IIdentity,\n  IEditable,\n  types.model({\n    amount: 0,\n    resourceName: '',\n  }).views(self => ({\n    get available() {\n      return self.character ? self.character.resources : CollectionOf(Resource).create([])\n    },\n    get character() { return findParent(self, p => p.isCharacter) },\n  })).actions(self => ({\n    afterAttach() {\n      if (!self.resourceName && self.available.length) {\n        // eslint-disable-next-line no-param-reassign\n        self.resourceName = self.available.first.name\n      }\n    },\n    resource() {\n      if (!self.character) return null\n      return self.character.resources.findBy('name', self.resourceName)\n    },\n  }))\n).named('Cost')\n","import { types } from 'mobx-state-tree'\nimport Effect from '@/models/Effect'\nimport CollectionOf from '@/models/generic/Collection'\nimport ICategorizable from '@/models/generic/ICategorizable'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\nimport ResourceCost from '@/models/ResourceCost'\nimport findParent from '@/utilities/findParent'\n\nexport default types.compose(\n  IIdentity,\n  ICategorizable(self => self.level),\n  IEditable,\n  types.model({\n    costs: CollectionOf(ResourceCost), // Resources\n    description: '',\n    effects: CollectionOf(Effect),\n    isActive: false,\n    level: 0,\n    name: 'New Spell...',\n  }).views(self => ({\n    get character() { return findParent(self, p => p.isCharacter) },\n  })).actions(self => ({\n    cast() {\n      if (self.isAffordable()) {\n        self.costs.forEach((cost) => {\n          const resource = cost.resource()\n          resource.set({ current: resource.current - cost.amount })\n        })\n      }\n    },\n    isAffordable() {\n      if (!self.character || !self.costs.length) return true\n      return self.costs.every(cost => (\n        cost.resource() && cost.resource().current >= cost.amount\n      ))\n    },\n  }))\n).named('Spell')\n","import { types } from 'mobx-state-tree'\nimport Effect from '@/models/Effect'\nimport CollectionOf from '@/models/generic/Collection'\nimport ICategorizable from '@/models/generic/ICategorizable'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\n\nexport default types.compose(\n  IIdentity,\n  ICategorizable(self => self.value),\n  IEditable,\n  types.model('Trait', {\n    effects: CollectionOf(Effect),\n    name: 'New Trait...',\n    value: 0,\n  })\n).named('Trait')\n","export default function flatten(array, depth = Infinity) {\n  if (!array || !Array.isArray(array)) {\n    throw new TypeError(`cannot flatten non-Array value ${JSON.stringify(array)}`)\n  }\n\n  return array.reduce((all, next) => {\n    if (depth > 1 && next && Array.isArray(next)) {\n      return all.concat(flatten(next, depth - 1))\n    }\n\n    return all.concat(next)\n  }, [])\n}\n","import { types } from 'mobx-state-tree'\nimport Attribute from '@/models/Attribute'\nimport Descriptor from '@/models/Descriptor'\nimport CollectionOf from '@/models/generic/Collection'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\nimport Item from '@/models/Item'\nimport Resource from '@/models/Resource'\nimport Skill from '@/models/Skill'\nimport Spell from '@/models/Spell'\nimport Trait from '@/models/Trait'\nimport flatten from '@/utilities/flatten'\n\nexport default types.compose(\n  IIdentity,\n  IEditable,\n  types.model({\n    attributes: CollectionOf(Attribute),\n    conditions: CollectionOf(types.string), // ['vs Goblins', 'Crinos Form']\n    descriptors: CollectionOf(Descriptor),\n    experience: 0,\n    items: CollectionOf(Item), // equipped / unequipped, have Effects\n    resources: CollectionOf(Resource),\n    skills: CollectionOf(Skill),\n    spells: CollectionOf(Spell),\n    traits: CollectionOf(Trait), // have Effects\n  }).volatile(() => ({\n    isCharacter: true,\n  })).actions(self => ({\n    activeEffects() {\n      return self.effects().filter(effect => effect && effect.isApplicable())\n    },\n    availableConditions() {\n      return self.effects()\n        .map(e => e.condition).concat(self.conditions.asArray)\n        .sort()\n        .filter((effect, i, all) => !i || effect !== all[i - 1])\n        .filter(Boolean)\n    },\n    effects() {\n      return flatten([\n        // Trait Effects first, because they're inherent\n        self.traits.filter(Boolean).map(trait => trait.effects.values),\n        // Direct Effects second, because they're cast on the character\n        self.spells.filter(spell => spell.isActive).map(spell => spell.effects.values),\n        // Item Effects third, because they're indirect\n        self.items.filter(item => item.equipped).map(item => item.effects.values),\n      ]).filter(Boolean)\n    },\n  }))\n).named('Character')\n","import { types } from 'mobx-state-tree'\n\nexport default (min, max, defaultTo = min) => (\n  types.optional(\n    types.refinement(\n      types.number,\n      n => n === undefined || (n >= min && n <= max)\n    ),\n    defaultTo\n  )\n)\n","import { types } from 'mobx-state-tree'\nimport CollectionOf from '@/models/generic/Collection'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\nimport between from '@/models/types/between'\n\nconst Layout = types.compose(\n  IIdentity,\n  IEditable,\n  types.model({\n    categorize: false,\n    children: CollectionOf(types.late(() => Layout)),\n    colSpan: between(1, 4, 1),\n    columns: between(1, 4, 1),\n    filter: types.maybe(types.string),\n    sortOption: types.maybe(types.number),\n    title: types.union(types.maybe(types.string), types.literal(false)),\n    type: types.maybe(types.string),\n  })\n).named('Layout')\n\nexport default Layout\n","export default (value, { min, max }) => {\n  if (min !== undefined && value < min) return min\n  if (max !== undefined && value > max) return max\n  return value\n}\n","import React from 'react'\nimport bound from '@/utilities/bound'\nimport noop from '@/utilities/noop'\nimport './Editable.scss'\n\nconst TYPES = [\n  // Strings\n  'text', 'multiline',\n  // Checkboxes\n  'boolean',\n  // Numbers\n  'number', 'slider',\n]\n\nexport default class Editable extends React.Component {\n  static displayName = 'Editable'\n\n  static defaultProps = {\n    className: '',\n    forceEditMode: false,\n    max: undefined,\n    min: undefined,\n    onChange: noop,\n    onEditEnd: noop,\n    onEditStart: noop,\n    onKeyDown: noop,\n    onKeyPress: noop,\n    onKeyUp: noop,\n    placeholder: '',\n    readOnly: false,\n    readOnlyValue: undefined,\n    step: 1,\n    type: undefined,\n    value: '',\n  }\n\n  state = {\n    editing: false,\n    resetValue: this.props.value,\n  }\n\n  get editing() {\n    return this.props.forceEditMode || this.state.editing\n  }\n\n  getEditorType = () => {\n    const { value } = this.props\n    let { type } = this.props\n\n    if (type !== undefined && TYPES.includes(type)) { return type }\n\n    type = typeof value\n    if (type === 'string') { return value.includes('\\n') ? 'multiline' : 'text' }\n    if (['boolean', 'number'].includes(type)) { return type }\n\n    return 'text'\n  }\n\n  resetChanges = () => {\n    this.props.onChange(this.state.resetValue, this.props.value)\n    this.handleToggleEditing()\n  }\n\n  createRefWithAutoFocus = (editor) => {\n    if (!editor) { return }\n    this.editor = editor\n\n    const editorType = this.getEditorType()\n    if (editorType !== 'boolean' && typeof editor.focus === 'function') { editor.focus() }\n\n    if (['boolean', 'number'].includes(this.getEditorType())) { return }\n    if (this.props.forceEditMode && typeof editor.setSelectionRange === 'function') {\n      editor.setSelectionRange(editor.value.length, editor.value.length)\n    }\n  }\n\n  handleChange = ({ target }) => {\n    const { min, max } = this.props\n    let { value } = target\n\n    // eslint-disable-next-line default-case\n    switch (this.getEditorType()) {\n      case 'slider':\n      case 'number':\n        value = parseFloat(value || 0)\n        // eslint-disable-next-line prefer-destructuring\n        if (Number.isNaN(value)) { value = this.props.value }\n        value = bound(value, { max, min })\n    }\n    this.props.onChange(value, this.state.resetValue)\n  }\n\n  handleKeys = (event) => {\n    const { target, key, ctrlKey, metaKey } = event\n\n    if (this.props.onKeyDown !== noop) {\n      this.props.onKeyDown(event)\n      if (event.isDefaultPrevented()) return\n    }\n\n    if (key === 'Escape') { this.resetChanges() }\n    if (key === 'Enter') {\n      if (target.nodeName !== 'TEXTAREA' || ctrlKey || metaKey) {\n        this.handleToggleEditing()\n      }\n    }\n  }\n\n  handleReceivingFocus = () => {\n    if (this.props.readOnly) { return }\n    if (!this.state.editing) { this.handleToggleEditing() }\n  }\n\n  handleToggleEditing = () => {\n    if (this.props.readOnly) { return }\n\n    const editing = !this.editing\n\n    this.setState({ editing, resetValue: this.props.value }, () => {\n      if (this.state.editing) {\n        this.props.onEditStart()\n      } else {\n        this.props.onEditEnd()\n      }\n    })\n  }\n\n  selectOnFocus = event => event.target.select()\n\n  toggleBoolean = () => {\n    this.props.onEditStart()\n    this.props.onChange(!this.props.value, this.props.value)\n    this.props.onEditEnd()\n  }\n\n  renderBoolean = () => (\n    <input\n      type=\"checkbox\"\n      checked={Boolean(this.props.value)}\n      disabled={this.props.readOnly}\n      onChange={this.toggleBoolean}\n      ref={this.createRefWithAutoFocus}\n    />\n  )\n\n  renderMultiline = () => {\n    if (!this.editing) {\n      const lines = (this.props.value || this.props.placeholder).split('\\n')\n      const paragraphs = lines.map((line, index) => <p key={index}>{line}</p>\n      )\n      const className = ['multiline', this.props.value ? '' : 'placeholder'].join(' ').trim()\n      return <div className={className} onClick={this.handleToggleEditing}>{paragraphs}</div>\n    }\n\n    return (\n      <textarea\n        disabled={this.props.readOnly}\n        onBlur={this.handleToggleEditing}\n        onChange={this.handleChange}\n        onFocus={this.selectOnFocus}\n        onKeyDown={this.handleKeys}\n        onKeyPress={this.props.onKeyPress}\n        onKeyUp={this.props.onKeyUp}\n        placeholder={this.props.placeholder}\n        ref={this.createRefWithAutoFocus}\n        rows={this.props.value.split('\\n').length}\n        value={this.props.value}\n      />\n    )\n  }\n\n  renderNumber = () => {\n    if (!this.editing) { return this.renderStatic() }\n\n    return (\n      <input\n        type=\"number\"\n        disabled={this.props.readOnly}\n        max={this.props.max}\n        min={this.props.min}\n        onBlur={this.handleToggleEditing}\n        onChange={this.handleChange}\n        onFocus={this.selectOnFocus}\n        onKeyDown={this.handleKeys}\n        onKeyPress={this.props.onKeyPress}\n        onKeyUp={this.props.onKeyUp}\n        placeholder={this.props.placeholder}\n        ref={this.createRefWithAutoFocus}\n        step={this.props.step}\n        value={this.props.value}\n      />\n    )\n  }\n\n  renderSlider = () => (\n    <input\n      type=\"range\"\n      disabled={this.props.readOnly}\n      max={this.props.max}\n      min={this.props.min}\n      onBlur={this.handleToggleEditing}\n      onChange={this.handleChange}\n      onKeyDown={this.props.onKeyDown}\n      onKeyPress={this.props.onKeyPress}\n      onKeyUp={this.props.onKeyUp}\n      ref={this.createRefWithAutoFocus}\n      step={this.props.step}\n      value={this.props.value}\n    />\n  )\n\n  renderText = () => {\n    if (!this.editing) { return this.renderStatic() }\n\n    return (\n      <input\n        type=\"text\"\n        disabled={this.props.readOnly}\n        onBlur={this.handleToggleEditing}\n        onChange={this.handleChange}\n        onFocus={this.selectOnFocus}\n        onKeyDown={this.handleKeys}\n        onKeyPress={this.props.onKeyPress}\n        onKeyUp={this.props.onKeyUp}\n        placeholder={this.props.placeholder}\n        ref={this.createRefWithAutoFocus}\n        value={this.props.value}\n      />\n    )\n  }\n\n  renderStatic = () => {\n    const { placeholder, readOnlyValue, value } = this.props\n    const showPlaceholder = placeholder && !value\n    const displayValue = readOnlyValue !== undefined ? readOnlyValue : value\n    const className = showPlaceholder ? 'placeholder' : ''\n    return (\n      <span className={className} onClick={this.handleToggleEditing}>\n        {showPlaceholder ? placeholder : displayValue}\n      </span>\n    )\n  }\n\n  renderEditor = () => {\n    switch (this.getEditorType()) {\n      case 'boolean':\n        return this.renderBoolean()\n      case 'slider':\n        return this.renderSlider()\n      case 'multiline':\n        return this.renderMultiline()\n      case 'number':\n        return this.renderNumber()\n      default:\n        return this.renderText()\n    }\n  }\n\n  render = () => {\n    const { className, readOnly } = this.props\n\n    const classes = [\n      'editable',\n      this.editing ? 'editing' : '',\n      className || '',\n      readOnly ? 'readonly' : '',\n    ].filter(Boolean)\n\n    let props = {}\n    if (!readOnly && !this.editing) {\n      props = { onFocus: this.handleReceivingFocus, tabIndex: '0' }\n    }\n\n    return (\n      <div className={classes.join(' ')} {...props}>\n        {this.renderEditor()}\n      </div>\n    )\n  }\n}\n","export default (start, end) => {\n  const step = (start <= end) ? 1 : -1\n  const length = (Math.abs(end - start) / Math.abs(step)) + 1\n  return Array(...Array(length)).map((_, i) => start + (i * step))\n}\n","import React, { Component } from 'react'\nimport bound from '@/utilities/bound'\nimport math from '@/utilities/math'\nimport noop from '@/utilities/noop'\nimport range from '@/utilities/range'\nimport './Rating.scss'\n\nexport default class Rating extends Component {\n  static defaultProps = {\n    allowExcess: false,\n    current: 0,\n    iconExcess: <span className=\"dot excess icon-add\" />,\n    iconOff: <span className=\"dot empty\" />,\n    iconOn: <span className=\"dot filled\" />,\n    maximum: 5,\n    onChange: noop,\n  }\n\n  handleIconClick = (event) => {\n    const number = parseInt(event.target.getAttribute('data-number'), 10)\n    this.props.onChange(number === this.props.current ? number - 1 : number)\n  }\n\n  render = () => {\n    const { allowExcess, current, iconExcess, iconOff, iconOn, maximum } = this.props\n    const total = allowExcess ? math.max(current, maximum) : maximum\n\n    return (\n      <div className=\"rating\">\n        {(total > 0 || (allowExcess && current > 0))\n          ? range(1, bound(total, { min: 1 })).map(number => (\n            <span data-number={number} key={number} onClick={this.handleIconClick} title={number}>\n              {(number <= current && number <= maximum) && iconOn}\n              {(number > current && number <= maximum) && iconOff}\n              {(number > maximum) && iconExcess}\n            </span>\n          ))\n          : null\n        }\n      </div>\n    )\n  }\n}\n","import { observer } from 'mobx-react'\nimport { onSnapshot } from 'mobx-state-tree'\nimport React, { Component } from 'react'\nimport Editable from '@/components/Editable'\nimport Rating from '@/components/Rating'\nimport bound from '@/utilities/bound'\nimport math from '@/utilities/math'\nimport noop from '@/utilities/noop'\nimport './Attribute.scss'\n\n@observer class Attribute extends Component {\n  static defaultProps = {\n    model: {},\n    onDelete: noop,\n    rating: false,\n  }\n\n  static sortOptions = [{\n    display: 'icon-sort-name-asc',\n    getter: model => model.name,\n  }, {\n    display: 'icon-sort-value-asc',\n    getter: model => model.modifiedValue(),\n  }]\n\n  CACHE = {}\n\n  componentDidMount() {\n    this.onSnapshotDisposer = onSnapshot(this.props.model.character, this.handleSnapshot)\n  }\n  componentWillUnmount() { this.onSnapshotDisposer() }\n\n  handleSnapshot = (snapshot) => {\n    const effects = this.props.model.effects().map(e => e.toJSON())\n    if (\n      JSON.stringify(effects) !== JSON.stringify(this.CACHE.effects) ||\n      JSON.stringify(snapshot.conditions) !== this.CACHE.conditions ||\n      this.CACHE.value !== this.props.model.value()\n    ) {\n      this.CACHE.conditions = JSON.stringify(snapshot.conditions)\n      this.CACHE.effects = effects\n      this.CACHE.value = this.props.model.value()\n      this.forceUpdate()\n    }\n  }\n  handleChangeName = (name) => {\n    const { id } = this.props.model\n    this.props.model.set({ name })\n    this.props.model.character.effects()\n      .filter(effect => effect.targetId === id)\n      .forEach((effect) => {\n        effect.set({ targetId: '' })\n        effect.set({ targetId: this.props.model.id })\n      })\n  }\n  handleCommitName = () => (this.props.model.name === '' && this.props.onDelete(this.props.model))\n  handleChangeValue = (raw) => {\n    let value = String(raw).replace(/[^a-z0-9+*()\\-/, ]/gi, '')\n    if (!Number.isNaN(Number(raw))) {\n      value = bound(Number(raw) || '', { max: 999, min: -99 })\n    }\n    this.props.model.set({ raw: value })\n  }\n  handleCommitValue = () => {\n    if (String(this.props.model.raw) === '') this.props.model.set({ raw: 0 })\n  }\n  handleValueKeyDown = ({ key }) => {\n    const { model } = this.props\n    if (model.isComputed) return\n\n    switch (key) {\n      case 'ArrowUp':\n        model.set({ raw: model.value() + 1 }); break\n      case 'ArrowDown':\n        model.set({ raw: model.value() - 1 }); break\n      default:\n    }\n  }\n\n  render() {\n    const { model, rating } = this.props\n    const modifiedValue = model.modifiedValue()\n    const value = model.value()\n\n    const className = [\n      'attribute',\n      `as-${rating ? 'rating' : 'numeric'}`,\n      `${model.isComputed ? 'is' : 'not'}-computed`,\n    ].join(' ')\n\n    const modifier = model.modifier()\n    const modifierClassName = [\n      'modifier',\n      modifier > 0 && 'positive',\n      modifier < 0 && 'negative',\n      modifier === 0 && 'zero',\n    ].filter(Boolean).join(' ')\n\n    return (\n      <div className={className}>\n        <Editable\n          className=\"name\"\n          onChange={this.handleChangeName}\n          onEditEnd={this.handleCommitName}\n          value={model.name}\n        />\n        <Editable\n          className=\"value rating\"\n          onChange={this.handleChangeValue}\n          onEditEnd={this.handleCommitValue}\n          onKeyDown={this.handleValueKeyDown}\n          readOnlyValue={(\n            <Rating\n              allowExcess\n              current={modifiedValue}\n              maximum={value}\n            />\n          )}\n          type=\"text\"\n          value={model.raw}\n        />\n        <Editable\n          className=\"value numeric\"\n          onChange={this.handleChangeValue}\n          onEditEnd={this.handleCommitValue}\n          onKeyDown={this.handleValueKeyDown}\n          readOnlyValue={value}\n          type=\"text\"\n          value={model.raw}\n        />\n        {model.effects().length !== 0 && (\n          <div\n            className={modifierClassName}\n            title={model.modifierText()}\n          >\n            {modifiedValue}\n          </div>\n        )}\n      </div>\n    )\n  }\n}\n\nexport default Attribute\n","import { observer } from 'mobx-react'\nimport React, { Component } from 'react'\nimport Editable from '@/components/Editable'\nimport noop from '@/utilities/noop'\nimport './Descriptor.scss'\n\n@observer class Descriptor extends Component {\n  static defaultProps = {\n    model: {},\n    onDelete: noop,\n  }\n\n  static sortOptions = [{\n    display: 'icon-sort-name-asc',\n    getter: model => model.name,\n  }, {\n    display: 'icon-sort-value-asc',\n    getter: model => model.value,\n  }]\n\n  handleChangeName = name => this.props.model.set({ name })\n  handleChangeValue = value => this.props.model.set({ value })\n  handleCommitName = () => (this.props.model.name === '' && this.props.onDelete(this.props.model))\n\n  render() {\n    return (\n      <div className=\"descriptor\">\n        <Editable\n          className=\"name\"\n          onChange={this.handleChangeName}\n          onEditEnd={this.handleCommitName}\n          value={this.props.model.name}\n        />\n        <Editable\n          className=\"value\"\n          type=\"text\"\n          onChange={this.handleChangeValue}\n          value={this.props.model.value}\n        />\n      </div>\n    )\n  }\n}\n\nexport default Descriptor\n","import { observer } from 'mobx-react'\nimport React, { Component } from 'react'\nimport Editable from '@/components/Editable'\nimport './Effect.scss'\n\n@observer class Effect extends Component {\n  static defaultProps = {\n    model: {},\n  }\n\n  static sortOptions = [{\n    display: 'icon-sort-name-asc',\n    getter: model => [!model.targetId, model.targetId],\n  }, {\n    display: 'icon-sort-value-asc',\n    getter: model => [!model.condition, model.modifier],\n  }]\n\n  handleChangeCondition = condition => this.props.model.set({ condition })\n  handleChangeModifier = modifier => this.props.model.set({ modifier })\n  handleChangeTarget = ({ target: { value } }) => this.props.model.set({ targetId: value })\n\n  render() {\n    const { available, condition = '', isApplicable, modifier, targetId } = this.props.model\n\n    return (\n      <div className={`effect ${isApplicable ? 'applicable' : ''}`.trim()}>\n        <select className=\"target\" value={targetId} onChange={this.handleChangeTarget}>\n          {available().map(({ hash, id, name }) => (\n            <option key={hash} value={id}>{name}</option>\n          ))}\n        </select>\n        <Editable\n          className=\"modifier\"\n          max={999}\n          min={-99}\n          onChange={this.handleChangeModifier}\n          value={modifier}\n        />\n        <Editable\n          className=\"condition\"\n          onChange={this.handleChangeCondition}\n          placeholder=\"Any\"\n          value={condition}\n        />\n      </div>\n    )\n  }\n}\n\nexport default Effect\n","import React, { Component, Fragment } from 'react'\nimport { createPortal } from 'react-dom'\nimport noop from '@/utilities/noop'\nimport './Expandable.scss'\n\nexport default class Expandable extends Component {\n  static defaultProps = {\n    expandByDefault: false,\n    omitItemWrapper: false,\n    onToggle: noop,\n    toggleButtonParent: null,\n    toggleButtonText: '',\n  }\n\n  state = {\n    expanded: false,\n  }\n\n  expander = React.createRef()\n\n  componentWillMount() {\n    this.setState({ expanded: this.props.expandByDefault })\n  }\n  componentDidMount() {\n    this.expander.current.parentElement.classList.add('expandable-wrapper')\n  }\n\n  handleToggle = () => {\n    const { classList } = this.expander.current.parentElement\n    const { expanded } = this.state\n\n    // eslint-disable-next-line react/no-access-state-in-setstate\n    this.setState({ expanded: !expanded }, () => {\n      this.props.onToggle(!expanded)\n      classList[!expanded ? 'add' : 'remove']('expanded')\n    })\n  }\n\n  renderExpanded = () => {\n    const { children, omitItemWrapper } = this.props\n    return omitItemWrapper\n      ? children\n      : <div className=\"expandable\"> {children}</div>\n  }\n\n  render() {\n    const { toggleButtonParent, toggleButtonText } = this.props\n    const toggleState = this.state.expanded ? 'expanded' : 'collapsed'\n    const buttonProps = {\n      className: `expandable-toggle icon-${toggleState}`,\n      onClick: this.handleToggle,\n      ref: this.expander,\n    }\n\n    const toggleButton = <div {...buttonProps} text={toggleButtonText} />\n    return (\n      <Fragment>\n        {toggleButtonParent ? createPortal(toggleButton, toggleButtonParent) : toggleButton}\n        {this.state.expanded && this.renderExpanded()}\n      </Fragment>\n    )\n  }\n}\n","import React, { Component } from 'react'\nimport noop from '@/utilities/noop'\nimport './MultiToggle.scss'\n\nexport default class MultiToggle extends Component {\n  static defaultProps = {\n    className: '',\n    onChange: noop,\n    options: [],\n    selected: undefined,\n  }\n\n  state = { selected: null }\n\n  handleOptionClick = ({ target }) => {\n    const index = [...target.parentElement.children].indexOf(target)\n    const selected = this.props.options[index]\n\n    if (this.props.selected !== undefined) {\n      this.props.onChange(selected)\n    } else {\n      this.setState({ selected })\n    }\n  }\n\n  render() {\n    const { className, options } = this.props\n    const selected = this.props.selected !== undefined\n      ? this.props.selected\n      : this.state.selected\n\n    return (\n      <div className={`multi-toggle ${className}`.trim()}>\n        {options.map((option, key) => (\n          <div\n            className={`toggle ${option === selected ? 'on' : 'off'}`.trim()}\n            key={key}\n            onClick={this.handleOptionClick}\n          >\n            {option.display}\n          </div>\n        ))}\n      </div>\n    )\n  }\n}\n","export default function debounce(func, wait, immediate) {\n  let timeout\n\n  return (...args) => {\n    const later = () => {\n      timeout = null\n      if (!immediate) func.apply(this, args)\n    }\n\n    const callNow = immediate && !timeout\n    clearTimeout(timeout)\n    timeout = setTimeout(later, wait)\n    if (callNow) func.apply(this, args)\n  }\n}\n","import { onSnapshot } from 'mobx-state-tree'\nimport React from 'react'\nimport Sortable from 'sortablejs'\nimport MultiToggle from '@/components/MultiToggle'\nimport CollectionOf from '@/models/generic/Collection'\nimport debounce from '@/utilities/debounce'\nimport noop from '@/utilities/noop'\nimport unique from '@/utilities/unique'\nimport './List.scss'\n\nconst NO_CATEGORY = 'Uncategorized'\n\nconst buildSorter = (getter, reversed = false) => (A, B) => {\n  const a = getter(A)\n  const b = getter(B)\n\n  if (Array.isArray(a) && Array.isArray(b)) {\n    for (let i = 0; i < a.length; i += 1) {\n      if (a[i] !== b[i]) {\n        if (reversed) return b[i] < a[i] ? -1 : 1\n        return a[i] < b[i] ? -1 : 1\n      }\n    }\n\n    return 0\n  }\n\n  if (typeof a === 'number' && typeof b === 'number') {\n    if (a === b) return 0\n    if (reversed) return b < a ? -1 : 1\n    return a < b ? -1 : 1\n  }\n\n  const aString = String(a)\n  const bString = String(b)\n\n  if (reversed) return bString.localeCompare(aString)\n  return aString.localeCompare(bString)\n}\n\nexport default (Model, Component, props = {}) => {\n  const sortOptions = (Component.sortOptions || []).map(sorter => ({\n    ...sorter,\n    comparitor: buildSorter(sorter.getter),\n    display: typeof sorter.display === 'string'\n      ? <span className={sorter.display} />\n      : sorter.display,\n  }))\n\n  return class List extends React.Component {\n    static defaultProps = {\n      className: '',\n      collection: CollectionOf(Model).create([]),\n      columns: 1,\n      layout: undefined,\n      sortable: true,\n      title: props.title || '',\n      ...props,\n    }\n\n    Component = Component\n    Model = Model\n\n    container = React.createRef()\n    expandedItems = {}\n    filterEl = React.createRef()\n    onDataSnapshotDisposer = noop\n    onLayoutSnapshotDisposer = noop\n    sortable = null\n    state = {\n      expanded: {},\n      sortOption: null,\n    }\n\n    componentDidMount() {\n      if (this.props.layout) {\n        const { sortOption: sortOptionIndex } = this.props.layout\n        if (sortOptions.length && sortOptionIndex !== undefined) {\n          this.setState({ sortOption: sortOptions[sortOptionIndex] || null })\n        }\n        this.onLayoutSnapshotDisposer = onSnapshot(this.props.layout,\n          debounce(() => this.forceUpdate(), 100, true)\n        )\n      }\n\n      const { sortable } = this.props\n      if (sortable) {\n        this.sortable = Sortable.create(this.container.current, {\n          disabled: !sortable,\n          draggable: '.list-item-wrapper',\n          handle: '.drag-handle',\n          onEnd: () => {\n            this.container.current.classList.remove('dragging')\n            this.props.collection.replace(\n              [...this.container.current.querySelectorAll('.list-item-wrapper')]\n                .map(item => parseInt(item.getAttribute('data-index'), 10))\n                .map(targetIndex => this.props.collection.at(targetIndex))\n            )\n          },\n          onStart: () => this.container.current.classList.add('dragging'),\n        })\n      }\n      this.onDataSnapshotDisposer = onSnapshot(this.props.collection, () => this.forceUpdate())\n    }\n    componentWillReceiveProps() {\n      if (this.sortable) this.sortable.option('disabled', !this.props.sortable)\n    }\n    componentWillUnmount() {\n      this.onDataSnapshotDisposer()\n      this.onLayoutSnapshotDisposer()\n    }\n\n    get categories() {\n      const list = this.props.collection.asArray.reduce((all, next) => (\n        all.concat(next.categories || [])\n      ), [])\n\n\n      if (!list.length) return []\n      return unique(list.filter(item => item !== NO_CATEGORY)).sort().concat(NO_CATEGORY)\n    }\n\n    getCategoryItems = (items, category) => (\n      (category && category !== NO_CATEGORY)\n        ? items.filter(item => (item.categories || []).includes(category))\n        : items.filter(item => (item.categories || []).length === 0)\n    )\n\n    handleAdd = () => {\n      this.props.collection.push(Model.create({}))\n      this.forceUpdate()\n    }\n    handleDelete = ({ target }) => {\n      const index = parseInt(target.parentNode.getAttribute('data-index'), 10)\n      this.props.collection.deleteAt(index)\n      this.forceUpdate()\n    }\n    handleFilterChange = ({ target }) => this.props.layout.set({ filter: target.value })\n    handleSort = () => this.props.collection.sortBy('name')\n    handleSortChange = (clicked) => {\n      const { sortOption: current } = this.state\n      this.setState({ sortOption: current === clicked ? null : clicked }, () => {\n        this.props.layout.set({\n          sortOption: current === clicked ? undefined : sortOptions.indexOf(clicked),\n        })\n      })\n    }\n    handleToggleCategorized = () => {\n      this.props.layout.set({ categorize: !this.props.layout.categorize })\n    }\n    handleToggleExpanded = (hash, expanded) => {\n      this.setState(state => ({\n        ...state,\n        expanded: { ...state.expanded, [hash]: expanded },\n      }))\n    }\n\n    renderCategoryWidget = () => {\n      const { layout } = this.props\n      const { categories } = this\n      if (!categories.length) return null\n\n      const className = [\n        'categorize icon-categorize',\n        layout.categorize ? 'on' : 'off',\n      ].join(' ')\n\n      return <>\n        <div {...{ className }} onClick={this.handleToggleCategorized} />\n        <select\n          className=\"filter\"\n          onChange={this.handleFilterChange}\n          ref={this.filterEl}\n          tabIndex={-1}\n          value={layout.filter}\n        >\n          <option value=\"\">All</option>\n          {categories.map(name => <option key={name} value={name}>{name}</option>)}\n        </select>\n      </>\n    }\n    renderSortWidget = () => {\n      if (!this.props.sortable) return null\n      if (!sortOptions.length) return null\n\n      return (\n        <MultiToggle\n          className=\"sorter\"\n          onChange={this.handleSortChange}\n          options={sortOptions}\n          selected={this.state.sortOption}\n        />\n      )\n    }\n    renderCategory = (category, data) => {\n      const { columns } = this.props\n      const categoryItems = this.getCategoryItems(data, category)\n      if (!categoryItems.length) return null\n\n      const values = categoryItems.map(item => item.categoryValue)\n      const min = Math.min(...values)\n      const max = Math.max(...values)\n\n      return (\n        <div key={category} className=\"category\">\n          <div className=\"details\">\n            <div className=\"title\">Category: {category} ({categoryItems.length})</div>\n            {(!Number.isNaN(min) && !Number.isNaN(max)) && (\n              <div className=\"range\">{min}-{max}</div>\n            )}\n          </div>\n          <div className=\"category-items\" style={{ columns }}>\n            {categoryItems.map(this.renderItem)}\n          </div>\n        </div>\n      )\n    }\n    renderItem = (model) => {\n      const { collection, layout, sortable } = this.props\n      const { expanded, sortOption } = this.state\n      const sorted = sortable && sortOption !== null\n      const categorized = layout && layout.categorize\n\n      return (\n        <div\n          className={`list-item-wrapper ${expanded[model.hash] ? 'expanded' : ''}`.trim()}\n          data-index={collection.indexOf(model)}\n          key={model.hash}\n        >\n          {(!sorted && !categorized) && <div className=\"drag-handle\" />}\n          <Component\n            model={model}\n            onDelete={collection.delete}\n            onToggleExpanded={this.handleToggleExpanded}\n          />\n          <button className=\"icon-remove\" onClick={this.handleDelete} />\n        </div>\n      )\n    }\n\n    render() {\n      const { className = '', columns, layout = {}, title } = this.props\n      const { sortOption } = this.state\n      let { categories } = this\n      let data = this.props.collection.asArray\n      if (sortOption !== null) data = data.sort(sortOption.comparitor)\n\n      const hasCategories = Boolean(categories.length)\n      if (hasCategories && layout.filter) {\n        data = this.getCategoryItems(data, layout.filter)\n        categories = [layout.filter]\n      }\n      const listStyle = {\n        columns: layout.categorize ? 1 : columns,\n      }\n\n      return (\n        <div className={`list ${className}`.trim()} ref={this.container} style={listStyle}>\n          <div className=\"title-bar\">\n            {this.renderSortWidget()}\n            {this.renderCategoryWidget()}\n            <div className=\"text\">{title}</div>\n            <button className=\"add icon-add\" onClick={this.handleAdd} />\n          </div>\n          {(hasCategories && layout.categorize)\n            ? categories.map(category => this.renderCategory(category, data))\n            : data.map(this.renderItem)\n          }\n        </div>\n      )\n    }\n  }\n}\n","import { observer } from 'mobx-react'\nimport React, { Component } from 'react'\nimport Editable from '@/components/Editable'\nimport Effect from '@/components/Effect'\nimport Expandable from '@/components/Expandable'\nimport ListOf from '@/components/List'\nimport EffectModel from '@/models/Effect'\nimport noop from '@/utilities/noop'\nimport './Item.scss'\n\nconst EffectList = ListOf(EffectModel, Effect, { className: 'effect-list' })\n\n@observer class Item extends Component {\n  static defaultProps = {\n    model: {},\n    onDelete: noop,\n    onToggleExpanded: noop,\n  }\n\n  static sortOptions = [{\n    display: 'icon-sort-name-asc',\n    getter: model => model.name,\n  }, {\n    display: 'icon-backpack',\n    getter: model => [!model.equipped, model.name],\n  }]\n\n  handleChangeDescription = description => this.props.model.set({ description })\n  handleChangeName = name => this.props.model.set({ name })\n  handleCommitName = () => (this.props.model.name === '' && this.props.onDelete(this.props.model))\n  handleToggleEquipped = () => this.props.model.set({ equipped: !this.props.model.equipped })\n\n  render() {\n    const { description, hash, name, effects, equipped } = this.props.model\n\n    return (\n      <div className={`item ${equipped ? '' : 'un'}equipped`}>\n        <Editable className=\"equipped\" onChange={this.handleToggleEquipped} value={equipped} />\n        <Editable\n          className=\"name\"\n          onChange={this.handleChangeName}\n          onEditEnd={this.handleCommitName}\n          value={name}\n        />\n        <Expandable onToggle={expanded => this.props.onToggleExpanded(hash, expanded)}>\n          <Editable\n            className=\"description\"\n            type=\"multiline\"\n            onChange={this.handleChangeDescription}\n            placeholder=\"Description...\"\n            value={description}\n          />\n          <EffectList collection={effects} title=\"Effects\" />\n        </Expandable>\n      </div>\n    )\n  }\n}\n\nexport default Item\n","import { observer } from 'mobx-react'\nimport React, { Component } from 'react'\nimport Editable from '@/components/Editable'\nimport Rating from '@/components/Rating'\nimport noop from '@/utilities/noop'\nimport './Resource.scss'\n\n@observer class Resource extends Component {\n  static defaultProps = {\n    model: {},\n    onDelete: noop,\n  }\n\n  static sortOptions = [{\n    display: 'icon-sort-name-asc',\n    getter: model => model.name,\n  }]\n\n  handleChangeCurrent = current => this.props.model.set({ current })\n  handleChangeMaximum = maximum => this.props.model.set({ maximum })\n  handleChangeName = name => this.props.model.set({ name })\n  handleCommitName = () => (this.props.model.name === '' && this.props.onDelete(this.props.model))\n\n  render() {\n    const { current, name, maximum } = this.props.model\n\n    return (\n      <div className=\"resource\">\n        <div className=\"display\">\n          <Editable\n            className=\"name\"\n            onChange={this.handleChangeName}\n            onEditEnd={this.handleCommitName}\n            value={name}\n          />\n          <Editable\n            className=\"current\"\n            max={999}\n            min={0}\n            onChange={this.handleChangeCurrent}\n            value={current}\n          />\n          {'of'}\n          <Editable\n            className=\"maximum\"\n            max={999}\n            min={0}\n            onChange={this.handleChangeMaximum}\n            value={maximum}\n          />\n        </div>\n        <Rating\n          allowExcess\n          current={current}\n          maximum={maximum}\n          onChange={this.handleChangeCurrent}\n        />\n      </div>\n    )\n  }\n}\n\nexport default Resource\n","import { observer } from 'mobx-react'\nimport React, { Component } from 'react'\nimport Editable from '@/components/Editable'\nimport noop from '@/utilities/noop'\nimport './Skill.scss'\n\n@observer class Skill extends Component {\n  static defaultProps = {\n    model: {},\n    onDelete: noop,\n  }\n\n  static sortOptions = [{\n    display: 'icon-sort-name-asc',\n    getter: model => model.name,\n  }, {\n    display: 'icon-sort-value-desc',\n    getter: model => [-model.theory, -model.mastery, model.name],\n  }, {\n    display: 'icon-sort-size-desc',\n    getter: model => [-model.mastery, -model.theory, model.name],\n  }]\n\n  onChangeName = name => this.props.model.set({ name })\n  onChangeMastery = mastery => this.props.model.set({ mastery })\n  handleCommitName = () => (this.props.model.name === '' && this.props.onDelete(this.props.model))\n  onChangeTheory = theory => this.props.model.set({ theory })\n\n  render() {\n    const { model } = this.props\n\n    return (\n      <div className=\"skill\">\n        <Editable\n          className=\"name\"\n          onChange={this.onChangeName}\n          onEditEnd={this.handleCommitName}\n          value={model.name}\n        />\n        <Editable\n          className={`theory ${(!model.theory && 'is-zero') || ''}`}\n          max={999}\n          min={-99}\n          onChange={this.onChangeTheory}\n          value={model.theory}\n        />\n        <Editable\n          className=\"mastery\"\n          max={999}\n          min={-99}\n          onChange={this.onChangeMastery}\n          value={model.mastery}\n        />\n      </div>\n    )\n  }\n}\n\nexport default Skill\n","import { observer } from 'mobx-react'\nimport React, { Component } from 'react'\nimport Editable from '@/components/Editable'\nimport './ResourceCost.scss'\n\n@observer class ResourceCost extends Component {\n  static defaultProps = {\n    model: {},\n  }\n\n  static sortOptions = [{\n    display: 'icon-sort-name-asc',\n    getter: model => model.resourceName,\n  }, {\n    display: 'icon-sort-value-asc',\n    getter: model => model.amount,\n  }]\n\n  handleChangeAmount = amount => this.props.model.set({ amount })\n  handleChangeResource = ({ target: { value } }) => this.props.model.set({ resourceName: value })\n\n  render() {\n    const { amount, available, resourceName } = this.props.model\n\n    return (\n      <div className=\"resource-cost\">\n        <select className=\"resource-id\" value={resourceName} onChange={this.handleChangeResource}>\n          {available.map(({ name }) => (\n            <option key={name} value={name}>{name}</option>\n          ))}\n        </select>\n        <Editable\n          className=\"amount\"\n          max={999}\n          min={-99}\n          onChange={this.handleChangeAmount}\n          value={amount}\n        />\n      </div>\n    )\n  }\n}\n\nexport default ResourceCost\n","import { observer } from 'mobx-react'\nimport { onSnapshot } from 'mobx-state-tree'\nimport React, { Component } from 'react'\nimport Editable from '@/components/Editable'\nimport Effect from '@/components/Effect'\nimport Expandable from '@/components/Expandable'\nimport ListOf from '@/components/List'\nimport ResourceCost from '@/components/ResourceCost'\nimport EffectModel from '@/models/Effect'\nimport ResourceCostModel from '@/models/ResourceCost'\nimport noop from '@/utilities/noop'\nimport './Spell.scss'\n\nconst EffectList = ListOf(EffectModel, Effect, { className: 'effect-list' })\n\nconst ListOfCosts = ListOf(ResourceCostModel, ResourceCost, {\n  className: 'resource-cost-list',\n})\n\n@observer class Spell extends Component {\n  static defaultProps = {\n    model: {},\n    onDelete: noop,\n    onToggleExpanded: noop,\n  }\n\n  static sortOptions = [{\n    display: 'icon-sort-name-asc',\n    getter: model => [model.name, model.level],\n  }, {\n    display: 'icon-sort-value-asc',\n    getter: model => [model.level, model.name],\n  }, {\n    display: 'icon-sort-value-desc',\n    getter: model => [-model.level, model.name],\n  }]\n\n  onResourceSnapshotDisposer = noop\n\n  componentDidMount() {\n    const { resources } = this.props.model.character\n    this.onResourceSnapshotDisposer = onSnapshot(resources, () => this.forceUpdate())\n  }\n  componentWillUnmount() { this.onResourceSnapshotDisposer() }\n\n  handleCast = () => {\n    this.props.model.cast()\n    this.forceUpdate()\n  }\n\n  handleChangeDescription = description => this.props.model.set({ description })\n  handleChangeLevel = level => this.props.model.set({ level })\n  handleChangeName = name => this.props.model.set({ name })\n  handleCommitName = () => (this.props.model.name === '' && this.props.onDelete(this.props.model))\n  handleToggleActive = () => this.props.model.set({ isActive: !this.props.model.isActive })\n\n  render() {\n    const {\n      costs, description, name, effects, hash, isActive, isAffordable, level,\n    } = this.props.model\n\n    return (\n      <div className={`spell ${isActive ? '' : 'in'}active`}>\n        <Editable className=\"is-active\" onChange={this.handleToggleActive} value={isActive} />\n        <Editable\n          className=\"name\"\n          onChange={this.handleChangeName}\n          onEditEnd={this.handleCommitName}\n          value={name}\n        />\n        <Editable\n          className=\"level\"\n          onChange={this.handleChangeLevel}\n          value={level}\n        />\n        <button className=\"cast icon-magic\" onClick={this.handleCast} disabled={!isAffordable()} />\n        <Expandable onToggle={expanded => this.props.onToggleExpanded(hash, expanded)}>\n          <Editable\n            className=\"description\"\n            type=\"multiline\"\n            onChange={this.handleChangeDescription}\n            placeholder=\"Description...\"\n            value={description}\n          />\n          <ListOfCosts collection={costs} title=\"Casting Costs\" />\n          <EffectList collection={effects} title=\"Effects\" />\n        </Expandable>\n      </div>\n    )\n  }\n}\n\nexport default Spell\n","import { observer } from 'mobx-react'\nimport React, { Component } from 'react'\nimport Editable from '@/components/Editable'\nimport Effect from '@/components/Effect'\nimport Expandable from '@/components/Expandable'\nimport ListOf from '@/components/List'\nimport EffectModel from '@/models/Effect'\nimport noop from '@/utilities/noop'\nimport './Trait.scss'\n\nconst EffectList = ListOf(EffectModel, Effect)\n\n@observer class Trait extends Component {\n  static defaultProps = {\n    model: {},\n    onDelete: noop,\n    onToggleExpanded: noop,\n  }\n\n  static sortOptions = [{\n    display: 'icon-sort-name-asc',\n    getter: model => model.name,\n  }, {\n    display: 'icon-sort-value-asc',\n    getter: model => model.value,\n  }]\n\n  handleChangeName = name => this.props.model.set({ name })\n  handleChangeValue = value => this.props.model.set({ value })\n  handleCommitName = () => (this.props.model.name === '' && this.props.onDelete(this.props.model))\n\n  render() {\n    const { model } = this.props\n\n    return (\n      <div className=\"trait\">\n        <Editable\n          className=\"name\"\n          onChange={this.handleChangeName}\n          onEditEnd={this.handleCommitName}\n          value={model.name}\n        />\n        <Editable\n          className=\"value\"\n          max={999}\n          min={-99}\n          onChange={this.handleChangeValue}\n          value={model.value}\n        />\n        <Expandable onToggle={expanded => this.props.onToggleExpanded(model.hash, expanded)}>\n          <EffectList collection={model.effects} title=\"Effects\" />\n        </Expandable>\n      </div>\n    )\n  }\n}\n\nexport default Trait\n","import Attribute from '@/components/Attribute'\nimport Descriptor from '@/components/Descriptor'\nimport Effect from '@/components/Effect'\nimport Item from '@/components/Item'\nimport Resource from '@/components/Resource'\nimport Skill from '@/components/Skill'\nimport Spell from '@/components/Spell'\nimport Trait from '@/components/Trait'\n\nexport default {\n  Attribute,\n  Descriptor,\n  Effect,\n  Item,\n  Resource,\n  Skill,\n  Spell,\n  Trait,\n}\n","import { observer } from 'mobx-react'\nimport { onSnapshot } from 'mobx-state-tree'\nimport React, { Component } from 'react'\nimport Editable from '@/components/Editable'\nimport Expandable from '@/components/Expandable'\nimport './Conditions.scss'\n\nexport default observer(class Conditions extends Component {\n  static defaultProps = {\n    model: {},\n  }\n\n  CACHE = {}\n\n  componentDidMount() {\n    this.onSnapshotDisposer = onSnapshot(this.props.model, this.handleSnapshot)\n  }\n\n  componentWillUnmount() {\n    this.onSnapshotDisposer()\n  }\n\n  handleSnapshot = () => {\n    const availableConditions = this.props.model.availableConditions()\n    const conditions = this.props.model.conditions.asArray\n\n    if (\n      JSON.stringify(availableConditions) !== JSON.stringify(this.CACHE.availableConditions) ||\n      JSON.stringify(conditions) !== JSON.stringify(this.CACHE.conditions)\n    ) {\n      this.CACHE.availableConditions = availableConditions\n      this.CACHE.conditions = conditions\n      this.forceUpdate()\n    }\n  }\n\n  handleCheckbox = (condition, value) => {\n    const { conditions } = this.props.model\n\n    if (value && !conditions.includes(condition)) {\n      conditions.push(condition)\n    } else if (typeof conditions.delete === 'function') {\n      conditions.delete(condition)\n    } else {\n      conditions.splice(conditions.indexOf(condition), 1)\n    }\n    this.forceUpdate()\n  }\n\n  renderCondition = (condition) => {\n    const { conditions } = this.props.model\n    const isCurrent = conditions.includes(condition)\n    return (\n      <div key={condition} className={`condition ${isCurrent ? 'current' : 'available'}`}>\n        <Editable\n          className=\"current\"\n          onChange={value => this.handleCheckbox(condition, value)}\n          value={isCurrent}\n        />\n        <div className=\"name\">{condition}</div>\n      </div>\n    )\n  }\n\n  render() {\n    return (\n      <div className=\"conditions\">\n        <Expandable>\n          {this.props.model.availableConditions().map(this.renderCondition)}\n        </Expandable>\n      </div>\n    )\n  }\n})\n","import { onSnapshot } from 'mobx-state-tree'\nimport React, { Component } from 'react'\nimport Editable from '@/components/Editable'\nimport Expandable from '@/components/Expandable'\nimport noop from '@/utilities/noop'\nimport './Layout.scss'\n\nexport default class Layout extends Component {\n  titleBar = React.createRef()\n\n  onSnapshotDisposer = noop\n  snapshot = null\n\n  componentDidMount() {\n    this.onSnapshotDisposer = onSnapshot(this.props.model, (snapshot) => {\n      const snapshotJSON = JSON.stringify(snapshot)\n      if (this.snapshot !== snapshotJSON) {\n        this.snapshot = snapshotJSON\n        this.forceUpdate()\n      }\n    })\n    this.forceUpdate() // Immediate redraw to place buttonParent\n  }\n  componentWillUnmount() { this.onSnapshotDisposer() }\n\n  handleChangeTitle = title => this.props.model.set({ title })\n\n  render() {\n    const { children, parentColumns } = this.props\n    const { colSpan, title } = this.props.model\n\n    return (\n      <div className=\"layout\" style={{ width: `calc(100%/${parentColumns}*${colSpan})` }}>\n        {title === undefined\n          ? children\n          : <>\n            <div className=\"title-bar\" ref={this.titleBar}>\n              <Editable\n                className=\"title\"\n                onChange={this.handleChangeTitle}\n                placeholder=\"Section Title\"\n                value={title}\n              />\n            </div>\n            <Expandable\n              expandByDefault\n              omitItemWrapper\n              toggleButtonParent={this.titleBar.current}\n            >\n              {children}\n            </Expandable>\n          </>\n        }\n      </div>\n    )\n  }\n}\n","import Attribute from '@/models/Attribute'\nimport Descriptor from '@/models/Descriptor'\nimport Effect from '@/models/Effect'\nimport Item from '@/models/Item'\nimport Resource from '@/models/Resource'\nimport Skill from '@/models/Skill'\nimport Spell from '@/models/Spell'\nimport Trait from '@/models/Trait'\n\nexport default {\n  Attribute,\n  Descriptor,\n  Effect,\n  Item,\n  Resource,\n  Skill,\n  Spell,\n  Trait,\n}\n","import { observer } from 'mobx-react'\nimport { onSnapshot } from 'mobx-state-tree'\nimport React from 'react'\nimport components from '@/components'\nimport Conditions from '@/components/Conditions'\nimport Layout from '@/components/Layout'\nimport ListOf from '@/components/List'\nimport models from '@/models'\nimport debounce from '@/utilities/debounce'\nimport noop from '@/utilities/noop'\nimport './Sheet.scss'\n\n@observer class Sheet extends React.Component {\n  static defaultProps = {\n    character: {},\n    layout: {},\n    onChange: noop,\n    onMount: noop,\n  }\n\n  state = { size: 'large' }\n\n  handleWindowResize = debounce(() => {\n    let size = 'large'\n    if (window.matchMedia('(min-width: 5in) and (max-width: 7.5in)').matches) {\n      size = 'medium'\n    } else if (window.matchMedia('(max-width: 5in)').matches) {\n      size = 'small'\n    }\n    if (size !== this.state.size) this.setState({ size })\n  }, 250)\n\n  constructor(props) {\n    super(props)\n    this.onCharacterSnapshotDisposer = onSnapshot(this.props.character, (snapshot) => {\n      this.props.onChange(snapshot, this.props.layout.toJSON(), this)\n    })\n    this.onLayoutSnapshotDisposer = onSnapshot(this.props.layout, (snapshot) => {\n      this.props.onChange(this.props.character.toJSON(), snapshot, this)\n    })\n  }\n\n  componentDidMount() {\n    this.handleWindowResize()\n    window.addEventListener('resize', this.handleWindowResize)\n    this.props.onMount(this)\n  }\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.handleWindowResize)\n    this.onCharacterSnapshotDisposer()\n    this.onLayoutSnapshotDisposer()\n  }\n\n\n  renderComponent = (parent, model, key) => {\n    if (model.type) {\n      const { title } = model\n      const typename = model.type.toLowerCase()\n      const List = ListOf(\n        models[model.type],\n        components[model.type],\n        { className: `${typename}-list` }\n      )\n      const collection = this.props.character[`${typename}s`]\n      return (\n        <List {...{ key, layout: model, title }} collection={collection} columns={model.columns} />\n      )\n    }\n\n    return (\n      <Layout key={model.hash} model={model} parentColumns={parent.columns}>\n        {model.children.map((child, i) => this.renderComponent(model, child, i))}\n      </Layout>\n    )\n  }\n\n  render() {\n    const { character, layout } = this.props\n    const { size } = this.state\n\n    return (\n      <div className={`sheetforge sheet ${size}`}>\n        <Conditions model={character} />\n        {layout.children.map(this.renderComponent.bind(null, layout))}\n      </div>\n    )\n  }\n}\n\nexport default Sheet\n","import '@fontello/css/sheetforge-embedded'\n\nexport { default as AttributeModel } from '@/models/Attribute'\nexport { default as CharacterModel } from '@/models/Character'\nexport { default as DescriptorModel } from '@/models/Descriptor'\nexport { default as EffectModel } from '@/models/Effect'\nexport { default as ItemModel } from '@/models/Item'\nexport { default as LayoutModel } from '@/models/Layout'\nexport { default as ResourceCostModel } from '@/models/ResourceCost'\nexport { default as ResourceModel } from '@/models/Resource'\nexport { default as Sheet } from '@/components/Sheet'\nexport { default as SkillModel } from '@/models/Skill'\nexport { default as SpellModel } from '@/models/Spell'\nexport { default as TraitModel } from '@/models/Trait'\n","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin"],"sourceRoot":""}