{"version":3,"sources":["webpack://sheetforge/webpack/universalModuleDefinition","webpack://sheetforge/webpack/bootstrap","webpack://sheetforge/./source/utilities/noop.js","webpack://sheetforge/./source/utilities/unique.js","webpack://sheetforge/./source/models/generic/ICategorizable/ICategorizable.js","webpack://sheetforge/./source/utilities/splitObjectPath.js","webpack://sheetforge/./source/utilities/getPathValue.js","webpack://sheetforge/./source/utilities/setPathValue.js","webpack://sheetforge/./source/models/generic/IEditable/IEditable.js","webpack://sheetforge/./source/utilities/hash.js","webpack://sheetforge/./source/models/generic/IIdentity/IIdentity.js","webpack://sheetforge/./source/utilities/findParent.js","webpack://sheetforge/./source/utilities/math/math.js","webpack://sheetforge/./source/utilities/math/toSymbols.js","webpack://sheetforge/./source/utilities/math/calculate.js","webpack://sheetforge/./source/models/Attribute/Attribute.js","webpack://sheetforge/./source/models/Descriptor/Descriptor.js","webpack://sheetforge/./source/utilities/compareBy.js","webpack://sheetforge/./source/models/generic/Collection/Collection.js","webpack://sheetforge/./source/models/Effect/Effect.js","webpack://sheetforge/./source/models/Item/Item.js","webpack://sheetforge/./source/models/Resource/Resource.js","webpack://sheetforge/./source/models/Skill/Skill.js","webpack://sheetforge/./source/models/ResourceCost/ResourceCost.js","webpack://sheetforge/./source/models/Spell/Spell.js","webpack://sheetforge/./source/models/Trait/Trait.js","webpack://sheetforge/./source/utilities/flatten.js","webpack://sheetforge/./source/models/Character/Character.js","webpack://sheetforge/./source/models/types/between.js","webpack://sheetforge/./source/models/Layout/Layout.js","webpack://sheetforge/./source/utilities/bound.js","webpack://sheetforge/./source/components/Editable/Editable.js","webpack://sheetforge/./source/utilities/range.js","webpack://sheetforge/./source/components/Rating/Rating.js","webpack://sheetforge/./source/components/Attribute/Attribute.js","webpack://sheetforge/./source/components/Descriptor/Descriptor.js","webpack://sheetforge/./source/components/Effect/Effect.js","webpack://sheetforge/./source/components/Expandable/Expandable.js","webpack://sheetforge/./source/components/MultiToggle/MultiToggle.js","webpack://sheetforge/./source/utilities/debounce.js","webpack://sheetforge/./source/components/List/List.js","webpack://sheetforge/./source/components/Item/Item.js","webpack://sheetforge/./source/components/Resource/Resource.js","webpack://sheetforge/./source/components/Skill/Skill.js","webpack://sheetforge/./source/components/ResourceCost/ResourceCost.js","webpack://sheetforge/./source/components/Spell/Spell.js","webpack://sheetforge/./source/components/Trait/Trait.js","webpack://sheetforge/./source/components/index.js","webpack://sheetforge/./source/components/Conditions/Conditions.js","webpack://sheetforge/./source/components/Layout/Layout.js","webpack://sheetforge/./source/models/index.js","webpack://sheetforge/./source/components/Sheet/Sheet.js","webpack://sheetforge/./source/index.js","webpack://sheetforge/./source/components/Expandable/Expandable.scss","webpack://sheetforge/./source/components/Effect/Effect.scss","webpack://sheetforge/./source/components/Item/Item.scss","webpack://sheetforge/./fontello/css/sheetforge-embedded.css","webpack://sheetforge/./source/components/Sheet/Sheet.scss","webpack://sheetforge/./source/components/Spell/Spell.scss","webpack://sheetforge/./source/components/Editable/Editable.scss","webpack://sheetforge/./source/components/Skill/Skill.scss","webpack://sheetforge/./source/components/Rating/Rating.scss","webpack://sheetforge/./source/components/Conditions/Conditions.scss","webpack://sheetforge/./source/components/MultiToggle/MultiToggle.scss","webpack://sheetforge/./source/components/List/List.scss","webpack://sheetforge/./source/components/Attribute/Attribute.scss","webpack://sheetforge/./source/components/Descriptor/Descriptor.scss","webpack://sheetforge/./source/components/Layout/Layout.scss","webpack://sheetforge/./source/components/Trait/Trait.scss","webpack://sheetforge/./source/components/Resource/Resource.scss","webpack://sheetforge/./source/components/ResourceCost/ResourceCost.scss"],"names":["array","filter","item","index","all","indexOf","getValue","noop","types","model","volatile","isICategorizable","views","self","getCategories","name","categories","split","pop","unique","map","category","trim","Boolean","sort","lastUsedName","categoryValue","PATH_SPLITTER","path","match","object","undefined","splitObjectPath","Array","isArray","property","target","reduce","o","key","value","isIEditable","set","IEditable","savedVersion","isDirty","deepEqual","toJSON","actions","afterCreate","isPathDirty","current","getPathValue","initial","markAsClean","Object","keys","forEach","isObservableArray","child","reset","assign","setPathValue","hash","radix","string","String","h","char","charCodeAt","Math","abs","toString","randomHash","random","filterFunction","hasParent","parent","getParent","math","core","create","import","require","expression","fns","symbols","parse","traverse","node","fn","push","type","includes","data","options","defaultSymbolValue","safeData","toSymbols","symbol","Number","isNaN","eval","compose","IIdentity","ICategorizable","modifiedValue","raw","optional","union","number","character","findParent","p","isCharacter","id","toLowerCase","replace","isComputed","computing","effects","activeEffects","effect","targetId","modifier","sum","modifierText","sourceName","join","computed","values","attribute","attributes","findBy","calculate","error","process","console","preProcessSnapshot","snapshot","postProcessSnapshot","named","prop","reversed","objectA","objectB","a","Map","get","b","localeCompare","TYPE","TypedArrayWrapper","asArray","slice","first","length","at","last","n","clear","delete","deleteAt","_","every","find","findById","identifierAttribute","searchElement","fromIndex","element","insert","splice","concat","shift","start","end","some","sortBy","direction","TypeError","compareBy","reverse","deleteCount","toObject","keyProp","valueProp","entry","unshift","custom","fromSnapshot","getValidationMessage","f","is","isTargetType","condition","afterAttach","available","CollectionOf","Attribute","isApplicable","conditions","source","description","Effect","equipped","maximum","mastery","theory","isComplex","isSimple","amount","resourceName","resources","Resource","resource","level","costs","ResourceCost","isActive","cast","isAffordable","cost","flatten","depth","Infinity","JSON","stringify","next","descriptors","Descriptor","experience","items","Item","skills","Skill","spells","Spell","traits","Trait","availableConditions","e","i","trait","spell","min","max","defaultTo","refinement","Layout","categorize","children","late","colSpan","between","columns","maybe","sortOption","title","literal","TYPES","Editable","editing","resetValue","props","onChange","state","handleToggleEditing","editor","editorType","getEditorType","focus","forceEditMode","setSelectionRange","parseFloat","bound","event","ctrlKey","metaKey","onKeyDown","isDefaultPrevented","resetChanges","nodeName","readOnly","setState","onEditStart","onEditEnd","select","toggleBoolean","createRefWithAutoFocus","lines","placeholder","paragraphs","line","className","handleChange","selectOnFocus","handleKeys","onKeyPress","onKeyUp","renderStatic","step","readOnlyValue","showPlaceholder","displayValue","renderBoolean","renderSlider","renderMultiline","renderNumber","renderText","classes","onFocus","handleReceivingFocus","tabIndex","renderEditor","React","Component","round","floor","Rating","parseInt","getAttribute","allowExcess","iconExcess","iconOff","iconOn","total","range","ceil","handleIconClick","observer","CACHE","forceUpdate","onDelete","onSnapshotDisposer","onSnapshot","handleSnapshot","rating","modifierClassName","handleChangeName","handleCommitName","handleChangeValue","handleCommitValue","handleValueKeyDown","display","getter","handleChangeTarget","handleChangeModifier","handleChangeCondition","Expandable","expanded","createRef","classList","expander","parentElement","onToggle","omitItemWrapper","expandByDefault","add","toggleButtonParent","toggleButtonText","toggleState","buttonProps","onClick","handleToggle","ref","toggleButton","createPortal","renderExpanded","MultiToggle","selected","option","handleOptionClick","debounce","func","wait","immediate","timeout","args","later","apply","callNow","clearTimeout","setTimeout","NO_CATEGORY","buildSorter","A","B","aString","bString","Model","sortOptions","sorter","comparitor","collection","parentNode","layout","clicked","handleToggleCategorized","handleFilterChange","filterEl","sortable","handleSortChange","categoryItems","getCategoryItems","renderItem","sorted","categorized","handleToggleExpanded","handleDelete","sortOptionIndex","onLayoutSnapshotDisposer","Sortable","container","disabled","draggable","handle","onEnd","remove","querySelectorAll","targetIndex","onStart","onDataSnapshotDisposer","destroy","hasCategories","listStyle","renderSortWidget","renderCategoryWidget","handleAdd","renderCategory","list","EffectList","ListOf","EffectModel","handleToggleEquipped","onToggleExpanded","handleChangeDescription","handleChangeCurrent","handleChangeMaximum","onChangeName","onChangeTheory","onChangeMastery","handleChangeResource","handleChangeAmount","ListOfCosts","ResourceCostModel","onResourceSnapshotDisposer","handleToggleActive","handleChangeLevel","handleCast","isCurrent","handleCheckbox","renderCondition","snapshotJSON","parentColumns","width","titleBar","handleChangeTitle","Sheet","size","window","matchMedia","matches","typename","List","models","components","renderComponent","onCharacterSnapshotDisposer","handleWindowResize","addEventListener","onMount","removeEventListener","bind"],"mappings":"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","file":"sheetforge.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"sheetforge\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"sheetforge\"] = factory();\n\telse\n\t\troot[\"sheetforge\"] = factory();\n})(global, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"05fm\");\n","export default () => {}\n","export default (array = []) => (\n  array.filter((item, index, all) => all.indexOf(item) === index)\n)\n","import { types } from 'mobx-state-tree'\nimport noop from '@/utilities/noop'\nimport unique from '@/utilities/unique'\n\nexport default (getValue = noop) => types.model({\n}).volatile(() => ({\n  isICategorizable: true,\n})).views((self) => {\n  function getCategories() {\n    if (!self.name) return []\n\n    const categories = self.name.split(':')\n    categories.pop() // remove the name\n\n    return unique(categories.map(category => category.trim()).filter(Boolean)).sort()\n  }\n  let lastUsedName = self.name\n  let categories = getCategories()\n\n  return {\n    get categories() {\n      if (!self.name || self.name === lastUsedName) return categories\n\n      lastUsedName = self.name\n      categories = getCategories()\n\n      return categories\n    },\n    get categoryValue() { return getValue(self) },\n  }\n})\n","const PATH_SPLITTER = /([a-z0-9-_]+)(?![[\"'\\].])*/ig\n\nexport default (path) => {\n  if (typeof path !== 'string') return null\n  return path.match(PATH_SPLITTER)\n}\n","import splitObjectPath from '@/utilities/splitObjectPath'\n\nexport default (object, path) => {\n  if (typeof path !== 'string') return undefined\n\n  const split = splitObjectPath(path)\n\n  if (!Array.isArray(split)) return undefined\n\n  const property = split.pop()\n  const target = split.reduce((o, key) => o[key] || {}, object)\n\n  if (target) return target[property]\n  return undefined\n}\n","import splitObjectPath from '@/utilities/splitObjectPath'\n\nexport default (object, path, value) => {\n  const split = splitObjectPath(path)\n  const property = split.pop()\n  const target = split.reduce((o, key) => o[key] || {}, object)\n\n  if (target && target.isIEditable) {\n    target.set(property, value)\n  } else {\n    target[property] = value\n  }\n}\n","import deepEqual from 'deep-equal'\nimport { isObservableArray } from 'mobx'\nimport { types } from 'mobx-state-tree'\nimport getPathValue from '@/utilities/getPathValue'\nimport setPathValue from '@/utilities/setPathValue'\n\nconst IEditable = types.model('IEditable', {\n  // Any\n}).volatile(() => ({\n  isIEditable: true,\n  savedVersion: {},\n})).views(self => ({\n  get isDirty() { return !deepEqual(self.toJSON(), self.savedVersion) },\n})).actions(self => ({\n  /* eslint-disable no-param-reassign */\n\n  afterCreate() { self.savedVersion = self.toJSON() },\n  isPathDirty: (path) => {\n    const current = getPathValue(self.toJSON(), path)\n    const initial = getPathValue(self.savedVersion, path)\n    return !deepEqual(current, initial)\n  },\n  markAsClean() {\n    self.savedVersion = self.toJSON()\n\n    Object.keys(self.savedVersion).forEach((key) => {\n      const value = self[key]\n      if (!value) { return }\n\n      if (value.isIEditable) {\n        value.markAsClean()\n      } else if (isObservableArray(value)) {\n        value.forEach(child => (child && child.isIEditable && child.markAsClean()))\n      }\n    })\n  },\n  reset() { Object.assign(self, self.savedVersion) },\n  set(key = {}, value = undefined) {\n    if (typeof key === 'string' && value !== undefined) {\n      // allows: model.set('foo.bar', 'bar')\n      if (self[key] !== undefined) {\n        self[key] = value\n      } else {\n        setPathValue(self, key, value)\n      }\n    } else if (typeof key === 'object' && value === undefined) {\n      // allows: model.set({ foo: 'Foo', bar: 'Bar' })\n      Object.assign(self, key)\n    }\n  },\n\n  /* eslint-enable no-param-reassign */\n}))\n\nexport default IEditable\n","export default function hash(value = '', radix = 16) {\n  const string = String(value)\n  let h = 0\n  string.split('').forEach((char) => {\n    /* eslint-disable no-bitwise */\n    h = ((h << 5) - h) + char.charCodeAt(0)\n    h &= h // Convert to 32-bit integer\n    /* eslint-enable no-bitwise */\n  })\n  return Math.abs(h).toString(radix)\n}\n\nexport const randomHash = () => hash(Math.random().toString())\n","import { types } from 'mobx-state-tree'\nimport { randomHash } from '@/utilities/hash'\n\nexport default types.model({\n  // Nothing\n}).volatile(() => ({\n  hash: '',\n})).actions(self => ({\n  afterCreate() { self.hash = randomHash() }, // eslint-disable-line no-param-reassign\n}))\n","import { getParent, hasParent } from 'mobx-state-tree'\n\nexport default (child, filterFunction = Boolean) => {\n  if (!hasParent(child)) { return null }\n\n  let parent = getParent(child)\n  while (parent) {\n    if (filterFunction(parent)) {\n      return parent\n    }\n\n    if (!hasParent(parent)) { return null }\n    parent = getParent(parent)\n  }\n\n  return null\n}\n","import core from 'mathjs/core'\n\nconst math = core.create()\nmath.import(require('mathjs/lib/expression/function/eval'))\nmath.import(require('mathjs/lib/expression/function/parse'))\nmath.import(require('mathjs/lib/function/arithmetic/add'))\nmath.import(require('mathjs/lib/function/arithmetic/ceil'))\nmath.import(require('mathjs/lib/function/arithmetic/divide'))\nmath.import(require('mathjs/lib/function/arithmetic/floor'))\nmath.import(require('mathjs/lib/function/arithmetic/mod'))\nmath.import(require('mathjs/lib/function/arithmetic/multiply'))\nmath.import(require('mathjs/lib/function/arithmetic/pow'))\nmath.import(require('mathjs/lib/function/arithmetic/round'))\nmath.import(require('mathjs/lib/function/arithmetic/subtract'))\nmath.import(require('mathjs/lib/function/logical'))\nmath.import(require('mathjs/lib/function/statistics/max'))\nmath.import(require('mathjs/lib/function/statistics/mean'))\nmath.import(require('mathjs/lib/function/statistics/min'))\nmath.import(require('mathjs/lib/function/statistics/sum'))\nmath.import(require('mathjs/lib/type/matrix/function/matrix'))\nmath.import(require('mathjs/lib/type/matrix/Matrix'))\nmath.import(require('mathjs/lib/type/matrix/DenseMatrix'))\n\nexport default math\n","import math from '@/utilities/math'\n\nexport default (expression) => {\n  const fns = []\n  const symbols = []\n\n  math.parse(expression).traverse((node) => {\n    if (node.fn) {\n      fns.push(node.fn.name)\n    }\n    if (\n      node.type === 'SymbolNode'\n      && !symbols.includes(node.name)\n      && !fns.includes(node.name)\n    ) {\n      symbols.push(node.name)\n    }\n  })\n  return symbols\n}\n","import math from '@/utilities/math'\nimport toSymbols from '@/utilities/math/toSymbols'\n\nexport default (expression = '', data = {}, options = { defaultSymbolValue: 0 }) => {\n  const safeData = { ...data }\n  toSymbols(expression).forEach((symbol) => {\n    if (typeof safeData[symbol] !== 'number' || Number.isNaN(safeData[symbol])) {\n      safeData[symbol] = options.defaultSymbolValue\n    }\n  })\n\n  return math.eval(expression, safeData)\n}\n","import { types } from 'mobx-state-tree'\nimport ICategorizable from '@/models/generic/ICategorizable'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\nimport findParent from '@/utilities/findParent'\nimport math from '@/utilities/math'\nimport calculate from '@/utilities/math/calculate'\nimport toSymbols from '@/utilities/math/toSymbols'\n\nexport default types.compose(\n  IIdentity,\n  ICategorizable(self => self.modifiedValue()),\n  IEditable,\n  types.model({\n    name: 'New Attribute...',\n    raw: types.optional(types.union(types.number, types.string), 0),\n  }).views(self => ({\n    get character() { return findParent(self, p => p.isCharacter) },\n    get id() {\n      return self.name.split(':').pop()\n        .trim().toLowerCase()\n        .replace(/[^a-z0-9]/ig, '')\n    },\n    get isComputed() { return typeof self.raw === 'string' },\n  })).actions((self) => {\n    let computing = false\n\n    return ({\n      effects() {\n        if (!self.character) return []\n        return self.character.activeEffects().filter(effect => effect.targetId === self.id)\n      },\n      modifiedValue() { return (self.value() || 0) + self.modifier() },\n      modifier() { return math.sum(self.effects().map(effect => effect.modifier)) },\n      modifierText() {\n        return self.effects().map(effect => `${effect.sourceName()}: ${effect.modifier}`).join(', ')\n      },\n      value() {\n        if (!self.isComputed) return self.raw\n        if (self.character === null) return 0\n        if (computing) return 0\n\n        computing = true\n        let computed = 0\n\n        try {\n          const values = toSymbols(self.raw).reduce((all, symbol) => {\n            const attribute = self.character.attributes.findBy('id', symbol)\n            return Object.assign(all, { [symbol]: attribute ? attribute.modifiedValue() : 0 })\n          }, {})\n\n          computed = calculate(self.raw, values)\n        } catch (error) {\n          // eslint-disable-next-line no-undef\n          if (process.env.NODE_ENV !== 'production') {\n            // eslint-disable-next-line no-console\n            console.error(`Error computing: ${self.raw}`)\n          }\n          computed = 0\n        }\n\n        computing = false\n        return computed\n      },\n    })\n  }).preProcessSnapshot(({ value, ...snapshot }) => ({ ...snapshot, raw: value }))\n    .postProcessSnapshot(({ raw, ...snapshot }) => ({ ...snapshot, value: raw }))\n).named('Attribute')\n","import { types } from 'mobx-state-tree'\nimport ICategorizable from '@/models/generic/ICategorizable'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\n\nexport default types.compose(\n  IIdentity,\n  ICategorizable(),\n  IEditable,\n  types.model({\n    name: 'New Descriptor...',\n    value: '',\n  })\n).named('Descriptor')\n","export default (prop, reversed = false) => (objectA, objectB) => {\n  const a = String(objectA instanceof Map ? objectA.get(prop) : objectA[prop])\n  const b = String(objectB instanceof Map ? objectB.get(prop) : objectB[prop])\n\n  if (reversed) return b.localeCompare(a)\n  return a.localeCompare(b)\n}\n","import { isObservableArray } from 'mobx'\nimport { types } from 'mobx-state-tree'\nimport compareBy from '@/utilities/compareBy'\n\nexport default (TYPE, options = {}) => {\n  const TypedArrayWrapper = types.model({\n    values: types.array(TYPE),\n  }).views(self => ({\n    get asArray() { return self.values.slice() },\n    get first() { return self.length ? self.at(0) : undefined },\n    get last() { return self.length ? self.at(self.length - 1) : undefined },\n    get length() { return self.values.length },\n  })).actions(self => ({\n    /* eslint-disable no-param-reassign */\n\n    at: n => self.values[n],\n    clear: () => self.values.clear(),\n    delete: (object) => { self.values.replace(self.values.filter(item => item !== object)) },\n    deleteAt: (index) => { self.values.replace(self.values.filter((_, n) => n !== index)) },\n    every: fn => self.values.every(fn),\n    filter: fn => self.values.filter(fn),\n    find: fn => self.values.find(fn),\n    findBy: (key, value) => self.find(item => item[key] === value),\n    findById: (id) => {\n      if (!TYPE.identifierAttribute) return null\n      return self.find(item => item[TYPE.identifierAttribute] === id) || null\n    },\n    forEach: fn => self.values.forEach(fn),\n    includes: (searchElement, fromIndex) => self.values.includes(searchElement, fromIndex),\n    indexOf: element => self.values.indexOf(element),\n    insert: (object, index) => self.splice(index, 0, object),\n    map: fn => self.values.map(fn),\n    pop: () => self.values.pop(),\n    push: (...values) => self.values.replace([].concat(self.values, values)),\n    reduce: (fn, initial) => self.values.reduce(fn, initial),\n    replace: values => self.values.replace(values),\n    shift: () => self.values.shift(),\n    slice: (start, end) => self.values.slice(start, end),\n    some: fn => self.values.some(fn),\n    sortBy: (property, direction = 'asc') => {\n      if (!['asc', 'desc'].includes(direction)) {\n        throw new TypeError(`direction must be \"asc\" or \"desc\", got: \"${direction}\"`)\n      }\n      const values = self.values.slice().sort(compareBy(property))\n      self.values.replace(direction === 'desc' ? values.reverse() : values)\n      return self\n    },\n    splice: (index, deleteCount, value) => self.values.splice(index, deleteCount, value),\n    toObject: (keyProp, valueProp) => self.values.reduce((object, entry) => {\n      const key = entry[keyProp]\n      const value = valueProp !== undefined ? entry[valueProp] : entry\n      return { ...object, [key]: typeof value === 'function' ? value() : value }\n    }, {}),\n    unshift: (...values) => self.values.replace([].concat(values, self.values)),\n\n    /* eslint-enable no-param-reassign */\n  })).postProcessSnapshot(({ values }) => values)\n\n  return types.custom({\n    ...options,\n    fromSnapshot: (snapshot = []) => TypedArrayWrapper.create({ values: snapshot }),\n    getValidationMessage: (snapshot) => {\n      if (!snapshot) return ''\n      if (isObservableArray(snapshot) || Array.isArray(snapshot)) {\n        if (snapshot.every(f => TYPE.is(f))) return ''\n      }\n\n      return 'Collection types must be assigned an array of values or null'\n    },\n    isTargetType: target => TypedArrayWrapper.is(target),\n    name: options.name || 'Collection',\n  })\n}\n","import { types } from 'mobx-state-tree'\nimport Attribute from '@/models/Attribute'\nimport CollectionOf from '@/models/generic/Collection'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\nimport findParent from '@/utilities/findParent'\n\nexport default types.compose(\n  IIdentity,\n  IEditable,\n  types.model({\n    condition: '',\n    modifier: 0,\n    targetId: '',\n  }).actions(self => ({\n    afterAttach() {\n      if (!self.targetId && self.available().length) {\n        // eslint-disable-next-line no-param-reassign\n        self.targetId = self.available().first.id\n      }\n    },\n\n    available() {\n      const character = self.character()\n      return character ? character.attributes : CollectionOf(Attribute).create([])\n    },\n    character() { return findParent(self, p => p.isCharacter) },\n    isApplicable() {\n      const character = self.character()\n      return Boolean(\n        !self.condition ||\n        (character && character.conditions.includes(self.condition))\n      )\n    },\n    source() { return findParent(self, p => p.name) || null },\n    sourceName() { return self.source() ? self.source().name : 'Unknown' },\n    target() {\n      const character = self.character()\n      return character ? character.attributes.findBy('name', self.targetId) : null\n    },\n  }))\n).named('Effect')\n","import { types } from 'mobx-state-tree'\nimport Effect from '@/models/Effect'\nimport CollectionOf from '@/models/generic/Collection'\nimport ICategorizable from '@/models/generic/ICategorizable'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\n\nexport default types.compose(\n  IIdentity,\n  ICategorizable(),\n  IEditable,\n  types.model({\n    description: '',\n    effects: CollectionOf(Effect),\n    equipped: false,\n    name: 'New Item...',\n  }),\n).named('Item')\n","import { types } from 'mobx-state-tree'\nimport ICategorizable from '@/models/generic/ICategorizable'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\n\nexport default types.compose(\n  IIdentity,\n  ICategorizable(),\n  IEditable,\n  types.model({\n    current: 0,\n    maximum: 10,\n    name: 'New Resource...',\n  })\n).named('Resource')\n","import { types } from 'mobx-state-tree'\nimport ICategorizable from '@/models/generic/ICategorizable'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\n\nexport default types.compose(\n  IIdentity,\n  ICategorizable(self => self.mastery),\n  IEditable,\n  types.model({\n    mastery: 1,\n    name: 'New Skill...',\n    theory: 0,\n  }).views(self => ({\n    get isComplex() { return self.theory !== 0 },\n    get isSimple() { return self.theory === 0 },\n  }))\n).named('Skill')\n","import { types } from 'mobx-state-tree'\nimport CollectionOf from '@/models/generic/Collection'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\nimport Resource from '@/models/Resource'\nimport findParent from '@/utilities/findParent'\n\nexport default types.compose(\n  IIdentity,\n  IEditable,\n  types.model({\n    amount: 0,\n    resourceName: '',\n  }).views(self => ({\n    get available() {\n      return self.character ? self.character.resources : CollectionOf(Resource).create([])\n    },\n    get character() { return findParent(self, p => p.isCharacter) },\n  })).actions(self => ({\n    afterAttach() {\n      if (!self.resourceName && self.available.length) {\n        // eslint-disable-next-line no-param-reassign\n        self.resourceName = self.available.first.name\n      }\n    },\n    resource() {\n      if (!self.character) return null\n      return self.character.resources.findBy('name', self.resourceName)\n    },\n  }))\n).named('Cost')\n","import { types } from 'mobx-state-tree'\nimport Effect from '@/models/Effect'\nimport CollectionOf from '@/models/generic/Collection'\nimport ICategorizable from '@/models/generic/ICategorizable'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\nimport ResourceCost from '@/models/ResourceCost'\nimport findParent from '@/utilities/findParent'\n\nexport default types.compose(\n  IIdentity,\n  ICategorizable(self => self.level),\n  IEditable,\n  types.model({\n    costs: CollectionOf(ResourceCost), // Resources\n    description: '',\n    effects: CollectionOf(Effect),\n    isActive: false,\n    level: 0,\n    name: 'New Spell...',\n  }).views(self => ({\n    get character() { return findParent(self, p => p.isCharacter) },\n  })).actions(self => ({\n    cast() {\n      if (self.isAffordable()) {\n        self.costs.forEach((cost) => {\n          const resource = cost.resource()\n          resource.set({ current: resource.current - cost.amount })\n        })\n      }\n    },\n    isAffordable() {\n      if (!self.character || !self.costs.length) return true\n      return self.costs.every(cost => (\n        cost.resource() && cost.resource().current >= cost.amount\n      ))\n    },\n  }))\n).named('Spell')\n","import { types } from 'mobx-state-tree'\nimport Effect from '@/models/Effect'\nimport CollectionOf from '@/models/generic/Collection'\nimport ICategorizable from '@/models/generic/ICategorizable'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\n\nexport default types.compose(\n  IIdentity,\n  ICategorizable(self => self.value),\n  IEditable,\n  types.model('Trait', {\n    effects: CollectionOf(Effect),\n    name: 'New Trait...',\n    value: 0,\n  })\n).named('Trait')\n","export default function flatten(array, depth = Infinity) {\n  if (!array || !Array.isArray(array)) {\n    throw new TypeError(`cannot flatten non-Array value ${JSON.stringify(array)}`)\n  }\n\n  return array.reduce((all, next) => {\n    if (depth > 1 && next && Array.isArray(next)) {\n      return all.concat(flatten(next, depth - 1))\n    }\n\n    return all.concat(next)\n  }, [])\n}\n","import { types } from 'mobx-state-tree'\nimport Attribute from '@/models/Attribute'\nimport Descriptor from '@/models/Descriptor'\nimport CollectionOf from '@/models/generic/Collection'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\nimport Item from '@/models/Item'\nimport Resource from '@/models/Resource'\nimport Skill from '@/models/Skill'\nimport Spell from '@/models/Spell'\nimport Trait from '@/models/Trait'\nimport flatten from '@/utilities/flatten'\n\nexport default types.compose(\n  IIdentity,\n  IEditable,\n  types.model({\n    attributes: CollectionOf(Attribute),\n    conditions: CollectionOf(types.string), // ['vs Goblins', 'Crinos Form']\n    descriptors: CollectionOf(Descriptor),\n    experience: 0,\n    items: CollectionOf(Item), // equipped / unequipped, have Effects\n    resources: CollectionOf(Resource),\n    skills: CollectionOf(Skill),\n    spells: CollectionOf(Spell),\n    traits: CollectionOf(Trait), // have Effects\n  }).volatile(() => ({\n    isCharacter: true,\n  })).actions(self => ({\n    activeEffects() {\n      return self.effects().filter(effect => effect && effect.isApplicable())\n    },\n    availableConditions() {\n      return self.effects()\n        .map(e => e.condition).concat(self.conditions.asArray)\n        .sort()\n        .filter((effect, i, all) => !i || effect !== all[i - 1])\n        .filter(Boolean)\n    },\n    effects() {\n      return flatten([\n        // Trait Effects first, because they're inherent\n        self.traits.filter(Boolean).map(trait => trait.effects.values),\n        // Direct Effects second, because they're cast on the character\n        self.spells.filter(spell => spell.isActive).map(spell => spell.effects.values),\n        // Item Effects third, because they're indirect\n        self.items.filter(item => item.equipped).map(item => item.effects.values),\n      ]).filter(Boolean)\n    },\n  }))\n).named('Character')\n","import { types } from 'mobx-state-tree'\n\nexport default (min, max, defaultTo = min) => (\n  types.optional(\n    types.refinement(\n      types.number,\n      n => n === undefined || (n >= min && n <= max)\n    ),\n    defaultTo\n  )\n)\n","import { types } from 'mobx-state-tree'\nimport CollectionOf from '@/models/generic/Collection'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\nimport between from '@/models/types/between'\n\nconst Layout = types.compose(\n  IIdentity,\n  IEditable,\n  types.model({\n    categorize: false,\n    children: CollectionOf(types.late(() => Layout)),\n    colSpan: between(1, 4, 1),\n    columns: between(1, 4, 1),\n    filter: types.maybe(types.string),\n    sortOption: types.maybe(types.number),\n    title: types.union(types.maybe(types.string), types.literal(false)),\n    type: types.maybe(types.string),\n  })\n).named('Layout')\n\nexport default Layout\n","export default (value, { min, max }) => {\n  if (min !== undefined && value < min) return min\n  if (max !== undefined && value > max) return max\n  return value\n}\n","import React from 'react'\nimport bound from '@/utilities/bound'\nimport noop from '@/utilities/noop'\nimport './Editable.scss'\n\nconst TYPES = [\n  // Strings\n  'text', 'multiline',\n  // Checkboxes\n  'boolean',\n  // Numbers\n  'number', 'slider',\n]\n\nexport default class Editable extends React.Component {\n  static displayName = 'Editable'\n\n  static defaultProps = {\n    className: '',\n    forceEditMode: false,\n    max: undefined,\n    min: undefined,\n    onChange: noop,\n    onEditEnd: noop,\n    onEditStart: noop,\n    onKeyDown: noop,\n    onKeyPress: noop,\n    onKeyUp: noop,\n    placeholder: '',\n    readOnly: false,\n    readOnlyValue: undefined,\n    step: 1,\n    type: undefined,\n    value: '',\n  }\n\n  state = {\n    editing: false,\n    resetValue: this.props.value,\n  }\n\n  get editing() {\n    return this.props.forceEditMode || this.state.editing\n  }\n\n  getEditorType = () => {\n    const { value } = this.props\n    let { type } = this.props\n\n    if (type !== undefined && TYPES.includes(type)) { return type }\n\n    type = typeof value\n    if (type === 'string') { return value.includes('\\n') ? 'multiline' : 'text' }\n    if (['boolean', 'number'].includes(type)) { return type }\n\n    return 'text'\n  }\n\n  resetChanges = () => {\n    this.props.onChange(this.state.resetValue, this.props.value)\n    this.handleToggleEditing()\n  }\n\n  createRefWithAutoFocus = (editor) => {\n    if (!editor) { return }\n    this.editor = editor\n\n    const editorType = this.getEditorType()\n    if (editorType !== 'boolean' && typeof editor.focus === 'function') { editor.focus() }\n\n    if (['boolean', 'number'].includes(this.getEditorType())) { return }\n    if (this.props.forceEditMode && typeof editor.setSelectionRange === 'function') {\n      editor.setSelectionRange(editor.value.length, editor.value.length)\n    }\n  }\n\n  handleChange = ({ target }) => {\n    const { min, max } = this.props\n    let { value } = target\n\n    // eslint-disable-next-line default-case\n    switch (this.getEditorType()) {\n      case 'slider':\n      case 'number':\n        value = parseFloat(value || 0)\n        // eslint-disable-next-line prefer-destructuring\n        if (Number.isNaN(value)) { value = this.props.value }\n        value = bound(value, { max, min })\n    }\n    this.props.onChange(value, this.state.resetValue)\n  }\n\n  handleKeys = (event) => {\n    const { target, key, ctrlKey, metaKey } = event\n\n    if (this.props.onKeyDown !== noop) {\n      this.props.onKeyDown(event)\n      if (event.isDefaultPrevented()) return\n    }\n\n    if (key === 'Escape') { this.resetChanges() }\n    if (key === 'Enter') {\n      if (target.nodeName !== 'TEXTAREA' || ctrlKey || metaKey) {\n        this.handleToggleEditing()\n      }\n    }\n  }\n\n  handleReceivingFocus = () => {\n    if (this.props.readOnly) { return }\n    if (!this.state.editing) { this.handleToggleEditing() }\n  }\n\n  handleToggleEditing = () => {\n    if (this.props.readOnly) { return }\n\n    const editing = !this.editing\n\n    this.setState({ editing, resetValue: this.props.value }, () => {\n      if (this.state.editing) {\n        this.props.onEditStart()\n      } else {\n        this.props.onEditEnd()\n      }\n    })\n  }\n\n  selectOnFocus = event => event.target.select()\n\n  toggleBoolean = () => {\n    this.props.onEditStart()\n    this.props.onChange(!this.props.value, this.props.value)\n    this.props.onEditEnd()\n  }\n\n  renderBoolean = () => (\n    <input\n      type=\"checkbox\"\n      checked={Boolean(this.props.value)}\n      disabled={this.props.readOnly}\n      onChange={this.toggleBoolean}\n      ref={this.createRefWithAutoFocus}\n    />\n  )\n\n  renderMultiline = () => {\n    if (!this.editing) {\n      const lines = (this.props.value || this.props.placeholder).split('\\n')\n      const paragraphs = lines.map((line, index) => <p key={index}>{line}</p>\n      )\n      const className = ['multiline', this.props.value ? '' : 'placeholder'].join(' ').trim()\n      return <div className={className} onClick={this.handleToggleEditing}>{paragraphs}</div>\n    }\n\n    return (\n      <textarea\n        disabled={this.props.readOnly}\n        onBlur={this.handleToggleEditing}\n        onChange={this.handleChange}\n        onFocus={this.selectOnFocus}\n        onKeyDown={this.handleKeys}\n        onKeyPress={this.props.onKeyPress}\n        onKeyUp={this.props.onKeyUp}\n        placeholder={this.props.placeholder}\n        ref={this.createRefWithAutoFocus}\n        rows={this.props.value.split('\\n').length}\n        value={this.props.value}\n      />\n    )\n  }\n\n  renderNumber = () => {\n    if (!this.editing) { return this.renderStatic() }\n\n    return (\n      <input\n        type=\"number\"\n        disabled={this.props.readOnly}\n        max={this.props.max}\n        min={this.props.min}\n        onBlur={this.handleToggleEditing}\n        onChange={this.handleChange}\n        onFocus={this.selectOnFocus}\n        onKeyDown={this.handleKeys}\n        onKeyPress={this.props.onKeyPress}\n        onKeyUp={this.props.onKeyUp}\n        placeholder={this.props.placeholder}\n        ref={this.createRefWithAutoFocus}\n        step={this.props.step}\n        value={this.props.value}\n      />\n    )\n  }\n\n  renderSlider = () => (\n    <input\n      type=\"range\"\n      disabled={this.props.readOnly}\n      max={this.props.max}\n      min={this.props.min}\n      onBlur={this.handleToggleEditing}\n      onChange={this.handleChange}\n      onKeyDown={this.props.onKeyDown}\n      onKeyPress={this.props.onKeyPress}\n      onKeyUp={this.props.onKeyUp}\n      ref={this.createRefWithAutoFocus}\n      step={this.props.step}\n      value={this.props.value}\n    />\n  )\n\n  renderText = () => {\n    if (!this.editing) { return this.renderStatic() }\n\n    return (\n      <input\n        type=\"text\"\n        disabled={this.props.readOnly}\n        onBlur={this.handleToggleEditing}\n        onChange={this.handleChange}\n        onFocus={this.selectOnFocus}\n        onKeyDown={this.handleKeys}\n        onKeyPress={this.props.onKeyPress}\n        onKeyUp={this.props.onKeyUp}\n        placeholder={this.props.placeholder}\n        ref={this.createRefWithAutoFocus}\n        value={this.props.value}\n      />\n    )\n  }\n\n  renderStatic = () => {\n    const { placeholder, readOnlyValue, value } = this.props\n    const showPlaceholder = placeholder && !value\n    const displayValue = readOnlyValue !== undefined ? readOnlyValue : value\n    const className = showPlaceholder ? 'placeholder' : ''\n    return (\n      <span className={className} onClick={this.handleToggleEditing}>\n        {showPlaceholder ? placeholder : displayValue}\n      </span>\n    )\n  }\n\n  renderEditor = () => {\n    switch (this.getEditorType()) {\n      case 'boolean':\n        return this.renderBoolean()\n      case 'slider':\n        return this.renderSlider()\n      case 'multiline':\n        return this.renderMultiline()\n      case 'number':\n        return this.renderNumber()\n      default:\n        return this.renderText()\n    }\n  }\n\n  render = () => {\n    const { className, readOnly } = this.props\n\n    const classes = [\n      'editable',\n      this.editing ? 'editing' : '',\n      className || '',\n      readOnly ? 'readonly' : '',\n    ].filter(Boolean)\n\n    let props = {}\n    if (!readOnly && !this.editing) {\n      props = { onFocus: this.handleReceivingFocus, tabIndex: '0' }\n    }\n\n    return (\n      <div className={classes.join(' ')} {...props}>\n        {this.renderEditor()}\n      </div>\n    )\n  }\n}\n","export default (start, end) => {\n  if (\n    typeof start !== 'number' || typeof end !== 'number' ||\n    Math.round(start) !== start || Math.round(end) !== end\n  ) {\n    throw new TypeError('range(start, end) requires integer values for both start and end')\n  }\n\n  const step = (start <= end) ? 1 : -1\n  const length = Math.floor(Math.abs(end - start) / Math.abs(step)) + 1\n  return Array(...Array(length)).map((_, i) => start + (i * step))\n}\n","import React, { Component } from 'react'\nimport bound from '@/utilities/bound'\nimport math from '@/utilities/math'\nimport noop from '@/utilities/noop'\nimport range from '@/utilities/range'\nimport './Rating.scss'\n\nexport default class Rating extends Component {\n  static defaultProps = {\n    allowExcess: false,\n    current: 0,\n    iconExcess: <span className=\"dot excess icon-add\" />,\n    iconOff: <span className=\"dot empty\" />,\n    iconOn: <span className=\"dot filled\" />,\n    maximum: 5,\n    onChange: noop,\n  }\n\n  handleIconClick = (event) => {\n    const number = parseInt(event.target.getAttribute('data-number'), 10)\n    this.props.onChange(number === this.props.current ? number - 1 : number)\n  }\n\n  render = () => {\n    const { allowExcess, current, iconExcess, iconOff, iconOn, maximum } = this.props\n    const total = allowExcess ? math.max(current, maximum) : maximum\n\n    return (\n      <div className=\"rating\">\n        {(total > 0 || (allowExcess && current > 0))\n          ? range(1, Math.ceil(bound(total, { min: 1 }))).map(number => (\n            <span data-number={number} key={number} onClick={this.handleIconClick} title={number}>\n              {(number <= current && number <= maximum) && iconOn}\n              {(number > current && number <= maximum) && iconOff}\n              {(number > maximum) && iconExcess}\n            </span>\n          ))\n          : null\n        }\n      </div>\n    )\n  }\n}\n","import { observer } from 'mobx-react'\nimport { onSnapshot } from 'mobx-state-tree'\nimport React, { Component } from 'react'\nimport Editable from '@/components/Editable'\nimport Rating from '@/components/Rating'\nimport bound from '@/utilities/bound'\nimport math from '@/utilities/math'\nimport noop from '@/utilities/noop'\nimport './Attribute.scss'\n\n@observer class Attribute extends Component {\n  static defaultProps = {\n    model: {},\n    onDelete: noop,\n    rating: false,\n  }\n\n  static sortOptions = [{\n    display: 'icon-sort-name-asc',\n    getter: model => model.name,\n  }, {\n    display: 'icon-sort-value-asc',\n    getter: model => model.modifiedValue(),\n  }]\n\n  CACHE = {}\n\n  componentDidMount() {\n    this.onSnapshotDisposer = onSnapshot(this.props.model.character, this.handleSnapshot)\n  }\n  componentWillUnmount() { this.onSnapshotDisposer() }\n\n  handleSnapshot = (snapshot) => {\n    const effects = this.props.model.effects().map(e => e.toJSON())\n    if (\n      JSON.stringify(effects) !== JSON.stringify(this.CACHE.effects) ||\n      JSON.stringify(snapshot.conditions) !== this.CACHE.conditions ||\n      this.CACHE.value !== this.props.model.value()\n    ) {\n      this.CACHE.conditions = JSON.stringify(snapshot.conditions)\n      this.CACHE.effects = effects\n      this.CACHE.value = this.props.model.value()\n      this.forceUpdate()\n    }\n  }\n  handleChangeName = (name) => {\n    const { id } = this.props.model\n    this.props.model.set({ name })\n    this.props.model.character.effects()\n      .filter(effect => effect.targetId === id)\n      .forEach((effect) => {\n        effect.set({ targetId: '' })\n        effect.set({ targetId: this.props.model.id })\n      })\n  }\n  handleCommitName = () => (this.props.model.name === '' && this.props.onDelete(this.props.model))\n  handleChangeValue = (raw) => {\n    let value = String(raw).replace(/[^a-z0-9+*()\\-/, ]/gi, '')\n    if (!Number.isNaN(Number(raw))) {\n      value = bound(Number(raw) || '', { max: 999, min: -99 })\n    }\n    this.props.model.set({ raw: value })\n  }\n  handleCommitValue = () => {\n    if (String(this.props.model.raw) === '') this.props.model.set({ raw: 0 })\n  }\n  handleValueKeyDown = ({ key }) => {\n    const { model } = this.props\n    if (model.isComputed) return\n\n    switch (key) {\n      case 'ArrowUp':\n        model.set({ raw: model.value() + 1 }); break\n      case 'ArrowDown':\n        model.set({ raw: model.value() - 1 }); break\n      default:\n    }\n  }\n\n  render() {\n    const { model, rating } = this.props\n    const modifiedValue = model.modifiedValue()\n    const value = model.value()\n\n    const className = [\n      'attribute',\n      `as-${rating ? 'rating' : 'numeric'}`,\n      `${model.isComputed ? 'is' : 'not'}-computed`,\n    ].join(' ')\n\n    const modifier = model.modifier()\n    const modifierClassName = [\n      'modifier',\n      modifier > 0 && 'positive',\n      modifier < 0 && 'negative',\n      modifier === 0 && 'zero',\n    ].filter(Boolean).join(' ')\n\n    return (\n      <div className={className}>\n        <Editable\n          className=\"name\"\n          onChange={this.handleChangeName}\n          onEditEnd={this.handleCommitName}\n          value={model.name}\n        />\n        <Editable\n          className=\"value rating\"\n          onChange={this.handleChangeValue}\n          onEditEnd={this.handleCommitValue}\n          onKeyDown={this.handleValueKeyDown}\n          readOnlyValue={(\n            <Rating\n              allowExcess\n              current={modifiedValue}\n              maximum={value}\n            />\n          )}\n          type=\"text\"\n          value={model.raw}\n        />\n        <Editable\n          className=\"value numeric\"\n          onChange={this.handleChangeValue}\n          onEditEnd={this.handleCommitValue}\n          onKeyDown={this.handleValueKeyDown}\n          readOnlyValue={value}\n          type=\"text\"\n          value={model.raw}\n        />\n        {model.effects().length !== 0 && (\n          <div\n            className={modifierClassName}\n            title={model.modifierText()}\n          >\n            {modifiedValue}\n          </div>\n        )}\n      </div>\n    )\n  }\n}\n\nexport default Attribute\n","import { observer } from 'mobx-react'\nimport React, { Component } from 'react'\nimport Editable from '@/components/Editable'\nimport noop from '@/utilities/noop'\nimport './Descriptor.scss'\n\n@observer class Descriptor extends Component {\n  static defaultProps = {\n    model: {},\n    onDelete: noop,\n  }\n\n  static sortOptions = [{\n    display: 'icon-sort-name-asc',\n    getter: model => model.name,\n  }, {\n    display: 'icon-sort-value-asc',\n    getter: model => model.value,\n  }]\n\n  handleChangeName = name => this.props.model.set({ name })\n  handleChangeValue = value => this.props.model.set({ value })\n  handleCommitName = () => (this.props.model.name === '' && this.props.onDelete(this.props.model))\n\n  render() {\n    return (\n      <div className=\"descriptor\">\n        <Editable\n          className=\"name\"\n          onChange={this.handleChangeName}\n          onEditEnd={this.handleCommitName}\n          value={this.props.model.name}\n        />\n        <Editable\n          className=\"value\"\n          type=\"text\"\n          onChange={this.handleChangeValue}\n          value={this.props.model.value}\n        />\n      </div>\n    )\n  }\n}\n\nexport default Descriptor\n","import { observer } from 'mobx-react'\nimport React, { Component } from 'react'\nimport Editable from '@/components/Editable'\nimport './Effect.scss'\n\n@observer class Effect extends Component {\n  static defaultProps = {\n    model: {},\n  }\n\n  static sortOptions = [{\n    display: 'icon-sort-name-asc',\n    getter: model => [!model.targetId, model.targetId],\n  }, {\n    display: 'icon-sort-value-asc',\n    getter: model => [!model.condition, model.modifier],\n  }]\n\n  handleChangeCondition = condition => this.props.model.set({ condition })\n  handleChangeModifier = modifier => this.props.model.set({ modifier })\n  handleChangeTarget = ({ target: { value } }) => this.props.model.set({ targetId: value })\n\n  render() {\n    const { available, condition = '', isApplicable, modifier, targetId } = this.props.model\n\n    return (\n      <div className={`effect ${isApplicable ? 'applicable' : ''}`.trim()}>\n        <select className=\"target\" value={targetId} onChange={this.handleChangeTarget}>\n          {available().map(({ hash, id, name }) => (\n            <option key={hash} value={id}>{name}</option>\n          ))}\n        </select>\n        <Editable\n          className=\"modifier\"\n          max={999}\n          min={-99}\n          onChange={this.handleChangeModifier}\n          value={modifier}\n        />\n        <Editable\n          className=\"condition\"\n          onChange={this.handleChangeCondition}\n          placeholder=\"Any\"\n          value={condition}\n        />\n      </div>\n    )\n  }\n}\n\nexport default Effect\n","import React, { Component, Fragment } from 'react'\nimport { createPortal } from 'react-dom'\nimport noop from '@/utilities/noop'\nimport './Expandable.scss'\n\nexport default class Expandable extends Component {\n  static defaultProps = {\n    expandByDefault: false,\n    omitItemWrapper: false,\n    onToggle: noop,\n    toggleButtonParent: null,\n    toggleButtonText: '',\n  }\n\n  state = {\n    expanded: false,\n  }\n\n  expander = React.createRef()\n\n  componentWillMount() {\n    this.setState({ expanded: this.props.expandByDefault })\n  }\n  componentDidMount() {\n    this.expander.current.parentElement.classList.add('expandable-wrapper')\n  }\n\n  handleToggle = () => {\n    const { classList } = this.expander.current.parentElement\n    const { expanded } = this.state\n\n    // eslint-disable-next-line react/no-access-state-in-setstate\n    this.setState({ expanded: !expanded }, () => {\n      this.props.onToggle(!expanded)\n      classList[!expanded ? 'add' : 'remove']('expanded')\n    })\n  }\n\n  renderExpanded = () => {\n    const { children, omitItemWrapper } = this.props\n    return omitItemWrapper\n      ? children\n      : <div className=\"expandable\"> {children}</div>\n  }\n\n  render() {\n    const { toggleButtonParent, toggleButtonText } = this.props\n    const toggleState = this.state.expanded ? 'expanded' : 'collapsed'\n    const buttonProps = {\n      className: `expandable-toggle icon-${toggleState}`,\n      onClick: this.handleToggle,\n      ref: this.expander,\n    }\n\n    const toggleButton = <div {...buttonProps} text={toggleButtonText} />\n    return (\n      <Fragment>\n        {toggleButtonParent ? createPortal(toggleButton, toggleButtonParent) : toggleButton}\n        {this.state.expanded && this.renderExpanded()}\n      </Fragment>\n    )\n  }\n}\n","import React, { Component } from 'react'\nimport noop from '@/utilities/noop'\nimport './MultiToggle.scss'\n\nexport default class MultiToggle extends Component {\n  static defaultProps = {\n    className: '',\n    onChange: noop,\n    options: [],\n    selected: undefined,\n  }\n\n  state = { selected: null }\n\n  handleOptionClick = ({ target }) => {\n    const index = [...target.parentElement.children].indexOf(target)\n    const selected = this.props.options[index]\n\n    if (this.props.selected !== undefined) {\n      this.props.onChange(selected)\n    } else {\n      this.setState({ selected })\n    }\n  }\n\n  render() {\n    const { className, options } = this.props\n    const selected = this.props.selected !== undefined\n      ? this.props.selected\n      : this.state.selected\n\n    return (\n      <div className={`multi-toggle ${className}`.trim()}>\n        {options.map((option, key) => (\n          <div\n            className={`toggle ${option === selected ? 'on' : 'off'}`.trim()}\n            key={key}\n            onClick={this.handleOptionClick}\n          >\n            {option.display}\n          </div>\n        ))}\n      </div>\n    )\n  }\n}\n","export default function debounce(func, wait, immediate) {\n  let timeout\n\n  return (...args) => {\n    const later = () => {\n      timeout = null\n      if (!immediate) func.apply(this, args)\n    }\n\n    const callNow = immediate && !timeout\n    clearTimeout(timeout)\n    timeout = setTimeout(later, wait)\n    if (callNow) func.apply(this, args)\n  }\n}\n","import { onSnapshot } from 'mobx-state-tree'\nimport React from 'react'\nimport Sortable from 'sortablejs'\nimport MultiToggle from '@/components/MultiToggle'\nimport CollectionOf from '@/models/generic/Collection'\nimport debounce from '@/utilities/debounce'\nimport noop from '@/utilities/noop'\nimport unique from '@/utilities/unique'\nimport './List.scss'\n\nconst NO_CATEGORY = 'Uncategorized'\n\nconst buildSorter = (getter, reversed = false) => (A, B) => {\n  const a = getter(A)\n  const b = getter(B)\n\n  if (Array.isArray(a) && Array.isArray(b)) {\n    for (let i = 0; i < a.length; i += 1) {\n      if (a[i] !== b[i]) {\n        if (reversed) return b[i] < a[i] ? -1 : 1\n        return a[i] < b[i] ? -1 : 1\n      }\n    }\n\n    return 0\n  }\n\n  if (typeof a === 'number' && typeof b === 'number') {\n    if (a === b) return 0\n    if (reversed) return b < a ? -1 : 1\n    return a < b ? -1 : 1\n  }\n\n  const aString = String(a)\n  const bString = String(b)\n\n  if (reversed) return bString.localeCompare(aString)\n  return aString.localeCompare(bString)\n}\n\nexport default (Model, Component, props = {}) => {\n  const sortOptions = (Component.sortOptions || []).map(sorter => ({\n    ...sorter,\n    comparitor: buildSorter(sorter.getter),\n    display: typeof sorter.display === 'string'\n      ? <span className={sorter.display} />\n      : sorter.display,\n  }))\n\n  return class List extends React.Component {\n    static defaultProps = {\n      className: '',\n      collection: CollectionOf(Model).create([]),\n      columns: 1,\n      layout: undefined,\n      sortable: true,\n      title: props.title || '',\n      ...props,\n    }\n\n    Component = Component\n    Model = Model\n\n    container = React.createRef()\n    expandedItems = {}\n    filterEl = React.createRef()\n    onDataSnapshotDisposer = noop\n    onLayoutSnapshotDisposer = noop\n    sortable = null\n    state = {\n      expanded: {},\n      sortOption: null,\n    }\n\n    componentDidMount() {\n      if (this.props.layout) {\n        const { sortOption: sortOptionIndex } = this.props.layout\n        if (sortOptions.length && sortOptionIndex !== undefined) {\n          this.setState({ sortOption: sortOptions[sortOptionIndex] || null })\n        }\n        this.onLayoutSnapshotDisposer = onSnapshot(this.props.layout,\n          debounce(() => this.forceUpdate(), 100, true)\n        )\n      }\n\n      const { sortable } = this.props\n      if (sortable) {\n        this.sortable = Sortable.create(this.container.current, {\n          disabled: !sortable,\n          draggable: '.list-item-wrapper',\n          handle: '.drag-handle',\n          onEnd: () => {\n            this.container.current.classList.remove('dragging')\n            this.props.collection.replace(\n              [...this.container.current.querySelectorAll('.list-item-wrapper')]\n                .map(item => parseInt(item.getAttribute('data-index'), 10))\n                .map(targetIndex => this.props.collection.at(targetIndex))\n            )\n          },\n          onStart: () => this.container.current.classList.add('dragging'),\n        })\n      }\n      this.onDataSnapshotDisposer = onSnapshot(this.props.collection, () => this.forceUpdate())\n    }\n    componentWillReceiveProps() {\n      if (this.sortable) this.sortable.option('disabled', !this.props.sortable)\n    }\n    componentWillUnmount() {\n      if (this.sortable) this.sortable.destroy()\n      this.onDataSnapshotDisposer()\n      this.onLayoutSnapshotDisposer()\n    }\n\n    get categories() {\n      const list = this.props.collection.asArray.reduce((all, next) => (\n        all.concat(next.categories || [])\n      ), [])\n\n\n      if (!list.length) return []\n      return unique(list.filter(item => item !== NO_CATEGORY)).sort().concat(NO_CATEGORY)\n    }\n\n    getCategoryItems = (items, category) => (\n      (category && category !== NO_CATEGORY)\n        ? items.filter(item => (item.categories || []).includes(category))\n        : items.filter(item => (item.categories || []).length === 0)\n    )\n\n    handleAdd = () => {\n      this.props.collection.push(Model.create({}))\n      this.forceUpdate()\n    }\n    handleDelete = ({ target }) => {\n      const index = parseInt(target.parentNode.getAttribute('data-index'), 10)\n      this.props.collection.deleteAt(index)\n      this.forceUpdate()\n    }\n    handleFilterChange = ({ target }) => this.props.layout.set({ filter: target.value })\n    handleSort = () => this.props.collection.sortBy('name')\n    handleSortChange = (clicked) => {\n      const { sortOption: current } = this.state\n      this.setState({ sortOption: current === clicked ? null : clicked }, () => {\n        this.props.layout.set({\n          sortOption: current === clicked ? undefined : sortOptions.indexOf(clicked),\n        })\n      })\n    }\n    handleToggleCategorized = () => {\n      this.props.layout.set({ categorize: !this.props.layout.categorize })\n    }\n    handleToggleExpanded = (hash, expanded) => {\n      this.setState(state => ({\n        ...state,\n        expanded: { ...state.expanded, [hash]: expanded },\n      }))\n    }\n\n    renderCategoryWidget = () => {\n      const { layout } = this.props\n      const { categories } = this\n      if (!categories.length) return null\n\n      const className = [\n        'categorize icon-categorize',\n        layout.categorize ? 'on' : 'off',\n      ].join(' ')\n\n      return <>\n        <div {...{ className }} onClick={this.handleToggleCategorized} />\n        <select\n          className=\"filter\"\n          onChange={this.handleFilterChange}\n          ref={this.filterEl}\n          tabIndex={-1}\n          value={layout.filter}\n        >\n          <option value=\"\">All</option>\n          {categories.map(name => <option key={name} value={name}>{name}</option>)}\n        </select>\n      </>\n    }\n    renderSortWidget = () => {\n      if (!this.props.sortable) return null\n      if (!sortOptions.length) return null\n\n      return (\n        <MultiToggle\n          className=\"sorter\"\n          onChange={this.handleSortChange}\n          options={sortOptions}\n          selected={this.state.sortOption}\n        />\n      )\n    }\n    renderCategory = (category, data) => {\n      const { columns } = this.props\n      const categoryItems = this.getCategoryItems(data, category)\n      if (!categoryItems.length) return null\n\n      const values = categoryItems.map(item => item.categoryValue)\n      const min = Math.min(...values)\n      const max = Math.max(...values)\n\n      return (\n        <div key={category} className=\"category\">\n          <div className=\"details\">\n            <div className=\"title\">Category: {category} ({categoryItems.length})</div>\n            {(!Number.isNaN(min) && !Number.isNaN(max)) && (\n              <div className=\"range\">{min}-{max}</div>\n            )}\n          </div>\n          <div className=\"category-items\" style={{ columns }}>\n            {categoryItems.map(this.renderItem)}\n          </div>\n        </div>\n      )\n    }\n    renderItem = (model) => {\n      const { collection, layout, sortable } = this.props\n      const { expanded, sortOption } = this.state\n      const sorted = sortable && sortOption !== null\n      const categorized = layout && layout.categorize\n\n      return (\n        <div\n          className={`list-item-wrapper ${expanded[model.hash] ? 'expanded' : ''}`.trim()}\n          data-index={collection.indexOf(model)}\n          key={model.hash}\n        >\n          {(!sorted && !categorized) && <div className=\"drag-handle\" />}\n          <Component\n            model={model}\n            onDelete={collection.delete}\n            onToggleExpanded={this.handleToggleExpanded}\n          />\n          <button className=\"icon-remove\" onClick={this.handleDelete} />\n        </div>\n      )\n    }\n\n    render() {\n      const { className = '', columns, layout = {}, title } = this.props\n      const { sortOption } = this.state\n      let { categories } = this\n      let data = this.props.collection.asArray\n      if (sortOption !== null) data = data.sort(sortOption.comparitor)\n\n      const hasCategories = Boolean(categories.length)\n      if (hasCategories && layout.filter) {\n        data = this.getCategoryItems(data, layout.filter)\n        categories = [layout.filter]\n      }\n      const listStyle = {\n        columns: layout.categorize ? 1 : columns,\n      }\n\n      return (\n        <div className={`list ${className}`.trim()} ref={this.container} style={listStyle}>\n          <div className=\"title-bar\">\n            {this.renderSortWidget()}\n            {this.renderCategoryWidget()}\n            <div className=\"text\">{title}</div>\n            <button className=\"add icon-add\" onClick={this.handleAdd} />\n          </div>\n          {(hasCategories && layout.categorize)\n            ? categories.map(category => this.renderCategory(category, data))\n            : data.map(this.renderItem)\n          }\n        </div>\n      )\n    }\n  }\n}\n","import { observer } from 'mobx-react'\nimport React, { Component } from 'react'\nimport Editable from '@/components/Editable'\nimport Effect from '@/components/Effect'\nimport Expandable from '@/components/Expandable'\nimport ListOf from '@/components/List'\nimport EffectModel from '@/models/Effect'\nimport noop from '@/utilities/noop'\nimport './Item.scss'\n\nconst EffectList = ListOf(EffectModel, Effect, { className: 'effect-list' })\n\n@observer class Item extends Component {\n  static defaultProps = {\n    model: {},\n    onDelete: noop,\n    onToggleExpanded: noop,\n  }\n\n  static sortOptions = [{\n    display: 'icon-sort-name-asc',\n    getter: model => model.name,\n  }, {\n    display: 'icon-backpack',\n    getter: model => [!model.equipped, model.name],\n  }]\n\n  handleChangeDescription = description => this.props.model.set({ description })\n  handleChangeName = name => this.props.model.set({ name })\n  handleCommitName = () => (this.props.model.name === '' && this.props.onDelete(this.props.model))\n  handleToggleEquipped = () => this.props.model.set({ equipped: !this.props.model.equipped })\n\n  render() {\n    const { description, hash, name, effects, equipped } = this.props.model\n\n    return (\n      <div className={`item ${equipped ? '' : 'un'}equipped`}>\n        <Editable className=\"equipped\" onChange={this.handleToggleEquipped} value={equipped} />\n        <Editable\n          className=\"name\"\n          onChange={this.handleChangeName}\n          onEditEnd={this.handleCommitName}\n          value={name}\n        />\n        <Expandable onToggle={expanded => this.props.onToggleExpanded(hash, expanded)}>\n          <Editable\n            className=\"description\"\n            type=\"multiline\"\n            onChange={this.handleChangeDescription}\n            placeholder=\"Description...\"\n            value={description}\n          />\n          <EffectList collection={effects} title=\"Effects\" />\n        </Expandable>\n      </div>\n    )\n  }\n}\n\nexport default Item\n","import { observer } from 'mobx-react'\nimport React, { Component } from 'react'\nimport Editable from '@/components/Editable'\nimport Rating from '@/components/Rating'\nimport noop from '@/utilities/noop'\nimport './Resource.scss'\n\n@observer class Resource extends Component {\n  static defaultProps = {\n    model: {},\n    onDelete: noop,\n  }\n\n  static sortOptions = [{\n    display: 'icon-sort-name-asc',\n    getter: model => model.name,\n  }]\n\n  handleChangeCurrent = current => this.props.model.set({ current })\n  handleChangeMaximum = maximum => this.props.model.set({ maximum })\n  handleChangeName = name => this.props.model.set({ name })\n  handleCommitName = () => (this.props.model.name === '' && this.props.onDelete(this.props.model))\n\n  render() {\n    const { current, name, maximum } = this.props.model\n\n    return (\n      <div className=\"resource\">\n        <div className=\"display\">\n          <Editable\n            className=\"name\"\n            onChange={this.handleChangeName}\n            onEditEnd={this.handleCommitName}\n            value={name}\n          />\n          <Editable\n            className=\"current\"\n            max={999}\n            min={0}\n            onChange={this.handleChangeCurrent}\n            value={current}\n          />\n          {'of'}\n          <Editable\n            className=\"maximum\"\n            max={999}\n            min={0}\n            onChange={this.handleChangeMaximum}\n            value={maximum}\n          />\n        </div>\n        <Rating\n          allowExcess\n          current={current}\n          maximum={maximum}\n          onChange={this.handleChangeCurrent}\n        />\n      </div>\n    )\n  }\n}\n\nexport default Resource\n","import { observer } from 'mobx-react'\nimport React, { Component } from 'react'\nimport Editable from '@/components/Editable'\nimport noop from '@/utilities/noop'\nimport './Skill.scss'\n\n@observer class Skill extends Component {\n  static defaultProps = {\n    model: {},\n    onDelete: noop,\n  }\n\n  static sortOptions = [{\n    display: 'icon-sort-name-asc',\n    getter: model => model.name,\n  }, {\n    display: 'icon-sort-value-desc',\n    getter: model => [-model.theory, -model.mastery, model.name],\n  }, {\n    display: 'icon-sort-size-desc',\n    getter: model => [-model.mastery, -model.theory, model.name],\n  }]\n\n  onChangeName = name => this.props.model.set({ name })\n  onChangeMastery = mastery => this.props.model.set({ mastery })\n  handleCommitName = () => (this.props.model.name === '' && this.props.onDelete(this.props.model))\n  onChangeTheory = theory => this.props.model.set({ theory })\n\n  render() {\n    const { model } = this.props\n\n    return (\n      <div className=\"skill\">\n        <Editable\n          className=\"name\"\n          onChange={this.onChangeName}\n          onEditEnd={this.handleCommitName}\n          value={model.name}\n        />\n        <Editable\n          className={`theory ${(!model.theory && 'is-zero') || ''}`}\n          max={999}\n          min={-99}\n          onChange={this.onChangeTheory}\n          value={model.theory}\n        />\n        <Editable\n          className=\"mastery\"\n          max={999}\n          min={-99}\n          onChange={this.onChangeMastery}\n          value={model.mastery}\n        />\n      </div>\n    )\n  }\n}\n\nexport default Skill\n","import { observer } from 'mobx-react'\nimport React, { Component } from 'react'\nimport Editable from '@/components/Editable'\nimport './ResourceCost.scss'\n\n@observer class ResourceCost extends Component {\n  static defaultProps = {\n    model: {},\n  }\n\n  static sortOptions = [{\n    display: 'icon-sort-name-asc',\n    getter: model => model.resourceName,\n  }, {\n    display: 'icon-sort-value-asc',\n    getter: model => model.amount,\n  }]\n\n  handleChangeAmount = amount => this.props.model.set({ amount })\n  handleChangeResource = ({ target: { value } }) => this.props.model.set({ resourceName: value })\n\n  render() {\n    const { amount, available, resourceName } = this.props.model\n\n    return (\n      <div className=\"resource-cost\">\n        <select className=\"resource-id\" value={resourceName} onChange={this.handleChangeResource}>\n          {available.map(({ name }) => (\n            <option key={name} value={name}>{name}</option>\n          ))}\n        </select>\n        <Editable\n          className=\"amount\"\n          max={999}\n          min={-99}\n          onChange={this.handleChangeAmount}\n          value={amount}\n        />\n      </div>\n    )\n  }\n}\n\nexport default ResourceCost\n","import { observer } from 'mobx-react'\nimport { onSnapshot } from 'mobx-state-tree'\nimport React, { Component } from 'react'\nimport Editable from '@/components/Editable'\nimport Effect from '@/components/Effect'\nimport Expandable from '@/components/Expandable'\nimport ListOf from '@/components/List'\nimport ResourceCost from '@/components/ResourceCost'\nimport EffectModel from '@/models/Effect'\nimport ResourceCostModel from '@/models/ResourceCost'\nimport noop from '@/utilities/noop'\nimport './Spell.scss'\n\nconst EffectList = ListOf(EffectModel, Effect, { className: 'effect-list' })\n\nconst ListOfCosts = ListOf(ResourceCostModel, ResourceCost, {\n  className: 'resource-cost-list',\n})\n\n@observer class Spell extends Component {\n  static defaultProps = {\n    model: {},\n    onDelete: noop,\n    onToggleExpanded: noop,\n  }\n\n  static sortOptions = [{\n    display: 'icon-sort-name-asc',\n    getter: model => [model.name, model.level],\n  }, {\n    display: 'icon-sort-value-asc',\n    getter: model => [model.level, model.name],\n  }, {\n    display: 'icon-sort-value-desc',\n    getter: model => [-model.level, model.name],\n  }]\n\n  onResourceSnapshotDisposer = noop\n\n  componentDidMount() {\n    const { resources } = this.props.model.character\n    this.onResourceSnapshotDisposer = onSnapshot(resources, () => this.forceUpdate())\n  }\n  componentWillUnmount() { this.onResourceSnapshotDisposer() }\n\n  handleCast = () => {\n    this.props.model.cast()\n    this.forceUpdate()\n  }\n\n  handleChangeDescription = description => this.props.model.set({ description })\n  handleChangeLevel = level => this.props.model.set({ level })\n  handleChangeName = name => this.props.model.set({ name })\n  handleCommitName = () => (this.props.model.name === '' && this.props.onDelete(this.props.model))\n  handleToggleActive = () => this.props.model.set({ isActive: !this.props.model.isActive })\n\n  render() {\n    const {\n      costs, description, name, effects, hash, isActive, isAffordable, level,\n    } = this.props.model\n\n    return (\n      <div className={`spell ${isActive ? '' : 'in'}active`}>\n        <Editable className=\"is-active\" onChange={this.handleToggleActive} value={isActive} />\n        <Editable\n          className=\"name\"\n          onChange={this.handleChangeName}\n          onEditEnd={this.handleCommitName}\n          value={name}\n        />\n        <Editable\n          className=\"level\"\n          onChange={this.handleChangeLevel}\n          value={level}\n        />\n        <button className=\"cast icon-magic\" onClick={this.handleCast} disabled={!isAffordable()} />\n        <Expandable onToggle={expanded => this.props.onToggleExpanded(hash, expanded)}>\n          <Editable\n            className=\"description\"\n            type=\"multiline\"\n            onChange={this.handleChangeDescription}\n            placeholder=\"Description...\"\n            value={description}\n          />\n          <ListOfCosts collection={costs} title=\"Casting Costs\" />\n          <EffectList collection={effects} title=\"Effects\" />\n        </Expandable>\n      </div>\n    )\n  }\n}\n\nexport default Spell\n","import { observer } from 'mobx-react'\nimport React, { Component } from 'react'\nimport Editable from '@/components/Editable'\nimport Effect from '@/components/Effect'\nimport Expandable from '@/components/Expandable'\nimport ListOf from '@/components/List'\nimport EffectModel from '@/models/Effect'\nimport noop from '@/utilities/noop'\nimport './Trait.scss'\n\nconst EffectList = ListOf(EffectModel, Effect)\n\n@observer class Trait extends Component {\n  static defaultProps = {\n    model: {},\n    onDelete: noop,\n    onToggleExpanded: noop,\n  }\n\n  static sortOptions = [{\n    display: 'icon-sort-name-asc',\n    getter: model => model.name,\n  }, {\n    display: 'icon-sort-value-asc',\n    getter: model => model.value,\n  }]\n\n  handleChangeName = name => this.props.model.set({ name })\n  handleChangeValue = value => this.props.model.set({ value })\n  handleCommitName = () => (this.props.model.name === '' && this.props.onDelete(this.props.model))\n\n  render() {\n    const { model } = this.props\n\n    return (\n      <div className=\"trait\">\n        <Editable\n          className=\"name\"\n          onChange={this.handleChangeName}\n          onEditEnd={this.handleCommitName}\n          value={model.name}\n        />\n        <Editable\n          className=\"value\"\n          max={999}\n          min={-99}\n          onChange={this.handleChangeValue}\n          value={model.value}\n        />\n        <Expandable onToggle={expanded => this.props.onToggleExpanded(model.hash, expanded)}>\n          <EffectList collection={model.effects} title=\"Effects\" />\n        </Expandable>\n      </div>\n    )\n  }\n}\n\nexport default Trait\n","import Attribute from '@/components/Attribute'\nimport Descriptor from '@/components/Descriptor'\nimport Effect from '@/components/Effect'\nimport Item from '@/components/Item'\nimport Resource from '@/components/Resource'\nimport Skill from '@/components/Skill'\nimport Spell from '@/components/Spell'\nimport Trait from '@/components/Trait'\n\nexport default {\n  Attribute,\n  Descriptor,\n  Effect,\n  Item,\n  Resource,\n  Skill,\n  Spell,\n  Trait,\n}\n","import { observer } from 'mobx-react'\nimport { onSnapshot } from 'mobx-state-tree'\nimport React, { Component } from 'react'\nimport Editable from '@/components/Editable'\nimport Expandable from '@/components/Expandable'\nimport './Conditions.scss'\n\nexport default observer(class Conditions extends Component {\n  static defaultProps = {\n    model: {},\n  }\n\n  CACHE = {}\n\n  componentDidMount() {\n    this.onSnapshotDisposer = onSnapshot(this.props.model, this.handleSnapshot)\n  }\n\n  componentWillUnmount() {\n    this.onSnapshotDisposer()\n  }\n\n  handleSnapshot = () => {\n    const availableConditions = this.props.model.availableConditions()\n    const conditions = this.props.model.conditions.asArray\n\n    if (\n      JSON.stringify(availableConditions) !== JSON.stringify(this.CACHE.availableConditions) ||\n      JSON.stringify(conditions) !== JSON.stringify(this.CACHE.conditions)\n    ) {\n      this.CACHE.availableConditions = availableConditions\n      this.CACHE.conditions = conditions\n      this.forceUpdate()\n    }\n  }\n\n  handleCheckbox = (condition, value) => {\n    const { conditions } = this.props.model\n\n    if (value && !conditions.includes(condition)) {\n      conditions.push(condition)\n    } else if (typeof conditions.delete === 'function') {\n      conditions.delete(condition)\n    } else {\n      conditions.splice(conditions.indexOf(condition), 1)\n    }\n    this.forceUpdate()\n  }\n\n  renderCondition = (condition) => {\n    const { conditions } = this.props.model\n    const isCurrent = conditions.includes(condition)\n    return (\n      <div key={condition} className={`condition ${isCurrent ? 'current' : 'available'}`}>\n        <Editable\n          className=\"current\"\n          onChange={value => this.handleCheckbox(condition, value)}\n          value={isCurrent}\n        />\n        <div className=\"name\">{condition}</div>\n      </div>\n    )\n  }\n\n  render() {\n    return (\n      <div className=\"conditions\">\n        <Expandable>\n          {this.props.model.availableConditions().map(this.renderCondition)}\n        </Expandable>\n      </div>\n    )\n  }\n})\n","import { onSnapshot } from 'mobx-state-tree'\nimport React, { Component } from 'react'\nimport Editable from '@/components/Editable'\nimport Expandable from '@/components/Expandable'\nimport noop from '@/utilities/noop'\nimport './Layout.scss'\n\nexport default class Layout extends Component {\n  titleBar = React.createRef()\n\n  onSnapshotDisposer = noop\n  snapshot = null\n\n  componentDidMount() {\n    this.onSnapshotDisposer = onSnapshot(this.props.model, (snapshot) => {\n      const snapshotJSON = JSON.stringify(snapshot)\n      if (this.snapshot !== snapshotJSON) {\n        this.snapshot = snapshotJSON\n        this.forceUpdate()\n      }\n    })\n    this.forceUpdate() // Immediate redraw to place buttonParent\n  }\n  componentWillUnmount() { this.onSnapshotDisposer() }\n\n  handleChangeTitle = title => this.props.model.set({ title })\n\n  render() {\n    const { children, parentColumns } = this.props\n    const { colSpan, title } = this.props.model\n\n    return (\n      <div className=\"layout\" style={{ width: `calc(100%/${parentColumns}*${colSpan})` }}>\n        {title === undefined\n          ? children\n          : <>\n            <div className=\"title-bar\" ref={this.titleBar}>\n              <Editable\n                className=\"title\"\n                onChange={this.handleChangeTitle}\n                placeholder=\"Section Title\"\n                value={title}\n              />\n            </div>\n            <Expandable\n              expandByDefault\n              omitItemWrapper\n              toggleButtonParent={this.titleBar.current}\n            >\n              {children}\n            </Expandable>\n          </>\n        }\n      </div>\n    )\n  }\n}\n","import Attribute from '@/models/Attribute'\nimport Descriptor from '@/models/Descriptor'\nimport Effect from '@/models/Effect'\nimport Item from '@/models/Item'\nimport Resource from '@/models/Resource'\nimport Skill from '@/models/Skill'\nimport Spell from '@/models/Spell'\nimport Trait from '@/models/Trait'\n\nexport default {\n  Attribute,\n  Descriptor,\n  Effect,\n  Item,\n  Resource,\n  Skill,\n  Spell,\n  Trait,\n}\n","import { observer } from 'mobx-react'\nimport { onSnapshot } from 'mobx-state-tree'\nimport React from 'react'\nimport components from '@/components'\nimport Conditions from '@/components/Conditions'\nimport Layout from '@/components/Layout'\nimport ListOf from '@/components/List'\nimport models from '@/models'\nimport debounce from '@/utilities/debounce'\nimport noop from '@/utilities/noop'\nimport './Sheet.scss'\n\n@observer class Sheet extends React.Component {\n  static defaultProps = {\n    character: {},\n    layout: {},\n    onChange: noop,\n    onMount: noop,\n  }\n\n  state = { size: 'large' }\n\n  handleWindowResize = debounce(() => {\n    let size = 'large'\n    if (window.matchMedia('(min-width: 5in) and (max-width: 7.5in)').matches) {\n      size = 'medium'\n    } else if (window.matchMedia('(max-width: 5in)').matches) {\n      size = 'small'\n    }\n    if (size !== this.state.size) this.setState({ size })\n  }, 250)\n\n  constructor(props) {\n    super(props)\n    this.onCharacterSnapshotDisposer = onSnapshot(this.props.character, (snapshot) => {\n      this.props.onChange(snapshot, this.props.layout.toJSON(), this)\n    })\n    this.onLayoutSnapshotDisposer = onSnapshot(this.props.layout, (snapshot) => {\n      this.props.onChange(this.props.character.toJSON(), snapshot, this)\n    })\n  }\n\n  componentDidMount() {\n    this.handleWindowResize()\n    window.addEventListener('resize', this.handleWindowResize)\n    this.props.onMount(this)\n  }\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.handleWindowResize)\n    this.onCharacterSnapshotDisposer()\n    this.onLayoutSnapshotDisposer()\n  }\n\n\n  renderComponent = (parent, model, key) => {\n    if (model.type) {\n      const { title } = model\n      const typename = model.type.toLowerCase()\n      const List = ListOf(\n        models[model.type],\n        components[model.type],\n        { className: `${typename}-list` }\n      )\n      const collection = this.props.character[`${typename}s`]\n      return (\n        <List {...{ key, layout: model, title }} collection={collection} columns={model.columns} />\n      )\n    }\n\n    return (\n      <Layout key={model.hash} model={model} parentColumns={parent.columns}>\n        {model.children.map((child, i) => this.renderComponent(model, child, i))}\n      </Layout>\n    )\n  }\n\n  render() {\n    const { character, layout } = this.props\n    const { size } = this.state\n\n    return (\n      <div className={`sheetforge sheet ${size}`}>\n        <Conditions model={character} />\n        {layout.children.map(this.renderComponent.bind(null, layout))}\n      </div>\n    )\n  }\n}\n\nexport default Sheet\n","import '@fontello/css/sheetforge-embedded'\n\nexport { default as AttributeModel } from '@/models/Attribute'\nexport { default as CharacterModel } from '@/models/Character'\nexport { default as DescriptorModel } from '@/models/Descriptor'\nexport { default as EffectModel } from '@/models/Effect'\nexport { default as ItemModel } from '@/models/Item'\nexport { default as LayoutModel } from '@/models/Layout'\nexport { default as ResourceCostModel } from '@/models/ResourceCost'\nexport { default as ResourceModel } from '@/models/Resource'\nexport { default as Sheet } from '@/components/Sheet'\nexport { default as SkillModel } from '@/models/Skill'\nexport { default as SpellModel } from '@/models/Spell'\nexport { default as TraitModel } from '@/models/Trait'\n","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin"],"sourceRoot":""}