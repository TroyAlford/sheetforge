!function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define("sheetforge",[],t):"object"===typeof exports?exports.sheetforge=t():e.sheetforge=t()}(window,function(){return(window.webpackJsonpsheetforge=window.webpackJsonpsheetforge||[]).push([[16,1,2],{"05fm":function(e,t,n){"use strict";n.r(t);n("H3yI");var a=n("mkTB");n.d(t,"AttributeModel",function(){return a.a});var r=n("ITKj");n.d(t,"CharacterModel",function(){return r.a});var o=n("AD/C");n.d(t,"DescriptorModel",function(){return o.a});var i=n("HyL6");n.d(t,"EffectModel",function(){return i.a});var s=n("Afd3");n.d(t,"ItemModel",function(){return s.a});var c=n("zZb/");n.d(t,"LayoutModel",function(){return c.a});var l=n("ITnf");n.d(t,"ResourceCostModel",function(){return l.a});var u=n("ZEI3");n.d(t,"ResourceModel",function(){return u.a});var p=n("tqhn");n.d(t,"Sheet",function(){return p.a});var d=n("vovD");n.d(t,"SkillModel",function(){return d.a});var m=n("JCrA");n.d(t,"SpellModel",function(){return m.a});var f=n("ZwSi");n.d(t,"TraitModel",function(){return f.a})},"0dDA":function(e,t,n){},"1T+A":function(e,t,n){"use strict";n.d(t,"a",function(){return N});var a=n("b696"),r=n.n(a),o=n("Nogc"),i=n.n(o),s=n("WEGp"),c=n.n(s),l=n("Amxr"),u=n.n(l),p=n("o1mq"),d=n.n(p),m=n("cEnY"),f=n.n(m),h=n("itEV"),v=n.n(h),g=n("cNEE"),y=n.n(g),E=n("q1tI"),C=n.n(E),b=n("x6zz"),N=(n("djCb"),function(e){function t(){var e,n;i()(this,t);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=u()(this,(e=d()(t)).call.apply(e,[this].concat(o))),y()(f()(n),"state",{selected:null}),y()(f()(n),"handleOptionClick",function(e){var t=e.target,a=r()(t.parentElement.children).indexOf(t),o=n.props.options[a];void 0!==n.props.selected?n.props.onChange(o):n.setState({selected:o})}),n}return v()(t,e),c()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.options,r=void 0!==this.props.selected?this.props.selected:this.state.selected;return C.a.createElement("div",{className:"multi-toggle ".concat(n).trim()},a.map(function(t,n){return C.a.createElement("div",{className:"toggle ".concat(t===r?"on":"off").trim(),key:n,onClick:e.handleOptionClick},t.display)}))}}]),t}(E.Component));y()(N,"defaultProps",{className:"",onChange:b.a,options:[],selected:void 0})},"5UjR":function(e,t,n){},"8qIS":function(e,t,n){"use strict";var a,r,o,i,s,c,l=n("Nogc"),u=n.n(l),p=n("WEGp"),d=n.n(p),m=n("Amxr"),f=n.n(m),h=n("o1mq"),v=n.n(h),g=n("cEnY"),y=n.n(g),E=n("itEV"),C=n.n(E),b=n("cNEE"),N=n.n(b),O=n("NbXW"),x=n("uqjs"),A=n("q1tI"),w=n.n(A),S=n("O+tL"),j=n("a4BR"),k=n("I7n6"),D=n("t524"),I=(n("y+pi"),Object(O.observer)((o=r=function(e){function t(){var e,n;u()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=f()(this,(e=v()(t)).call.apply(e,[this].concat(r))),N()(y()(n),"handleChangeAmount",function(e){return n.props.model.set({amount:e})}),N()(y()(n),"handleChangeResource",function(e){var t=e.target.value;return n.props.model.set({resourceName:t})}),n}return C()(t,e),d()(t,[{key:"render",value:function(){var e=this.props.model,t=e.amount,n=e.available,a=e.resourceName;return w.a.createElement("div",{className:"resource-cost"},w.a.createElement("select",{className:"resource-id",value:a,onChange:this.handleChangeResource},n.map(function(e){var t=e.name;return w.a.createElement("option",{key:t,value:t},t)})),w.a.createElement(S.a,{className:"amount",max:999,min:-99,onChange:this.handleChangeAmount,value:t}))}}]),t}(A.Component),N()(r,"defaultProps",{model:{}}),N()(r,"sortOptions",[{display:"icon-sort-name-asc",getter:function(e){return e.resourceName}},{display:"icon-sort-value-asc",getter:function(e){return e.amount}}]),a=o))||a),T=n("HyL6"),z=n("ITnf"),q=n("x6zz"),V=(n("IURI"),Object(D.a)(T.a,j.a,{className:"effect-list"})),W=Object(D.a)(z.a,I,{className:"resource-cost-list"}),R=Object(O.observer)((c=s=function(e){function t(){var e,n;u()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=f()(this,(e=v()(t)).call.apply(e,[this].concat(r))),N()(y()(n),"onResourceSnapshotDisposer",q.a),N()(y()(n),"handleCast",function(){n.props.model.cast(),n.forceUpdate()}),N()(y()(n),"handleChangeDescription",function(e){return n.props.model.set({description:e})}),N()(y()(n),"handleChangeLevel",function(e){return n.props.model.set({level:e})}),N()(y()(n),"handleChangeName",function(e){return n.props.model.set({name:e})}),N()(y()(n),"handleCommitName",function(){return""===n.props.model.name&&n.props.onDelete(n.props.model)}),N()(y()(n),"handleToggleActive",function(){return n.props.model.set({isActive:!n.props.model.isActive})}),n}return C()(t,e),d()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.model.character.resources;this.onResourceSnapshotDisposer=Object(x.onSnapshot)(t,function(){return e.forceUpdate()})}},{key:"componentWillUnmount",value:function(){this.onResourceSnapshotDisposer()}},{key:"render",value:function(){var e=this,t=this.props.model,n=t.costs,a=t.description,r=t.name,o=t.effects,i=t.hash,s=t.isActive,c=t.isAffordable,l=t.level;return w.a.createElement("div",{className:"spell ".concat(s?"":"in","active")},w.a.createElement(S.a,{className:"is-active",onChange:this.handleToggleActive,value:s}),w.a.createElement(S.a,{className:"name",onChange:this.handleChangeName,onEditEnd:this.handleCommitName,value:r}),w.a.createElement(S.a,{className:"level",onChange:this.handleChangeLevel,value:l}),w.a.createElement("button",{className:"cast icon-magic",onClick:this.handleCast,disabled:!c()}),w.a.createElement(k.a,{onToggle:function(t){return e.props.onToggleExpanded(i,t)}},w.a.createElement(S.a,{className:"description",type:"multiline",onChange:this.handleChangeDescription,placeholder:"Description...",value:a}),w.a.createElement(W,{collection:n,title:"Casting Costs"}),w.a.createElement(V,{collection:o,title:"Effects"})))}}]),t}(A.Component),N()(s,"defaultProps",{model:{},onDelete:q.a,onToggleExpanded:q.a}),N()(s,"sortOptions",[{display:"icon-sort-name-asc",getter:function(e){return[e.name,e.level]}},{display:"icon-sort-value-asc",getter:function(e){return[e.level,e.name]}},{display:"icon-sort-value-desc",getter:function(e){return[-e.level,e.name]}}]),i=c))||i;t.a=R},"AD/C":function(e,t,n){"use strict";var a=n("uqjs"),r=n("vQEy"),o=n("RtsE"),i=n("kcWH");t.a=a.types.compose(i.a,Object(r.a)(),o.a,a.types.model({name:"New Descriptor...",value:""})).named("Descriptor")},Afd3:function(e,t,n){"use strict";var a=n("uqjs"),r=n("HyL6"),o=n("YFLu"),i=n("vQEy"),s=n("RtsE"),c=n("kcWH");t.a=a.types.compose(c.a,Object(i.a)(),s.a,a.types.model({description:"",effects:Object(o.a)(r.a),equipped:!1,name:"New Item..."})).named("Item")},DODz:function(e,t,n){"use strict";t.a=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter(function(e,t,n){return n.indexOf(e)===t})}},"H/3x":function(e,t,n){},H3yI:function(e,t,n){},HYkr:function(e,t,n){},HcU2:function(e,t,n){"use strict";var a=n("uqjs");t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Boolean;if(!Object(a.hasParent)(e))return null;for(var n=Object(a.getParent)(e);n;){if(t(n))return n;if(!Object(a.hasParent)(n))return null;n=Object(a.getParent)(n)}return null}},HyL6:function(e,t,n){"use strict";var a=n("uqjs"),r=n("mkTB"),o=n("YFLu"),i=n("RtsE"),s=n("kcWH"),c=n("HcU2");t.a=a.types.compose(s.a,i.a,a.types.model({condition:"",modifier:0,targetId:""}).actions(function(e){return{afterAttach:function(){!e.targetId&&e.available().length&&(e.targetId=e.available().first.id)},available:function(){var t=e.character();return t?t.attributes:Object(o.a)(r.a).create([])},character:function(){return Object(c.a)(e,function(e){return e.isCharacter})},isApplicable:function(){var t=e.character();return Boolean(!e.condition||t&&t.conditions.includes(e.condition))},source:function(){return Object(c.a)(e,function(e){return e.name})||null},sourceName:function(){return e.source()?e.source().name:"Unknown"},target:function(){var t=e.character();return t?t.attributes.findBy("name",e.targetId):null}}})).named("Effect")},I7n6:function(e,t,n){"use strict";n.d(t,"a",function(){return O});var a=n("cFUw"),r=n.n(a),o=n("Nogc"),i=n.n(o),s=n("WEGp"),c=n.n(s),l=n("Amxr"),u=n.n(l),p=n("o1mq"),d=n.n(p),m=n("cEnY"),f=n.n(m),h=n("itEV"),v=n.n(h),g=n("cNEE"),y=n.n(g),E=n("q1tI"),C=n.n(E),b=n("i8i4"),N=n("x6zz"),O=(n("0dDA"),function(e){function t(){var e,n;i()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=u()(this,(e=d()(t)).call.apply(e,[this].concat(r))),y()(f()(n),"state",{expanded:!1}),y()(f()(n),"expander",C.a.createRef()),y()(f()(n),"handleToggle",function(){var e=n.expander.current.parentElement.classList,t=n.state.expanded;n.setState({expanded:!t},function(){n.props.onToggle(!t),e[t?"remove":"add"]("expanded")})}),y()(f()(n),"renderExpanded",function(){var e=n.props,t=e.children;return e.omitItemWrapper?t:C.a.createElement("div",{className:"expandable"}," ",t)}),n}return v()(t,e),c()(t,[{key:"componentWillMount",value:function(){this.setState({expanded:this.props.expandByDefault})}},{key:"componentDidMount",value:function(){this.expander.current.parentElement.classList.add("expandable-wrapper")}},{key:"render",value:function(){var e=this.props,t=e.toggleButtonParent,n=e.toggleButtonText,a=this.state.expanded?"expanded":"collapsed",o={className:"expandable-toggle icon-".concat(a),onClick:this.handleToggle,ref:this.expander},i=C.a.createElement("div",r()({},o,{text:n}));return C.a.createElement(E.Fragment,null,t?Object(b.createPortal)(i,t):i,this.state.expanded&&this.renderExpanded())}}]),t}(E.Component));y()(O,"defaultProps",{expandByDefault:!1,omitItemWrapper:!1,onToggle:N.a,toggleButtonParent:null,toggleButtonText:""})},ITKj:function(e,t,n){"use strict";var a=n("uqjs"),r=n("mkTB"),o=n("AD/C"),i=n("YFLu"),s=n("RtsE"),c=n("kcWH"),l=n("Afd3"),u=n("ZEI3"),p=n("vovD"),d=n("JCrA"),m=n("ZwSi");t.a=a.types.compose(c.a,s.a,a.types.model({attributes:Object(i.a)(r.a),conditions:Object(i.a)(a.types.string),descriptors:Object(i.a)(o.a),experience:0,items:Object(i.a)(l.a),resources:Object(i.a)(u.a),skills:Object(i.a)(p.a),spells:Object(i.a)(d.a),traits:Object(i.a)(m.a)}).volatile(function(){return{isCharacter:!0}}).actions(function(e){return{activeEffects:function(){return e.effects().filter(function(e){return e&&e.isApplicable()})},availableConditions:function(){return e.effects().map(function(e){return e.condition}).concat(e.conditions.asArray).sort().filter(function(e,t,n){return!t||e!==n[t-1]}).filter(Boolean)},effects:function(){return function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;if(!t||!Array.isArray(t))throw new TypeError("cannot flatten non-Array value ".concat(JSON.stringify(t)));return t.reduce(function(t,a){return n>1&&a&&Array.isArray(a)?t.concat(e(a,n-1)):t.concat(a)},[])}([e.traits.filter(Boolean).map(function(e){return e.effects.values}),e.spells.filter(function(e){return e.isActive}).map(function(e){return e.effects.values}),e.items.filter(function(e){return e.equipped}).map(function(e){return e.effects.values})]).filter(Boolean)}}})).named("Character")},ITnf:function(e,t,n){"use strict";var a=n("uqjs"),r=n("YFLu"),o=n("RtsE"),i=n("kcWH"),s=n("ZEI3"),c=n("HcU2");t.a=a.types.compose(i.a,o.a,a.types.model({amount:0,resourceName:""}).views(function(e){return{get available(){return e.character?e.character.resources:Object(r.a)(s.a).create([])},get character(){return Object(c.a)(e,function(e){return e.isCharacter})}}}).actions(function(e){return{afterAttach:function(){!e.resourceName&&e.available.length&&(e.resourceName=e.available.first.name)},resource:function(){return e.character?e.character.resources.findBy("name",e.resourceName):null}}})).named("Cost")},IURI:function(e,t,n){},JCrA:function(e,t,n){"use strict";var a=n("uqjs"),r=n("HyL6"),o=n("YFLu"),i=n("vQEy"),s=n("RtsE"),c=n("kcWH"),l=n("ITnf"),u=n("HcU2");t.a=a.types.compose(c.a,Object(i.a)(function(e){return e.level}),s.a,a.types.model({costs:Object(o.a)(l.a),description:"",effects:Object(o.a)(r.a),isActive:!1,level:0,name:"New Spell..."}).views(function(e){return{get character(){return Object(u.a)(e,function(e){return e.isCharacter})}}}).actions(function(e){return{cast:function(){e.isAffordable()&&e.costs.forEach(function(e){var t=e.resource();t.set({current:t.current-e.amount})})},isAffordable:function(){return!e.character||!e.costs.length||e.costs.every(function(e){return e.resource()&&e.resource().current>=e.amount})}}})).named("Spell")},K0ru:function(e,t,n){"use strict";var a=n("Nogc"),r=n.n(a),o=n("Amxr"),i=n.n(o),s=n("o1mq"),c=n.n(s),l=n("cEnY"),u=n.n(l),p=n("itEV"),d=n.n(p),m=n("cNEE"),f=n.n(m),h=n("q1tI"),v=n.n(h),g=n("kIQV"),y=n("maIC"),E=n("x6zz"),C=n("b696"),b=n.n(C),N=function(e,t){var n=e<=t?1:-1,a=Math.abs(t-e)/Math.abs(n)+1;return Array.apply(void 0,b()(Array(a))).map(function(t,a){return e+a*n})};n("VHFM");n.d(t,"a",function(){return O});var O=function(e){function t(){var e,n;r()(this,t);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=i()(this,(e=c()(t)).call.apply(e,[this].concat(o))),f()(u()(n),"handleIconClick",function(e){var t=parseInt(e.target.getAttribute("data-number"),10);n.props.onChange(t===n.props.current?t-1:t)}),f()(u()(n),"render",function(){var e=n.props,t=e.allowExcess,a=e.current,r=e.iconExcess,o=e.iconOff,i=e.iconOn,s=e.maximum,c=t?y.a.max(a,s):s;return v.a.createElement("div",{className:"rating"},c>0||t&&a>0?N(1,Object(g.a)(c,{min:1})).map(function(e){return v.a.createElement("span",{"data-number":e,key:e,onClick:n.handleIconClick,title:e},e<=a&&e<=s&&i,e>a&&e<=s&&o,e>s&&r)}):null)}),n}return d()(t,e),t}(h.Component);f()(O,"defaultProps",{allowExcess:!1,current:0,iconExcess:v.a.createElement("span",{className:"dot excess icon-add"}),iconOff:v.a.createElement("span",{className:"dot empty"}),iconOn:v.a.createElement("span",{className:"dot filled"}),maximum:5,onChange:E.a})},"M/4f":function(e,t,n){"use strict";var a,r,o,i=n("Nogc"),s=n.n(i),c=n("WEGp"),l=n.n(c),u=n("Amxr"),p=n.n(u),d=n("o1mq"),m=n.n(d),f=n("cEnY"),h=n.n(f),v=n("itEV"),g=n.n(v),y=n("cNEE"),E=n.n(y),C=n("NbXW"),b=n("q1tI"),N=n.n(b),O=n("O+tL"),x=n("a4BR"),A=n("I7n6"),w=n("t524"),S=n("HyL6"),j=n("x6zz"),k=(n("sxfZ"),Object(w.a)(S.a,x.a)),D=Object(C.observer)((o=r=function(e){function t(){var e,n;s()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=p()(this,(e=m()(t)).call.apply(e,[this].concat(r))),E()(h()(n),"handleChangeName",function(e){return n.props.model.set({name:e})}),E()(h()(n),"handleChangeValue",function(e){return n.props.model.set({value:e})}),E()(h()(n),"handleCommitName",function(){return""===n.props.model.name&&n.props.onDelete(n.props.model)}),n}return g()(t,e),l()(t,[{key:"render",value:function(){var e=this,t=this.props.model;return N.a.createElement("div",{className:"trait"},N.a.createElement(O.a,{className:"name",onChange:this.handleChangeName,onEditEnd:this.handleCommitName,value:t.name}),N.a.createElement(O.a,{className:"value",max:999,min:-99,onChange:this.handleChangeValue,value:t.value}),N.a.createElement(A.a,{onToggle:function(n){return e.props.onToggleExpanded(t.hash,n)}},N.a.createElement(k,{collection:t.effects,title:"Effects"})))}}]),t}(b.Component),E()(r,"defaultProps",{model:{},onDelete:j.a,onToggleExpanded:j.a}),E()(r,"sortOptions",[{display:"icon-sort-name-asc",getter:function(e){return e.name}},{display:"icon-sort-value-asc",getter:function(e){return e.value}}]),a=o))||a;t.a=D},"O+tL":function(e,t,n){"use strict";n.d(t,"a",function(){return w});var a=n("cFUw"),r=n.n(a),o=n("/hBA"),i=n.n(o),s=n("Nogc"),c=n.n(s),l=n("WEGp"),u=n.n(l),p=n("Amxr"),d=n.n(p),m=n("o1mq"),f=n.n(m),h=n("cEnY"),v=n.n(h),g=n("itEV"),y=n.n(g),E=n("cNEE"),C=n.n(E),b=n("q1tI"),N=n.n(b),O=n("kIQV"),x=n("x6zz"),A=(n("S5k1"),["text","multiline","boolean","number","slider"]),w=function(e){function t(){var e,n;c()(this,t);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=d()(this,(e=f()(t)).call.apply(e,[this].concat(o))),C()(v()(n),"state",{editing:!1,resetValue:n.props.value}),C()(v()(n),"getEditorType",function(){var e=n.props.value,t=n.props.type;return void 0!==t&&A.includes(t)?t:"string"===(t=i()(e))?e.includes("\n")?"multiline":"text":["boolean","number"].includes(t)?t:"text"}),C()(v()(n),"resetChanges",function(){n.props.onChange(n.state.resetValue,n.props.value),n.handleToggleEditing()}),C()(v()(n),"createRefWithAutoFocus",function(e){e&&(n.editor=e,"boolean"!==n.getEditorType()&&"function"===typeof e.focus&&e.focus(),["boolean","number"].includes(n.getEditorType())||n.props.forceEditMode&&"function"===typeof e.setSelectionRange&&e.setSelectionRange(e.value.length,e.value.length))}),C()(v()(n),"handleChange",function(e){var t=e.target,a=n.props,r=a.min,o=a.max,i=t.value;switch(n.getEditorType()){case"slider":case"number":i=parseFloat(i||0),Number.isNaN(i)&&(i=n.props.value),i=Object(O.a)(i,{max:o,min:r})}n.props.onChange(i,n.state.resetValue)}),C()(v()(n),"handleKeys",function(e){var t=e.target,a=e.key,r=e.ctrlKey,o=e.metaKey;n.props.onKeyDown!==x.a&&(n.props.onKeyDown(e),e.isDefaultPrevented())||("Escape"===a&&n.resetChanges(),"Enter"===a&&("TEXTAREA"!==t.nodeName||r||o)&&n.handleToggleEditing())}),C()(v()(n),"handleReceivingFocus",function(){n.props.readOnly||n.state.editing||n.handleToggleEditing()}),C()(v()(n),"handleToggleEditing",function(){if(!n.props.readOnly){var e=!n.editing;n.setState({editing:e,resetValue:n.props.value},function(){n.state.editing?n.props.onEditStart():n.props.onEditEnd()})}}),C()(v()(n),"selectOnFocus",function(e){return e.target.select()}),C()(v()(n),"toggleBoolean",function(){n.props.onEditStart(),n.props.onChange(!n.props.value,n.props.value),n.props.onEditEnd()}),C()(v()(n),"renderBoolean",function(){return N.a.createElement("input",{type:"checkbox",checked:Boolean(n.props.value),disabled:n.props.readOnly,onChange:n.toggleBoolean,ref:n.createRefWithAutoFocus})}),C()(v()(n),"renderMultiline",function(){if(!n.editing){var e=(n.props.value||n.props.placeholder).split("\n").map(function(e,t){return N.a.createElement("p",{key:t},e)}),t=["multiline",n.props.value?"":"placeholder"].join(" ").trim();return N.a.createElement("div",{className:t,onClick:n.handleToggleEditing},e)}return N.a.createElement("textarea",{disabled:n.props.readOnly,onBlur:n.handleToggleEditing,onChange:n.handleChange,onFocus:n.selectOnFocus,onKeyDown:n.handleKeys,onKeyPress:n.props.onKeyPress,onKeyUp:n.props.onKeyUp,placeholder:n.props.placeholder,ref:n.createRefWithAutoFocus,rows:n.props.value.split("\n").length,value:n.props.value})}),C()(v()(n),"renderNumber",function(){return n.editing?N.a.createElement("input",{type:"number",disabled:n.props.readOnly,max:n.props.max,min:n.props.min,onBlur:n.handleToggleEditing,onChange:n.handleChange,onFocus:n.selectOnFocus,onKeyDown:n.handleKeys,onKeyPress:n.props.onKeyPress,onKeyUp:n.props.onKeyUp,placeholder:n.props.placeholder,ref:n.createRefWithAutoFocus,step:n.props.step,value:n.props.value}):n.renderStatic()}),C()(v()(n),"renderSlider",function(){return N.a.createElement("input",{type:"range",disabled:n.props.readOnly,max:n.props.max,min:n.props.min,onBlur:n.handleToggleEditing,onChange:n.handleChange,onKeyDown:n.props.onKeyDown,onKeyPress:n.props.onKeyPress,onKeyUp:n.props.onKeyUp,ref:n.createRefWithAutoFocus,step:n.props.step,value:n.props.value})}),C()(v()(n),"renderText",function(){return n.editing?N.a.createElement("input",{type:"text",disabled:n.props.readOnly,onBlur:n.handleToggleEditing,onChange:n.handleChange,onFocus:n.selectOnFocus,onKeyDown:n.handleKeys,onKeyPress:n.props.onKeyPress,onKeyUp:n.props.onKeyUp,placeholder:n.props.placeholder,ref:n.createRefWithAutoFocus,value:n.props.value}):n.renderStatic()}),C()(v()(n),"renderStatic",function(){var e=n.props,t=e.placeholder,a=e.readOnlyValue,r=e.value,o=t&&!r,i=void 0!==a?a:r,s=o?"placeholder":"";return N.a.createElement("span",{className:s,onClick:n.handleToggleEditing},o?t:i)}),C()(v()(n),"renderEditor",function(){switch(n.getEditorType()){case"boolean":return n.renderBoolean();case"slider":return n.renderSlider();case"multiline":return n.renderMultiline();case"number":return n.renderNumber();default:return n.renderText()}}),C()(v()(n),"render",function(){var e=n.props,t=e.className,a=e.readOnly,o=["editable",n.editing?"editing":"",t||"",a?"readonly":""].filter(Boolean),i={};return a||n.editing||(i={onFocus:n.handleReceivingFocus,tabIndex:"0"}),N.a.createElement("div",r()({className:o.join(" ")},i),n.renderEditor())}),n}return y()(t,e),u()(t,[{key:"editing",get:function(){return this.props.forceEditMode||this.state.editing}}]),t}(N.a.Component);C()(w,"displayName","Editable"),C()(w,"defaultProps",{className:"",forceEditMode:!1,max:void 0,min:void 0,onChange:x.a,onEditEnd:x.a,onEditStart:x.a,onKeyDown:x.a,onKeyPress:x.a,onKeyUp:x.a,placeholder:"",readOnly:!1,readOnlyValue:void 0,step:1,type:void 0,value:""})},RtsE:function(e,t,n){"use strict";var a=n("/hBA"),r=n.n(a),o=n("f66B"),i=n.n(o),s=n("Ta9u"),c=n("uqjs"),l=/([a-z0-9-_]+)(?![["'\].])*/gi,u=function(e){return"string"!==typeof e?null:e.match(l)},p=function(e,t){if("string"===typeof t){var n=u(t);if(Array.isArray(n)){var a=n.pop(),r=n.reduce(function(e,t){return e[t]||{}},e);return r?r[a]:void 0}}},d=c.types.model("IEditable",{}).volatile(function(){return{isIEditable:!0,savedVersion:{}}}).views(function(e){return{get isDirty(){return!i()(e.toJSON(),e.savedVersion)}}}).actions(function(e){return{afterCreate:function(){e.savedVersion=e.toJSON()},isPathDirty:function(t){var n=p(e.toJSON(),t),a=p(e.savedVersion,t);return!i()(n,a)},markAsClean:function(){e.savedVersion=e.toJSON(),Object.keys(e.savedVersion).forEach(function(t){var n=e[t];n&&(n.isIEditable?n.markAsClean():Object(s.isObservableArray)(n)&&n.forEach(function(e){return e&&e.isIEditable&&e.markAsClean()}))})},reset:function(){Object.assign(e,e.savedVersion)},set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;"string"===typeof t&&void 0!==n?void 0!==e[t]?e[t]=n:function(e,t,n){var a=u(t),r=a.pop(),o=a.reduce(function(e,t){return e[t]||{}},e);o&&o.isIEditable?o.set(r,n):o[r]=n}(e,t,n):"object"===r()(t)&&void 0===n&&Object.assign(e,t)}}});t.a=d},S5k1:function(e,t,n){},Upa8:function(e,t,n){},"Ut7+":function(e,t,n){"use strict";var a,r,o,i=n("Nogc"),s=n.n(i),c=n("WEGp"),l=n.n(c),u=n("Amxr"),p=n.n(u),d=n("o1mq"),m=n.n(d),f=n("cEnY"),h=n.n(f),v=n("itEV"),g=n.n(v),y=n("cNEE"),E=n.n(y),C=n("NbXW"),b=n("q1tI"),N=n.n(b),O=n("O+tL"),x=n("x6zz"),A=(n("k8Dq"),Object(C.observer)((o=r=function(e){function t(){var e,n;s()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=p()(this,(e=m()(t)).call.apply(e,[this].concat(r))),E()(h()(n),"handleChangeName",function(e){return n.props.model.set({name:e})}),E()(h()(n),"handleChangeValue",function(e){return n.props.model.set({value:e})}),E()(h()(n),"handleCommitName",function(){return""===n.props.model.name&&n.props.onDelete(n.props.model)}),n}return g()(t,e),l()(t,[{key:"render",value:function(){return N.a.createElement("div",{className:"descriptor"},N.a.createElement(O.a,{className:"name",onChange:this.handleChangeName,onEditEnd:this.handleCommitName,value:this.props.model.name}),N.a.createElement(O.a,{className:"value",type:"text",onChange:this.handleChangeValue,value:this.props.model.value}))}}]),t}(b.Component),E()(r,"defaultProps",{model:{},onDelete:x.a}),E()(r,"sortOptions",[{display:"icon-sort-name-asc",getter:function(e){return e.name}},{display:"icon-sort-value-asc",getter:function(e){return e.value}}]),a=o))||a);t.a=A},VHFM:function(e,t,n){},YFLu:function(e,t,n){"use strict";var a=n("cNEE"),r=n.n(a),o=n("ubaz"),i=n.n(o),s=n("Ta9u"),c=n("uqjs");t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=c.types.model({values:c.types.array(e)}).views(function(e){return{get asArray(){return e.values.slice()},get first(){return e.length?e.at(0):void 0},get last(){return e.length?e.at(e.length-1):void 0},get length(){return e.values.length}}}).actions(function(t){return{at:function(e){return t.values[e]},clear:function(){return t.values.clear()},delete:function(e){t.values.replace(t.values.filter(function(t){return t!==e}))},deleteAt:function(e){t.values.replace(t.values.filter(function(t,n){return n!==e}))},every:function(e){return t.values.every(e)},filter:function(e){return t.values.filter(e)},find:function(e){return t.values.find(e)},findBy:function(e,n){return t.find(function(t){return t[e]===n})},findById:function(n){return e.identifierAttribute&&t.find(function(t){return t[e.identifierAttribute]===n})||null},forEach:function(e){return t.values.forEach(e)},includes:function(e,n){return t.values.includes(e,n)},indexOf:function(e){return t.values.indexOf(e)},insert:function(e,n){return t.splice(n,0,e)},map:function(e){return t.values.map(e)},pop:function(){return t.values.pop()},push:function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return t.values.replace([].concat(t.values,n))},reduce:function(e,n){return t.values.reduce(e,n)},replace:function(e){return t.values.replace(e)},shift:function(){return t.values.shift()},slice:function(e,n){return t.values.slice(e,n)},some:function(e){return t.values.some(e)},sortBy:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";if(!["asc","desc"].includes(n))throw new TypeError('direction must be "asc" or "desc", got: "'.concat(n,'"'));var a=t.values.slice().sort(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,a){var r=String(n instanceof Map?n.get(e):n[e]),o=String(a instanceof Map?a.get(e):a[e]);return t?o.localeCompare(r):r.localeCompare(o)}}(e));return t.values.replace("desc"===n?a.reverse():a),t},splice:function(e,n,a){return t.values.splice(e,n,a)},toObject:function(e,n){return t.values.reduce(function(t,a){var o=a[e],s=void 0!==n?a[n]:a;return i()({},t,r()({},o,"function"===typeof s?s():s))},{})},unshift:function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return t.values.replace([].concat(n,t.values))}}}).postProcessSnapshot(function(e){return e.values});return c.types.custom(i()({},t,{fromSnapshot:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return n.create({values:e})},getValidationMessage:function(t){return t?(Object(s.isObservableArray)(t)||Array.isArray(t))&&t.every(function(t){return e.is(t)})?"":"Collection types must be assigned an array of values or null":""},isTargetType:function(e){return n.is(e)},name:t.name||"Collection"}))}},ZEI3:function(e,t,n){"use strict";var a=n("uqjs"),r=n("vQEy"),o=n("RtsE"),i=n("kcWH");t.a=a.types.compose(i.a,Object(r.a)(),o.a,a.types.model({current:0,maximum:10,name:"New Resource..."})).named("Resource")},Zsyy:function(e,t,n){},ZwSi:function(e,t,n){"use strict";var a=n("uqjs"),r=n("HyL6"),o=n("YFLu"),i=n("vQEy"),s=n("RtsE"),c=n("kcWH");t.a=a.types.compose(c.a,Object(i.a)(function(e){return e.value}),s.a,a.types.model("Trait",{effects:Object(o.a)(r.a),name:"New Trait...",value:0})).named("Trait")},a4BR:function(e,t,n){"use strict";var a,r,o,i=n("Nogc"),s=n.n(i),c=n("WEGp"),l=n.n(c),u=n("Amxr"),p=n.n(u),d=n("o1mq"),m=n.n(d),f=n("cEnY"),h=n.n(f),v=n("itEV"),g=n.n(v),y=n("cNEE"),E=n.n(y),C=n("NbXW"),b=n("q1tI"),N=n.n(b),O=n("O+tL"),x=(n("5UjR"),Object(C.observer)((o=r=function(e){function t(){var e,n;s()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=p()(this,(e=m()(t)).call.apply(e,[this].concat(r))),E()(h()(n),"handleChangeCondition",function(e){return n.props.model.set({condition:e})}),E()(h()(n),"handleChangeModifier",function(e){return n.props.model.set({modifier:e})}),E()(h()(n),"handleChangeTarget",function(e){var t=e.target.value;return n.props.model.set({targetId:t})}),n}return g()(t,e),l()(t,[{key:"render",value:function(){var e=this.props.model,t=e.available,n=e.condition,a=void 0===n?"":n,r=e.isApplicable,o=e.modifier,i=e.targetId;return N.a.createElement("div",{className:"effect ".concat(r?"applicable":"").trim()},N.a.createElement("select",{className:"target",value:i,onChange:this.handleChangeTarget},t().map(function(e){var t=e.hash,n=e.id,a=e.name;return N.a.createElement("option",{key:t,value:n},a)})),N.a.createElement(O.a,{className:"modifier",max:999,min:-99,onChange:this.handleChangeModifier,value:o}),N.a.createElement(O.a,{className:"condition",onChange:this.handleChangeCondition,placeholder:"Any",value:a}))}}]),t}(b.Component),E()(r,"defaultProps",{model:{}}),E()(r,"sortOptions",[{display:"icon-sort-name-asc",getter:function(e){return[!e.targetId,e.targetId]}},{display:"icon-sort-value-asc",getter:function(e){return[!e.condition,e.modifier]}}]),a=o))||a);t.a=x},"b/z0":function(e,t,n){"use strict";var a,r,o,i=n("Nogc"),s=n.n(i),c=n("WEGp"),l=n.n(c),u=n("Amxr"),p=n.n(u),d=n("o1mq"),m=n.n(d),f=n("cEnY"),h=n.n(f),v=n("itEV"),g=n.n(v),y=n("cNEE"),E=n.n(y),C=n("NbXW"),b=n("q1tI"),N=n.n(b),O=n("O+tL"),x=n("x6zz"),A=(n("Upa8"),Object(C.observer)((o=r=function(e){function t(){var e,n;s()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=p()(this,(e=m()(t)).call.apply(e,[this].concat(r))),E()(h()(n),"onChangeName",function(e){return n.props.model.set({name:e})}),E()(h()(n),"onChangeMastery",function(e){return n.props.model.set({mastery:e})}),E()(h()(n),"handleCommitName",function(){return""===n.props.model.name&&n.props.onDelete(n.props.model)}),E()(h()(n),"onChangeTheory",function(e){return n.props.model.set({theory:e})}),n}return g()(t,e),l()(t,[{key:"render",value:function(){var e=this.props.model;return N.a.createElement("div",{className:"skill"},N.a.createElement(O.a,{className:"name",onChange:this.onChangeName,onEditEnd:this.handleCommitName,value:e.name}),N.a.createElement(O.a,{className:"theory ".concat(e.theory?"":"is-zero"),max:999,min:-99,onChange:this.onChangeTheory,value:e.theory}),N.a.createElement(O.a,{className:"mastery",max:999,min:-99,onChange:this.onChangeMastery,value:e.mastery}))}}]),t}(b.Component),E()(r,"defaultProps",{model:{},onDelete:x.a}),E()(r,"sortOptions",[{display:"icon-sort-name-asc",getter:function(e){return e.name}},{display:"icon-sort-value-desc",getter:function(e){return[-e.theory,-e.mastery,e.name]}},{display:"icon-sort-size-desc",getter:function(e){return[-e.mastery,-e.theory,e.name]}}]),a=o))||a);t.a=A},djCb:function(e,t,n){},e8LY:function(e,t,n){},i9wh:function(e,t,n){},k8Dq:function(e,t,n){},kIQV:function(e,t,n){"use strict";t.a=function(e,t){var n=t.min,a=t.max;return void 0!==n&&e<n?n:void 0!==a&&e>a?a:e}},kcWH:function(e,t,n){"use strict";var a=n("uqjs");var r=function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=String(e),a=0;return n.split("").forEach(function(e){a=(a<<5)-a+e.charCodeAt(0),a&=a}),Math.abs(a).toString(t)}(Math.random().toString())};t.a=a.types.model({}).volatile(function(){return{hash:""}}).actions(function(e){return{afterCreate:function(){e.hash=r()}}})},kvEc:function(e,t,n){},mD9I:function(e,t,n){"use strict";var a,r,o,i=n("Nogc"),s=n.n(i),c=n("WEGp"),l=n.n(c),u=n("Amxr"),p=n.n(u),d=n("o1mq"),m=n.n(d),f=n("cEnY"),h=n.n(f),v=n("itEV"),g=n.n(v),y=n("cNEE"),E=n.n(y),C=n("NbXW"),b=n("uqjs"),N=n("q1tI"),O=n.n(N),x=n("O+tL"),A=n("K0ru"),w=n("kIQV"),S=(n("maIC"),n("x6zz")),j=(n("i9wh"),Object(C.observer)((o=r=function(e){function t(){var e,n;s()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=p()(this,(e=m()(t)).call.apply(e,[this].concat(r))),E()(h()(n),"CACHE",{}),E()(h()(n),"handleSnapshot",function(e){var t=n.props.model.effects().map(function(e){return e.toJSON()});JSON.stringify(t)===JSON.stringify(n.CACHE.effects)&&JSON.stringify(e.conditions)===n.CACHE.conditions&&n.CACHE.value===n.props.model.value()||(n.CACHE.conditions=JSON.stringify(e.conditions),n.CACHE.effects=t,n.CACHE.value=n.props.model.value(),n.forceUpdate())}),E()(h()(n),"handleChangeName",function(e){var t=n.props.model.id;n.props.model.set({name:e}),n.props.model.character.effects().filter(function(e){return e.targetId===t}).forEach(function(e){e.set({targetId:""}),e.set({targetId:n.props.model.id})})}),E()(h()(n),"handleCommitName",function(){return""===n.props.model.name&&n.props.onDelete(n.props.model)}),E()(h()(n),"handleChangeValue",function(e){var t=String(e).replace(/[^a-z0-9+*()\-\/, ]/gi,"");Number.isNaN(Number(e))||(t=Object(w.a)(Number(e)||"",{max:999,min:-99})),n.props.model.set({raw:t})}),E()(h()(n),"handleCommitValue",function(){""===String(n.props.model.raw)&&n.props.model.set({raw:0})}),E()(h()(n),"handleValueKeyDown",function(e){var t=e.key,a=n.props.model;if(!a.isComputed)switch(t){case"ArrowUp":a.set({raw:a.value()+1});break;case"ArrowDown":a.set({raw:a.value()-1})}}),n}return g()(t,e),l()(t,[{key:"componentDidMount",value:function(){this.onSnapshotDisposer=Object(b.onSnapshot)(this.props.model.character,this.handleSnapshot)}},{key:"componentWillUnmount",value:function(){this.onSnapshotDisposer()}},{key:"render",value:function(){var e=this.props,t=e.model,n=e.rating,a=t.modifiedValue(),r=t.value(),o=["attribute","as-".concat(n?"rating":"numeric"),"".concat(t.isComputed?"is":"not","-computed")].join(" "),i=t.modifier(),s=["modifier",i>0&&"positive",i<0&&"negative",0===i&&"zero"].filter(Boolean).join(" ");return O.a.createElement("div",{className:o},O.a.createElement(x.a,{className:"name",onChange:this.handleChangeName,onEditEnd:this.handleCommitName,value:t.name}),O.a.createElement(x.a,{className:"value rating",onChange:this.handleChangeValue,onEditEnd:this.handleCommitValue,onKeyDown:this.handleValueKeyDown,readOnlyValue:O.a.createElement(A.a,{allowExcess:!0,current:a,maximum:r}),type:"text",value:t.raw}),O.a.createElement(x.a,{className:"value numeric",onChange:this.handleChangeValue,onEditEnd:this.handleCommitValue,onKeyDown:this.handleValueKeyDown,readOnlyValue:r,type:"text",value:t.raw}),0!==t.effects().length&&O.a.createElement("div",{className:s,title:t.modifierText()},a))}}]),t}(N.Component),E()(r,"defaultProps",{model:{},onDelete:S.a,rating:!1}),E()(r,"sortOptions",[{display:"icon-sort-name-asc",getter:function(e){return e.name}},{display:"icon-sort-value-asc",getter:function(e){return e.modifiedValue()}}]),a=o))||a);t.a=j},maIC:function(e,t,n){"use strict";var a=n("yZWr"),r=n.n(a).a.create();r.import(n("Wbaz")),r.import(n("lFTT")),r.import(n("NEdZ")),r.import(n("EjzI")),r.import(n("rVKH")),r.import(n("QllX")),r.import(n("gV/b")),r.import(n("NU+P")),r.import(n("CaZ0")),r.import(n("N5iU")),r.import(n("O1N0")),r.import(n("BSwV")),r.import(n("itDh")),r.import(n("FC7u")),r.import(n("I5O3")),r.import(n("Z+cb")),r.import(n("R4H5")),r.import(n("ohYX")),r.import(n("ZS3Q")),t.a=r},mkTB:function(e,t,n){"use strict";var a=n("ubaz"),r=n.n(a),o=n("y9tM"),i=n.n(o),s=n("cNEE"),c=n.n(s),l=n("uqjs"),u=n("vQEy"),p=n("RtsE"),d=n("kcWH"),m=n("HcU2"),f=n("maIC"),h=function(e){var t=[],n=[];return f.a.parse(e).traverse(function(e){e.fn&&t.push(e.fn.name),"SymbolNode"!==e.type||n.includes(e.name)||t.includes(e.name)||n.push(e.name)}),n};t.a=l.types.compose(d.a,Object(u.a)(function(e){return e.modifiedValue()}),p.a,l.types.model({name:"New Attribute...",raw:l.types.optional(l.types.union(l.types.number,l.types.string),0)}).views(function(e){return{get character(){return Object(m.a)(e,function(e){return e.isCharacter})},get id(){return e.name.split(":").pop().trim().toLowerCase().replace(/[^a-z0-9]/gi,"")},get isComputed(){return"string"===typeof e.raw}}}).actions(function(e){var t=!1;return{effects:function(){return e.character?e.character.activeEffects().filter(function(t){return t.targetId===e.id}):[]},modifiedValue:function(){return(e.value()||0)+e.modifier()},modifier:function(){return f.a.sum(e.effects().map(function(e){return e.modifier}))},modifierText:function(){return e.effects().map(function(e){return"".concat(e.sourceName(),": ").concat(e.modifier)}).join(", ")},value:function(){if(!e.isComputed)return e.raw;if(null===e.character)return 0;if(t)return 0;t=!0;var n=0;try{var a=h(e.raw).reduce(function(t,n){var a=e.character.attributes.findBy("id",n);return Object.assign(t,c()({},n,a?a.modifiedValue():0))},{});n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{defaultSymbolValue:0},a=r()({},t);return h(e).forEach(function(e){void 0===a[e]&&(a[e]=n.defaultSymbolValue)}),f.a.eval(e,a)}(e.raw,a)}catch(o){0,n=0}return t=!1,n}}}).preProcessSnapshot(function(e){var t=e.value,n=i()(e,["value"]);return r()({},n,{raw:t})}).postProcessSnapshot(function(e){var t=e.raw,n=i()(e,["raw"]);return r()({},n,{value:t})})).named("Attribute")},p0Pd:function(e,t,n){"use strict";var a,r,o,i=n("Nogc"),s=n.n(i),c=n("WEGp"),l=n.n(c),u=n("Amxr"),p=n.n(u),d=n("o1mq"),m=n.n(d),f=n("cEnY"),h=n.n(f),v=n("itEV"),g=n.n(v),y=n("cNEE"),E=n.n(y),C=n("NbXW"),b=n("q1tI"),N=n.n(b),O=n("O+tL"),x=n("a4BR"),A=n("I7n6"),w=n("t524"),S=n("HyL6"),j=n("x6zz"),k=(n("H/3x"),Object(w.a)(S.a,x.a,{className:"effect-list"})),D=Object(C.observer)((o=r=function(e){function t(){var e,n;s()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=p()(this,(e=m()(t)).call.apply(e,[this].concat(r))),E()(h()(n),"handleChangeDescription",function(e){return n.props.model.set({description:e})}),E()(h()(n),"handleChangeName",function(e){return n.props.model.set({name:e})}),E()(h()(n),"handleCommitName",function(){return""===n.props.model.name&&n.props.onDelete(n.props.model)}),E()(h()(n),"handleToggleEquipped",function(){return n.props.model.set({equipped:!n.props.model.equipped})}),n}return g()(t,e),l()(t,[{key:"render",value:function(){var e=this,t=this.props.model,n=t.description,a=t.hash,r=t.name,o=t.effects,i=t.equipped;return N.a.createElement("div",{className:"item ".concat(i?"":"un","equipped")},N.a.createElement(O.a,{className:"equipped",onChange:this.handleToggleEquipped,value:i}),N.a.createElement(O.a,{className:"name",onChange:this.handleChangeName,onEditEnd:this.handleCommitName,value:r}),N.a.createElement(A.a,{onToggle:function(t){return e.props.onToggleExpanded(a,t)}},N.a.createElement(O.a,{className:"description",type:"multiline",onChange:this.handleChangeDescription,placeholder:"Description...",value:n}),N.a.createElement(k,{collection:o,title:"Effects"})))}}]),t}(b.Component),E()(r,"defaultProps",{model:{},onDelete:j.a,onToggleExpanded:j.a}),E()(r,"sortOptions",[{display:"icon-sort-name-asc",getter:function(e){return e.name}},{display:"icon-backpack",getter:function(e){return[!e.equipped,e.name]}}]),a=o))||a;t.a=D},sxfZ:function(e,t,n){},t524:function(e,t,n){"use strict";var a=n("b696"),r=n.n(a),o=n("cFUw"),i=n.n(o),s=n("Nogc"),c=n.n(s),l=n("WEGp"),u=n.n(l),p=n("Amxr"),d=n.n(p),m=n("o1mq"),f=n.n(m),h=n("cEnY"),v=n.n(h),g=n("itEV"),y=n.n(g),E=n("cNEE"),C=n.n(E),b=n("ubaz"),N=n.n(b),O=n("uqjs"),x=n("q1tI"),A=n.n(x),w=n("U/5H"),S=n.n(w),j=n("1T+A"),k=n("YFLu");var D=n("x6zz"),I=n("DODz"),T=(n("e8LY"),"Uncategorized"),z=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,a){var r=e(n),o=e(a);if(Array.isArray(r)&&Array.isArray(o)){for(var i=0;i<r.length;i+=1)if(r[i]!==o[i])return t?o[i]<r[i]?-1:1:r[i]<o[i]?-1:1;return 0}if("number"===typeof r&&"number"===typeof o)return r===o?0:t?o<r?-1:1:r<o?-1:1;var s=String(r),c=String(o);return t?c.localeCompare(s):s.localeCompare(c)}};t.a=function(e,t){var n,a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=(t.sortOptions||[]).map(function(e){return N()({},e,{comparitor:z(e.getter),display:"string"===typeof e.display?A.a.createElement("span",{className:e.display}):e.display})});return a=n=function(n){function a(){var n,o;c()(this,a);for(var l=arguments.length,u=new Array(l),p=0;p<l;p++)u[p]=arguments[p];return o=d()(this,(n=f()(a)).call.apply(n,[this].concat(u))),C()(v()(o),"Component",t),C()(v()(o),"Model",e),C()(v()(o),"container",A.a.createRef()),C()(v()(o),"expandedItems",{}),C()(v()(o),"filterEl",A.a.createRef()),C()(v()(o),"onDataSnapshotDisposer",D.a),C()(v()(o),"onLayoutSnapshotDisposer",D.a),C()(v()(o),"sortable",null),C()(v()(o),"state",{expanded:{},sortOption:null}),C()(v()(o),"getCategoryItems",function(e,t){return t&&t!==T?e.filter(function(e){return(e.categories||[]).includes(t)}):e.filter(function(e){return 0===(e.categories||[]).length})}),C()(v()(o),"handleAdd",function(){o.props.collection.push(e.create({})),o.forceUpdate()}),C()(v()(o),"handleDelete",function(e){var t=e.target,n=parseInt(t.parentNode.getAttribute("data-index"),10);o.props.collection.deleteAt(n),o.forceUpdate()}),C()(v()(o),"handleFilterChange",function(e){var t=e.target;return o.props.layout.set({filter:t.value})}),C()(v()(o),"handleSort",function(){return o.props.collection.sortBy("name")}),C()(v()(o),"handleSortChange",function(e){var t=o.state.sortOption;o.setState({sortOption:t===e?null:e},function(){o.props.layout.set({sortOption:t===e?void 0:s.indexOf(e)})})}),C()(v()(o),"handleToggleCategorized",function(){o.props.layout.set({categorize:!o.props.layout.categorize})}),C()(v()(o),"handleToggleExpanded",function(e,t){o.setState(function(n){return N()({},n,{expanded:N()({},n.expanded,C()({},e,t))})})}),C()(v()(o),"renderCategoryWidget",function(){var e=o.props.layout,t=v()(o).categories;if(!t.length)return null;var n=["categorize icon-categorize",e.categorize?"on":"off"].join(" ");return A.a.createElement(A.a.Fragment,null,A.a.createElement("div",i()({className:n},{onClick:o.handleToggleCategorized})),A.a.createElement("select",{className:"filter",onChange:o.handleFilterChange,ref:o.filterEl,tabIndex:-1,value:e.filter},A.a.createElement("option",{value:""},"All"),t.map(function(e){return A.a.createElement("option",{key:e,value:e},e)})))}),C()(v()(o),"renderSortWidget",function(){return o.props.sortable&&s.length?A.a.createElement(j.a,{className:"sorter",onChange:o.handleSortChange,options:s,selected:o.state.sortOption}):null}),C()(v()(o),"renderCategory",function(e,t){var n=o.props.columns,a=o.getCategoryItems(t,e);if(!a.length)return null;var i=a.map(function(e){return e.categoryValue}),s=Math.min.apply(Math,r()(i)),c=Math.max.apply(Math,r()(i));return A.a.createElement("div",{key:e,className:"category"},A.a.createElement("div",{className:"details"},A.a.createElement("div",{className:"title"},"Category: ",e," (",a.length,")"),!Number.isNaN(s)&&!Number.isNaN(c)&&A.a.createElement("div",{className:"range"},s,"-",c)),A.a.createElement("div",{className:"category-items",style:{columns:n}},a.map(o.renderItem)))}),C()(v()(o),"renderItem",function(e){var n=o.props,a=n.collection,r=n.layout,i=n.sortable,s=o.state,c=s.expanded,l=s.sortOption,u=i&&null!==l,p=r&&r.categorize;return A.a.createElement("div",{className:"list-item-wrapper ".concat(c[e.hash]?"expanded":"").trim(),"data-index":a.indexOf(e),key:e.hash},!u&&!p&&A.a.createElement("div",{className:"drag-handle"}),A.a.createElement(t,{model:e,onDelete:a.delete,onToggleExpanded:o.handleToggleExpanded}),A.a.createElement("button",{className:"icon-remove",onClick:o.handleDelete}))}),o}return y()(a,n),u()(a,[{key:"componentDidMount",value:function(){var e=this;if(this.props.layout){var t=this.props.layout.sortOption;s.length&&void 0!==t&&this.setState({sortOption:s[t]||null}),this.onLayoutSnapshotDisposer=Object(O.onSnapshot)(this.props.layout,function(e,t,n){var a,r=this;return function(){for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];var c=n&&!a;clearTimeout(a),a=setTimeout(function(){a=null,n||e.apply(r,i)},t),c&&e.apply(r,i)}}(function(){return e.forceUpdate()},100,!0))}var n=this.props.sortable;n&&(this.sortable=S.a.create(this.container.current,{disabled:!n,draggable:".list-item-wrapper",handle:".drag-handle",onEnd:function(){e.container.current.classList.remove("dragging"),e.props.collection.replace(r()(e.container.current.querySelectorAll(".list-item-wrapper")).map(function(e){return parseInt(e.getAttribute("data-index"),10)}).map(function(t){return e.props.collection.at(t)}))},onStart:function(){return e.container.current.classList.add("dragging")}})),this.onDataSnapshotDisposer=Object(O.onSnapshot)(this.props.collection,function(){return e.forceUpdate()})}},{key:"componentWillReceiveProps",value:function(){this.sortable&&this.sortable.option("disabled",!this.props.sortable)}},{key:"componentWillUnmount",value:function(){this.onDataSnapshotDisposer(),this.onLayoutSnapshotDisposer()}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=void 0===n?"":n,r=t.columns,o=t.layout,i=void 0===o?{}:o,s=t.title,c=this.state.sortOption,l=this.categories,u=this.props.collection.asArray;null!==c&&(u=u.sort(c.comparitor));var p=Boolean(l.length);p&&i.filter&&(u=this.getCategoryItems(u,i.filter),l=[i.filter]);var d={columns:i.categorize?1:r};return A.a.createElement("div",{className:"list ".concat(a).trim(),ref:this.container,style:d},A.a.createElement("div",{className:"title-bar"},this.renderSortWidget(),this.renderCategoryWidget(),A.a.createElement("div",{className:"text"},s),A.a.createElement("button",{className:"add icon-add",onClick:this.handleAdd})),p&&i.categorize?l.map(function(t){return e.renderCategory(t,u)}):u.map(this.renderItem))}},{key:"categories",get:function(){var e=this.props.collection.asArray.reduce(function(e,t){return e.concat(t.categories||[])},[]);return e.length?Object(I.a)(e.filter(function(e){return e!==T})).sort().concat(T):[]}}]),a}(A.a.Component),C()(n,"defaultProps",N()({className:"",collection:Object(k.a)(e).create([]),columns:1,layout:void 0,sortable:!0,title:o.title||""},o)),a}},tqhn:function(e,t,n){"use strict";var a,r,o,i,s,c=n("cFUw"),l=n.n(c),u=n("Nogc"),p=n.n(u),d=n("WEGp"),m=n.n(d),f=n("Amxr"),h=n.n(f),v=n("o1mq"),g=n.n(v),y=n("cEnY"),E=n.n(y),C=n("itEV"),b=n.n(C),N=n("cNEE"),O=n.n(N),x=n("NbXW"),A=n("uqjs"),w=n("q1tI"),S=n.n(w),j=n("mD9I"),k=n("Ut7+"),D=n("a4BR"),I=n("p0Pd"),T=n("wryK"),z=n("b/z0"),q=n("8qIS"),V=n("M/4f"),W={Attribute:j.a,Descriptor:k.a,Effect:D.a,Item:I.a,Resource:T.a,Skill:z.a,Spell:q.a,Trait:V.a},R=n("O+tL"),M=n("I7n6"),B=(n("Zsyy"),Object(x.observer)((r=a=function(e){function t(){var e,n;p()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=h()(this,(e=g()(t)).call.apply(e,[this].concat(r))),O()(E()(n),"CACHE",{}),O()(E()(n),"handleSnapshot",function(){var e=n.props.model.availableConditions(),t=n.props.model.conditions.asArray;JSON.stringify(e)===JSON.stringify(n.CACHE.availableConditions)&&JSON.stringify(t)===JSON.stringify(n.CACHE.conditions)||(n.CACHE.availableConditions=e,n.CACHE.conditions=t,n.forceUpdate())}),O()(E()(n),"handleCheckbox",function(e,t){var a=n.props.model.conditions;t&&!a.includes(e)?a.push(e):"function"===typeof a.delete?a.delete(e):a.splice(a.indexOf(e),1),n.forceUpdate()}),O()(E()(n),"renderCondition",function(e){var t=n.props.model.conditions.includes(e);return S.a.createElement("div",{key:e,className:"condition ".concat(t?"current":"available")},S.a.createElement(R.a,{className:"current",onChange:function(t){return n.handleCheckbox(e,t)},value:t}),S.a.createElement("div",{className:"name"},e))}),n}return b()(t,e),m()(t,[{key:"componentDidMount",value:function(){this.onSnapshotDisposer=Object(A.onSnapshot)(this.props.model,this.handleSnapshot)}},{key:"componentWillUnmount",value:function(){this.onSnapshotDisposer()}},{key:"render",value:function(){return S.a.createElement("div",{className:"conditions"},S.a.createElement(M.a,null,this.props.model.availableConditions().map(this.renderCondition)))}}]),t}(w.Component),O()(a,"defaultProps",{model:{}}),r))),H=n("x6zz"),U=(n("kvEc"),function(e){function t(){var e,n;p()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=h()(this,(e=g()(t)).call.apply(e,[this].concat(r))),O()(E()(n),"titleBar",S.a.createRef()),O()(E()(n),"onSnapshotDisposer",H.a),O()(E()(n),"snapshot",null),O()(E()(n),"handleChangeTitle",function(e){return n.props.model.set({title:e})}),n}return b()(t,e),m()(t,[{key:"componentDidMount",value:function(){var e=this;this.onSnapshotDisposer=Object(A.onSnapshot)(this.props.model,function(t){var n=JSON.stringify(t);e.snapshot!==n&&(e.snapshot=n,e.forceUpdate())}),this.forceUpdate()}},{key:"componentWillUnmount",value:function(){this.onSnapshotDisposer()}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.parentColumns,a=this.props.model,r=a.colSpan,o=a.title;return S.a.createElement("div",{className:"layout",style:{width:"calc(100%/".concat(n,"*").concat(r,")")}},void 0===o?t:S.a.createElement(S.a.Fragment,null,S.a.createElement("div",{className:"title-bar",ref:this.titleBar},S.a.createElement(R.a,{className:"title",onChange:this.handleChangeTitle,placeholder:"Section Title",value:o})),S.a.createElement(M.a,{expandByDefault:!0,omitItemWrapper:!0,toggleButtonParent:this.titleBar.current},t)))}}]),t}(w.Component)),L=n("t524"),K=n("mkTB"),P=n("AD/C"),F=n("HyL6"),Y=n("Afd3"),J=n("ZEI3"),Z=n("vovD"),Q=n("JCrA"),G=n("ZwSi"),X={Attribute:K.a,Descriptor:P.a,Effect:F.a,Item:Y.a,Resource:J.a,Skill:Z.a,Spell:Q.a,Trait:G.a},_=(n("HYkr"),Object(x.observer)((s=i=function(e){function t(e){var n;return p()(this,t),n=h()(this,g()(t).call(this,e)),O()(E()(n),"state",{size:"large"}),O()(E()(n),"handleWindowResize",function(){var e="large";window.matchMedia("(min-width: 5in) and (max-width: 7.5in)").matches?e="medium":window.matchMedia("(max-width: 5in)").matches&&(e="small"),e!==n.state.size&&n.setState({size:e})}),O()(E()(n),"renderComponent",function(e,t,a){if(t.type){var r=t.title,o=t.type.toLowerCase(),i=Object(L.a)(X[t.type],W[t.type],{className:"".concat(o,"-list")}),s=n.props.character["".concat(o,"s")];return S.a.createElement(i,l()({key:a,layout:t,title:r},{collection:s,columns:t.columns}))}return S.a.createElement(U,{key:t.hash,model:t,parentColumns:e.columns},t.children.map(function(e,a){return n.renderComponent(t,e,a)}))}),n.onCharacterSnapshotDisposer=Object(A.onSnapshot)(n.props.character,function(e){n.props.onChange(e,n.props.layout.toJSON(),E()(n))}),n.onLayoutSnapshotDisposer=Object(A.onSnapshot)(n.props.layout,function(e){n.props.onChange(n.props.character.toJSON(),e,E()(n))}),window.addEventListener("resize",n.handleWindowResize),n}return b()(t,e),m()(t,[{key:"componentDidMount",value:function(){this.handleWindowResize(),this.props.onMount(this)}},{key:"componentWillUnmount",value:function(){this.onCharacterSnapshotDisposer(),this.onLayoutSnapshotDisposer()}},{key:"render",value:function(){var e=this.props,t=e.character,n=e.layout,a=this.state.size;return S.a.createElement("div",{className:"sheetforge sheet ".concat(a)},S.a.createElement(B,{model:t}),n.children.map(this.renderComponent.bind(null,n)))}}]),t}(S.a.Component),O()(i,"defaultProps",{character:{},onChange:H.a,onMount:H.a}),o=s))||o);t.a=_},ulyj:function(e,t,n){},vQEy:function(e,t,n){"use strict";var a=n("uqjs"),r=n("x6zz"),o=n("DODz");t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.a;return a.types.model({}).volatile(function(){return{isICategorizable:!0}}).views(function(t){function n(){if(!t.name)return[];var e=t.name.split(":");return e.pop(),Object(o.a)(e.map(function(e){return e.trim()}).filter(Boolean)).sort()}var a=t.name,r=n();return{get categories(){return t.name&&t.name!==a?(a=t.name,r=n()):r},get categoryValue(){return e(t)}}})}},vovD:function(e,t,n){"use strict";var a=n("uqjs"),r=n("vQEy"),o=n("RtsE"),i=n("kcWH");t.a=a.types.compose(i.a,Object(r.a)(function(e){return e.mastery}),o.a,a.types.model({mastery:1,name:"New Skill...",theory:0}).views(function(e){return{get isComplex(){return 0!==e.theory},get isSimple(){return 0===e.theory}}})).named("Skill")},wryK:function(e,t,n){"use strict";var a,r,o,i=n("Nogc"),s=n.n(i),c=n("WEGp"),l=n.n(c),u=n("Amxr"),p=n.n(u),d=n("o1mq"),m=n.n(d),f=n("cEnY"),h=n.n(f),v=n("itEV"),g=n.n(v),y=n("cNEE"),E=n.n(y),C=n("NbXW"),b=n("q1tI"),N=n.n(b),O=n("O+tL"),x=n("K0ru"),A=n("x6zz"),w=(n("ulyj"),Object(C.observer)((o=r=function(e){function t(){var e,n;s()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=p()(this,(e=m()(t)).call.apply(e,[this].concat(r))),E()(h()(n),"handleChangeCurrent",function(e){return n.props.model.set({current:e})}),E()(h()(n),"handleChangeMaximum",function(e){return n.props.model.set({maximum:e})}),E()(h()(n),"handleChangeName",function(e){return n.props.model.set({name:e})}),E()(h()(n),"handleCommitName",function(){return""===n.props.model.name&&n.props.onDelete(n.props.model)}),n}return g()(t,e),l()(t,[{key:"render",value:function(){var e=this.props.model,t=e.current,n=e.name,a=e.maximum;return N.a.createElement("div",{className:"resource"},N.a.createElement("div",{className:"display"},N.a.createElement(O.a,{className:"name",onChange:this.handleChangeName,onEditEnd:this.handleCommitName,value:n}),N.a.createElement(O.a,{className:"current",max:999,min:0,onChange:this.handleChangeCurrent,value:t}),"of",N.a.createElement(O.a,{className:"maximum",max:999,min:0,onChange:this.handleChangeMaximum,value:a})),N.a.createElement(x.a,{allowExcess:!0,current:t,maximum:a,onChange:this.handleChangeCurrent}))}}]),t}(b.Component),E()(r,"defaultProps",{model:{},onDelete:A.a}),E()(r,"sortOptions",[{display:"icon-sort-name-asc",getter:function(e){return e.name}}]),a=o))||a);t.a=w},x6zz:function(e,t,n){"use strict";t.a=function(){}},"y+pi":function(e,t,n){},"zZb/":function(e,t,n){"use strict";var a=n("uqjs"),r=n("YFLu"),o=n("RtsE"),i=n("kcWH"),s=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return a.types.optional(a.types.refinement(a.types.number,function(n){return void 0===n||n>=e&&n<=t}),n)},c=a.types.compose(i.a,o.a,a.types.model({categorize:!1,children:Object(r.a)(a.types.late(function(){return c})),colSpan:s(1,4,1),columns:s(1,4,1),filter:a.types.maybe(a.types.string),sortOption:a.types.maybe(a.types.number),title:a.types.union(a.types.maybe(a.types.string),a.types.literal(!1)),type:a.types.maybe(a.types.string)})).named("Layout");t.a=c}},[["05fm",18,0]]])});
//# sourceMappingURL=production.4de42bb53ba2697eeb19.js.map