{"version":3,"sources":["webpack://sheetforge/./source/components/MultiToggle/MultiToggle.js","webpack://sheetforge/./source/components/Expandable/Expandable.js","webpack://sheetforge/./source/components/Trait/Trait.js","webpack://sheetforge/./source/components/Trait/Trait.mdx","webpack://sheetforge/./source/components/List/List.js","webpack://sheetforge/./source/utilities/debounce.js"],"names":["MultiToggle","selected","_ref","target","index","_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default","children","indexOf","_this","props","options","undefined","onChange","setState","_this2","this","_this$props","className","state","react__WEBPACK_IMPORTED_MODULE_8___default","a","createElement","concat","trim","map","option","key","onClick","handleOptionClick","display","Component","_utilities_noop__WEBPACK_IMPORTED_MODULE_9__","Expandable","expanded","React","classList","expander","current","parentElement","onToggle","omitItemWrapper","expandByDefault","add","_this$props2","toggleButtonParent","toggleButtonText","toggleState","buttonProps","handleToggle","ref","toggleButton","_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default","text","react__WEBPACK_IMPORTED_MODULE_8__","createPortal","renderExpanded","_utilities_noop__WEBPACK_IMPORTED_MODULE_10__","EffectList","ListOf","_models_Effect__WEBPACK_IMPORTED_MODULE_13__","_components_Effect__WEBPACK_IMPORTED_MODULE_10__","Trait","observer","name","model","set","value","onDelete","_components_Editable__WEBPACK_IMPORTED_MODULE_9__","handleChangeName","onEditEnd","handleCommitName","max","min","handleChangeValue","_components_Expandable__WEBPACK_IMPORTED_MODULE_11__","onToggleExpanded","hash","collection","effects","title","_utilities_noop__WEBPACK_IMPORTED_MODULE_14__","noop","getter","__webpack_exports__","MDXContent","_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default","_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default","_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default","call","layout","components","_babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0___default","react__WEBPACK_IMPORTED_MODULE_6___default","_mdx_js_tag__WEBPACK_IMPORTED_MODULE_7__","id","docz__WEBPACK_IMPORTED_MODULE_8__","__position","__code","__scope","Character","TraitModel","character","create","attributes","traits","condition","modifier","modifies","Fragment","_components_Trait__WEBPACK_IMPORTED_MODULE_10__","at","NO_CATEGORY","buildSorter","reversed","arguments","length","A","B","b","Array","i","aString","String","bString","Model","_class","_temp","sortOptions","sorter","objectSpread_default","comparitor","react_default","_React$Component","List","_getPrototypeOf2","classCallCheck_default","_len","args","_key","possibleConstructorReturn_default","getPrototypeOf_default","apply","defineProperty_default","assertThisInitialized_default","createRef","sortOption","items","category","filter","item","includes","push","forceUpdate","parseInt","deleteAt","_ref2","sortBy","clicked","categorize","categories","join","extends_default","handleToggleCategorized","handleFilterChange","filterEl","tabIndex","sortable","handleSortChange","data","columns","categoryItems","getCategoryItems","values","categoryValue","Math","toConsumableArray_default","Number","style","renderItem","_this$state","sorted","categorized","data-index","delete","handleToggleExpanded","handleDelete","inherits_default","createClass_default","sortOptionIndex","onLayoutSnapshotDisposer","onSnapshot","func","wait","immediate","timeout","callNow","clearTimeout","setTimeout","debounce","Sortable_default","container","disabled","draggable","handle","onEnd","remove","replace","querySelectorAll","targetIndex","onStart","onDataSnapshotDisposer","_this3","_this$props2$classNam","_this$props2$layout","asArray","hasCategories","Boolean","listStyle","renderSortWidget","renderCategoryWidget","handleAdd","renderCategory","get","list","reduce","all","next","Object","unique","sort","CollectionOf"],"mappings":"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","file":"static/js/components-trait-trait.3537b792.js","sourcesContent":["import React, { Component } from 'react'\nimport noop from '@/utilities/noop'\nimport './MultiToggle.scss'\n\nexport default class MultiToggle extends Component {\n  static defaultProps = {\n    className: '',\n    onChange: noop,\n    options: [],\n    selected: undefined,\n  }\n\n  state = { selected: null }\n\n  handleOptionClick = ({ target }) => {\n    const index = [...target.parentElement.children].indexOf(target)\n    const selected = this.props.options[index]\n\n    if (this.props.selected !== undefined) {\n      this.props.onChange(selected)\n    } else {\n      this.setState({ selected })\n    }\n  }\n\n  render() {\n    const { className, options } = this.props\n    const selected = this.props.selected !== undefined\n      ? this.props.selected\n      : this.state.selected\n\n    return (\n      <div className={`multi-toggle ${className}`.trim()}>\n        {options.map((option, key) => (\n          <div\n            className={`toggle ${option === selected ? 'on' : 'off'}`.trim()}\n            key={key}\n            onClick={this.handleOptionClick}\n          >\n            {option.display}\n          </div>\n        ))}\n      </div>\n    )\n  }\n}\n","import React, { Component, Fragment } from 'react'\nimport { createPortal } from 'react-dom'\nimport noop from '@/utilities/noop'\nimport './Expandable.scss'\n\nexport default class Expandable extends Component {\n  static defaultProps = {\n    expandByDefault: false,\n    omitItemWrapper: false,\n    onToggle: noop,\n    toggleButtonParent: null,\n    toggleButtonText: '',\n  }\n\n  state = {\n    expanded: false,\n  }\n\n  expander = React.createRef()\n\n  componentWillMount() {\n    this.setState({ expanded: this.props.expandByDefault })\n  }\n  componentDidMount() {\n    this.expander.current.parentElement.classList.add('expandable-wrapper')\n  }\n\n  handleToggle = () => {\n    const { classList } = this.expander.current.parentElement\n    const { expanded } = this.state\n\n    // eslint-disable-next-line react/no-access-state-in-setstate\n    this.setState({ expanded: !expanded }, () => {\n      this.props.onToggle(!expanded)\n      classList[!expanded ? 'add' : 'remove']('expanded')\n    })\n  }\n\n  renderExpanded = () => {\n    const { children, omitItemWrapper } = this.props\n    return omitItemWrapper\n      ? children\n      : <div className=\"expandable\"> {children}</div>\n  }\n\n  render() {\n    const { toggleButtonParent, toggleButtonText } = this.props\n    const toggleState = this.state.expanded ? 'expanded' : 'collapsed'\n    const buttonProps = {\n      className: `expandable-toggle icon-${toggleState}`,\n      onClick: this.handleToggle,\n      ref: this.expander,\n    }\n\n    const toggleButton = <div {...buttonProps} text={toggleButtonText} />\n    return (\n      <Fragment>\n        {toggleButtonParent ? createPortal(toggleButton, toggleButtonParent) : toggleButton}\n        {this.state.expanded && this.renderExpanded()}\n      </Fragment>\n    )\n  }\n}\n","import { observer } from 'mobx-react'\nimport React, { Component } from 'react'\nimport Editable from '@/components/Editable'\nimport Effect from '@/components/Effect'\nimport Expandable from '@/components/Expandable'\nimport ListOf from '@/components/List'\nimport EffectModel from '@/models/Effect'\nimport noop from '@/utilities/noop'\nimport './Trait.scss'\n\nconst EffectList = ListOf(EffectModel, Effect)\n\n@observer class Trait extends Component {\n  static defaultProps = {\n    model: {},\n    onDelete: noop,\n    onToggleExpanded: noop,\n  }\n\n  static sortOptions = [{\n    display: 'icon-sort-name-asc',\n    getter: model => model.name,\n  }, {\n    display: 'icon-sort-value-asc',\n    getter: model => model.value,\n  }]\n\n  handleChangeName = name => this.props.model.set({ name })\n  handleChangeValue = value => this.props.model.set({ value })\n  handleCommitName = () => (this.props.model.name === '' && this.props.onDelete(this.props.model))\n\n  render() {\n    const { model } = this.props\n\n    return (\n      <div className=\"trait\">\n        <Editable\n          className=\"name\"\n          onChange={this.handleChangeName}\n          onEditEnd={this.handleCommitName}\n          value={model.name}\n        />\n        <Editable\n          className=\"value\"\n          max={999}\n          min={-99}\n          onChange={this.handleChangeValue}\n          value={model.value}\n        />\n        <Expandable onToggle={expanded => this.props.onToggleExpanded(model.hash, expanded)}>\n          <EffectList collection={model.effects} title=\"Effects\" />\n        </Expandable>\n      </div>\n    )\n  }\n}\n\nexport default Trait\n","\n  import React from 'react'\n  import { MDXTag } from '@mdx-js/tag'\n  import { Playground } from 'docz'\nimport Character from '@/models/Character'\nimport Trait from '@/components/Trait'\nimport TraitModel from '@/models/Trait'\n\nconst layoutProps = {\n  \n};\nexport default class MDXContent extends React.Component {\n  constructor(props) {\n    super(props)\n    this.layout = null\n  }\n  render() {\n    const { components, ...props } = this.props\n\n    return <MDXTag\n             name=\"wrapper\"\n             \n             components={components}>\n<MDXTag name=\"h2\" components={components} props={{\"id\":\"trait\"}}>{`Trait`}</MDXTag>\n<Playground __position={0} __code={'() => {\\n  const character = Character.create({\\n    attributes: [\\n      { name: \\'Strength\\', value: 2 },\\n      { name: \\'Dexterity\\', value: 4 },\\n      { name: \\'Perception\\', value: 3 },\\n    ],\\n    traits: [\\n      { name: \\'Magical Aptitude\\', value: 4 },\\n      {\\n        effects: [\\n          {\\n            condition: \\'Vision-based\\',\\n            modifier: -5,\\n            modifies: \\'Perception\\',\\n          },\\n        ],\\n        name: \\'Blind\\',\\n        value: -3,\\n      },\\n    ],\\n  })\\n  return (\\n    <>\\n      <Trait model={character.traits.at(0)} />\\n      <Trait model={character.traits.at(1)} />\\n    </>\\n  )\\n}'} __scope={{props: this ? this.props : props,Character,Trait,TraitModel}}>\n  {() => {\n    const character = Character.create({\n      attributes: [\n        { name: 'Strength', value: 2 },\n        { name: 'Dexterity', value: 4 },\n        { name: 'Perception', value: 3 },\n      ],\n      traits: [\n        { name: 'Magical Aptitude', value: 4 },\n        {\n          effects: [{\n            condition: 'Vision-based',\n            modifier: -5,\n            modifies: 'Perception',\n          }],\n          name: 'Blind',\n          value: -3,\n        },\n      ]\n    })\nreturn (<>\n  <Trait model={character.traits.at(0)} />\n  <Trait model={character.traits.at(1)} />\n</>)\n  }}\n</Playground>\n           </MDXTag>\n  }\n}\n  ","import { onSnapshot } from 'mobx-state-tree'\nimport React from 'react'\nimport Sortable from 'sortablejs'\nimport MultiToggle from '@/components/MultiToggle'\nimport CollectionOf from '@/models/generic/Collection'\nimport debounce from '@/utilities/debounce'\nimport noop from '@/utilities/noop'\nimport unique from '@/utilities/unique'\nimport './List.scss'\n\nconst NO_CATEGORY = 'Uncategorized'\n\nconst buildSorter = (getter, reversed = false) => (A, B) => {\n  const a = getter(A)\n  const b = getter(B)\n\n  if (Array.isArray(a) && Array.isArray(b)) {\n    for (let i = 0; i < a.length; i += 1) {\n      if (a[i] !== b[i]) {\n        if (reversed) return b[i] < a[i] ? -1 : 1\n        return a[i] < b[i] ? -1 : 1\n      }\n    }\n\n    return 0\n  }\n\n  if (typeof a === 'number' && typeof b === 'number') {\n    if (a === b) return 0\n    if (reversed) return b < a ? -1 : 1\n    return a < b ? -1 : 1\n  }\n\n  const aString = String(a)\n  const bString = String(b)\n\n  if (reversed) return bString.localeCompare(aString)\n  return aString.localeCompare(bString)\n}\n\nexport default (Model, Component, props = {}) => {\n  const sortOptions = (Component.sortOptions || []).map(sorter => ({\n    ...sorter,\n    comparitor: buildSorter(sorter.getter),\n    display: typeof sorter.display === 'string'\n      ? <span className={sorter.display} />\n      : sorter.display,\n  }))\n\n  return class List extends React.Component {\n    static defaultProps = {\n      className: '',\n      collection: CollectionOf(Model).create([]),\n      columns: 1,\n      layout: undefined,\n      sortable: true,\n      title: props.title || '',\n      ...props,\n    }\n\n    Component = Component\n    Model = Model\n\n    container = React.createRef()\n    expandedItems = {}\n    filterEl = React.createRef()\n    onDataSnapshotDisposer = noop\n    onLayoutSnapshotDisposer = noop\n    sortable = null\n    state = {\n      expanded: {},\n      sortOption: null,\n    }\n\n    componentDidMount() {\n      if (this.props.layout) {\n        const { sortOption: sortOptionIndex } = this.props.layout\n        if (sortOptions.length && sortOptionIndex !== undefined) {\n          this.setState({ sortOption: sortOptions[sortOptionIndex] || null })\n        }\n        this.onLayoutSnapshotDisposer = onSnapshot(this.props.layout,\n          debounce(() => this.forceUpdate(), 100, true)\n        )\n      }\n\n      const { sortable } = this.props\n      if (sortable) {\n        this.sortable = Sortable.create(this.container.current, {\n          disabled: !sortable,\n          draggable: '.list-item-wrapper',\n          handle: '.drag-handle',\n          onEnd: () => {\n            this.container.current.classList.remove('dragging')\n            this.props.collection.replace(\n              [...this.container.current.querySelectorAll('.list-item-wrapper')]\n                .map(item => parseInt(item.getAttribute('data-index'), 10))\n                .map(targetIndex => this.props.collection.at(targetIndex))\n            )\n          },\n          onStart: () => this.container.current.classList.add('dragging'),\n        })\n      }\n      this.onDataSnapshotDisposer = onSnapshot(this.props.collection, () => this.forceUpdate())\n    }\n    componentWillReceiveProps() {\n      if (this.sortable) this.sortable.option('disabled', !this.props.sortable)\n    }\n    componentWillUnmount() {\n      this.onDataSnapshotDisposer()\n      this.onLayoutSnapshotDisposer()\n    }\n\n    get categories() {\n      const list = this.props.collection.asArray.reduce((all, next) => (\n        all.concat(next.categories || [])\n      ), [])\n\n\n      if (!list.length) return []\n      return unique(list.filter(item => item !== NO_CATEGORY)).sort().concat(NO_CATEGORY)\n    }\n\n    getCategoryItems = (items, category) => (\n      (category && category !== NO_CATEGORY)\n        ? items.filter(item => (item.categories || []).includes(category))\n        : items.filter(item => (item.categories || []).length === 0)\n    )\n\n    handleAdd = () => {\n      this.props.collection.push(Model.create({}))\n      this.forceUpdate()\n    }\n    handleDelete = ({ target }) => {\n      const index = parseInt(target.parentNode.getAttribute('data-index'), 10)\n      this.props.collection.deleteAt(index)\n      this.forceUpdate()\n    }\n    handleFilterChange = ({ target }) => this.props.layout.set({ filter: target.value })\n    handleSort = () => this.props.collection.sortBy('name')\n    handleSortChange = (clicked) => {\n      const { sortOption: current } = this.state\n      this.setState({ sortOption: current === clicked ? null : clicked }, () => {\n        this.props.layout.set({\n          sortOption: current === clicked ? undefined : sortOptions.indexOf(clicked),\n        })\n      })\n    }\n    handleToggleCategorized = () => {\n      this.props.layout.set({ categorize: !this.props.layout.categorize })\n    }\n    handleToggleExpanded = (hash, expanded) => {\n      this.setState(state => ({\n        ...state,\n        expanded: { ...state.expanded, [hash]: expanded },\n      }))\n    }\n\n    renderCategoryWidget = () => {\n      const { layout } = this.props\n      const { categories } = this\n      if (!categories.length) return null\n\n      const className = [\n        'categorize icon-categorize',\n        layout.categorize ? 'on' : 'off',\n      ].join(' ')\n\n      return <>\n        <div {...{ className }} onClick={this.handleToggleCategorized} />\n        <select\n          className=\"filter\"\n          onChange={this.handleFilterChange}\n          ref={this.filterEl}\n          tabIndex={-1}\n          value={layout.filter}\n        >\n          <option value=\"\">All</option>\n          {categories.map(name => <option key={name} value={name}>{name}</option>)}\n        </select>\n      </>\n    }\n    renderSortWidget = () => {\n      if (!this.props.sortable) return null\n      if (!sortOptions.length) return null\n\n      return (\n        <MultiToggle\n          className=\"sorter\"\n          onChange={this.handleSortChange}\n          options={sortOptions}\n          selected={this.state.sortOption}\n        />\n      )\n    }\n    renderCategory = (category, data) => {\n      const { columns } = this.props\n      const categoryItems = this.getCategoryItems(data, category)\n      if (!categoryItems.length) return null\n\n      const values = categoryItems.map(item => item.categoryValue)\n      const min = Math.min(...values)\n      const max = Math.max(...values)\n\n      return (\n        <div key={category} className=\"category\">\n          <div className=\"details\">\n            <div className=\"title\">Category: {category} ({categoryItems.length})</div>\n            {(!Number.isNaN(min) && !Number.isNaN(max)) && (\n              <div className=\"range\">{min}-{max}</div>\n            )}\n          </div>\n          <div className=\"category-items\" style={{ columns }}>\n            {categoryItems.map(this.renderItem)}\n          </div>\n        </div>\n      )\n    }\n    renderItem = (model) => {\n      const { collection, layout, sortable } = this.props\n      const { expanded, sortOption } = this.state\n      const sorted = sortable && sortOption !== null\n      const categorized = layout && layout.categorize\n\n      return (\n        <div\n          className={`list-item-wrapper ${expanded[model.hash] ? 'expanded' : ''}`.trim()}\n          data-index={collection.indexOf(model)}\n          key={model.hash}\n        >\n          {(!sorted && !categorized) && <div className=\"drag-handle\" />}\n          <Component\n            model={model}\n            onDelete={collection.delete}\n            onToggleExpanded={this.handleToggleExpanded}\n          />\n          <button className=\"icon-remove\" onClick={this.handleDelete} />\n        </div>\n      )\n    }\n\n    render() {\n      const { className = '', columns, layout = {}, title } = this.props\n      const { sortOption } = this.state\n      let { categories } = this\n      let data = this.props.collection.asArray\n      if (sortOption !== null) data = data.sort(sortOption.comparitor)\n\n      const hasCategories = Boolean(categories.length)\n      if (hasCategories && layout.filter) {\n        data = this.getCategoryItems(data, layout.filter)\n        categories = [layout.filter]\n      }\n      const listStyle = {\n        columns: layout.categorize ? 1 : columns,\n      }\n\n      return (\n        <div className={`list ${className}`.trim()} ref={this.container} style={listStyle}>\n          <div className=\"title-bar\">\n            {this.renderSortWidget()}\n            {this.renderCategoryWidget()}\n            <div className=\"text\">{title}</div>\n            <button className=\"add icon-add\" onClick={this.handleAdd} />\n          </div>\n          {(hasCategories && layout.categorize)\n            ? categories.map(category => this.renderCategory(category, data))\n            : data.map(this.renderItem)\n          }\n        </div>\n      )\n    }\n  }\n}\n","export default function debounce(func, wait, immediate) {\n  let timeout\n\n  return (...args) => {\n    const later = () => {\n      timeout = null\n      if (!immediate) func.apply(this, args)\n    }\n\n    const callNow = immediate && !timeout\n    clearTimeout(timeout)\n    timeout = setTimeout(later, wait)\n    if (callNow) func.apply(this, args)\n  }\n}\n"],"sourceRoot":""}