{"version":3,"sources":["webpack://sheetforge/./source/models/Descriptor/Descriptor.js","webpack://sheetforge/./source/models/Item/Item.js","webpack://sheetforge/./source/utilities/unique.js","webpack://sheetforge/./source/utilities/findParent.js","webpack://sheetforge/./source/models/Effect/Effect.js","webpack://sheetforge/./source/models/Character/Character.js","webpack://sheetforge/./source/utilities/flatten.js","webpack://sheetforge/./source/models/ResourceCost/ResourceCost.js","webpack://sheetforge/./source/models/Spell/Spell.js","webpack://sheetforge/./source/utilities/range.js","webpack://sheetforge/./source/components/Rating/Rating.js","webpack://sheetforge/./source/components/Editable/Editable.js","webpack://sheetforge/./source/utilities/splitObjectPath.js","webpack://sheetforge/./source/utilities/getPathValue.js","webpack://sheetforge/./source/models/generic/IEditable/IEditable.js","webpack://sheetforge/./source/utilities/setPathValue.js","webpack://sheetforge/./source/models/generic/Collection/Collection.js","webpack://sheetforge/./source/utilities/compareBy.js","webpack://sheetforge/./source/models/Resource/Resource.js","webpack://sheetforge/./source/components/Attribute/Attribute.mdx","webpack://sheetforge/./source/models/Trait/Trait.js","webpack://sheetforge/./source/utilities/bound.js","webpack://sheetforge/./source/utilities/hash.js","webpack://sheetforge/./source/models/generic/IIdentity/IIdentity.js","webpack://sheetforge/./source/components/Attribute/Attribute.js","webpack://sheetforge/./source/utilities/math/math.js","webpack://sheetforge/./source/utilities/math/toSymbols.js","webpack://sheetforge/./source/models/Attribute/Attribute.js","webpack://sheetforge/./source/utilities/math/calculate.js","webpack://sheetforge/./source/models/generic/ICategorizable/ICategorizable.js","webpack://sheetforge/./source/models/Skill/Skill.js","webpack://sheetforge/./source/utilities/noop.js"],"names":["mobx_state_tree__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_models_generic_ICategorizable__WEBPACK_IMPORTED_MODULE_1__","_models_generic_IEditable__WEBPACK_IMPORTED_MODULE_2__","_models_generic_IIdentity__WEBPACK_IMPORTED_MODULE_3__","__webpack_exports__","compose","ICategorizable","model","name","value","named","_models_Effect__WEBPACK_IMPORTED_MODULE_1__","_models_generic_Collection__WEBPACK_IMPORTED_MODULE_2__","_models_generic_ICategorizable__WEBPACK_IMPORTED_MODULE_3__","_models_generic_IEditable__WEBPACK_IMPORTED_MODULE_4__","_models_generic_IIdentity__WEBPACK_IMPORTED_MODULE_5__","description","effects","CollectionOf","equipped","arguments","length","undefined","filter","item","index","all","child","filterFunction","Boolean","hasParent","parent","getParent","_models_Attribute__WEBPACK_IMPORTED_MODULE_1__","_models_generic_IEditable__WEBPACK_IMPORTED_MODULE_3__","_models_generic_IIdentity__WEBPACK_IMPORTED_MODULE_4__","_utilities_findParent__WEBPACK_IMPORTED_MODULE_5__","condition","modifier","targetId","actions","self","afterAttach","available","character","attributes","findParent","p","isCharacter","isApplicable","source","Object","sourceName","target","mobx_state_tree","IIdentity","IEditable","Attribute","conditions","types","string","descriptors","Descriptor","experience","items","Item","resources","Resource","skills","Skill","spells","Spell","traits","Trait","volatile","activeEffects","effect","availableConditions","map","e","concat","asArray","sort","i","flatten","array","depth","Infinity","Array","TypeError","JSON","reduce","next","trait","values","spell","isActive","_models_generic_Collection__WEBPACK_IMPORTED_MODULE_1__","_models_Resource__WEBPACK_IMPORTED_MODULE_4__","amount","resourceName","views","resource","_models_ResourceCost__WEBPACK_IMPORTED_MODULE_6__","_utilities_findParent__WEBPACK_IMPORTED_MODULE_7__","level","costs","cast","isAffordable","cost","current","every","range","start","end","step","Math","apply","toConsumableArray_default","_","Rating","event","number","parseInt","_this","props","onChange","_this$props","allowExcess","iconExcess","iconOff","iconOn","maximum","total","math","react_default","a","createElement","className","bound","min","data-number","key","onClick","handleIconClick","title","Component","noop","TYPES","Editable","editing","resetValue","type","_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_1___default","includes","state","handleToggleEditing","editor","editorType","getEditorType","focus","forceEditMode","setSelectionRange","_ref","max","parseFloat","Number","ctrlKey","metaKey","onKeyDown","_utilities_noop__WEBPACK_IMPORTED_MODULE_11__","isDefaultPrevented","resetChanges","readOnly","setState","onEditStart","onEditEnd","select","react__WEBPACK_IMPORTED_MODULE_9___default","checked","disabled","toggleBoolean","ref","createRefWithAutoFocus","paragraphs","placeholder","split","line","join","trim","onBlur","handleChange","onFocus","selectOnFocus","handleKeys","onKeyPress","onKeyUp","rows","renderStatic","_this$props2","readOnlyValue","showPlaceholder","displayValue","renderBoolean","renderSlider","renderMultiline","renderNumber","renderText","_this$props3","classes","handleReceivingFocus","tabIndex","_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default","renderEditor","this","React","PATH_SPLITTER","splitObjectPath","path","getPathValue","object","property","pop","o","isIEditable","savedVersion","isDirty","deepEqual","toJSON","afterCreate","isPathDirty","initial","markAsClean","isObservableArray","reset","set","setPathValue","typeof_default","TYPE","options","TypedArrayWrapper","slice","first","last","at","n","clear","delete","deleteAt","fn","find","findBy","findById","id","identifierAttribute","forEach","searchElement","fromIndex","indexOf","element","insert","push","_len","_key","replace","shift","some","sortBy","direction","prop","reversed","objectA","objectB","String","b","compareBy","splice","deleteCount","toObject","keyProp","valueProp","entry","objectSpread_default","defineProperty_default","unshift","_len2","_key2","postProcessSnapshot","custom","fromSnapshot","snapshot","create","getValidationMessage","f","isTargetType","MDXContent","_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default","_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default","_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default","call","layout","components","_babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0___default","react__WEBPACK_IMPORTED_MODULE_6___default","_mdx_js_tag__WEBPACK_IMPORTED_MODULE_7__","parentName","docz__WEBPACK_IMPORTED_MODULE_8__","__position","__code","__scope","AttributeModel","CharacterModel","Fragment","_components_Attribute__WEBPACK_IMPORTED_MODULE_9__","rating","randomHash","radix","h","char","hash","toString","observer","CACHE","forceUpdate","onDelete","raw","isComputed","onSnapshotDisposer","onSnapshot","handleSnapshot","modifiedValue","modifierClassName","_components_Editable__WEBPACK_IMPORTED_MODULE_10__","handleChangeName","handleCommitName","handleChangeValue","handleCommitValue","handleValueKeyDown","_components_Rating__WEBPACK_IMPORTED_MODULE_11__","_utilities_noop__WEBPACK_IMPORTED_MODULE_14__","display","getter","mathjs_core__WEBPACK_IMPORTED_MODULE_0__","core","require","toSymbols","expression","fns","symbols","node","computing","sum","modifierText","computed","symbol","attribute","data","defaultSymbolValue","safeData","calculate","error","process","preProcessSnapshot","objectWithoutProperties_default","_ref2","_utilities_noop__WEBPACK_IMPORTED_MODULE_1__","_utilities_unique__WEBPACK_IMPORTED_MODULE_2__","getValue","isICategorizable","getCategories","categories","unique","category","lastUsedName","categoryValue","mastery","theory","isComplex","isSimple"],"mappings":"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","file":"static/js/components-attribute-attribute.95e4c1fc.js","sourcesContent":["import { types } from 'mobx-state-tree'\nimport ICategorizable from '@/models/generic/ICategorizable'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\n\nexport default types.compose(\n  IIdentity,\n  ICategorizable(),\n  IEditable,\n  types.model({\n    name: 'New Descriptor...',\n    value: '',\n  })\n).named('Descriptor')\n","import { types } from 'mobx-state-tree'\nimport Effect from '@/models/Effect'\nimport CollectionOf from '@/models/generic/Collection'\nimport ICategorizable from '@/models/generic/ICategorizable'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\n\nexport default types.compose(\n  IIdentity,\n  ICategorizable(),\n  IEditable,\n  types.model({\n    description: '',\n    effects: CollectionOf(Effect),\n    equipped: false,\n    name: 'New Item...',\n  }),\n).named('Item')\n","export default (array = []) => (\n  array.filter((item, index, all) => all.indexOf(item) === index)\n)\n","import { getParent, hasParent } from 'mobx-state-tree'\n\nexport default (child, filterFunction = Boolean) => {\n  if (!hasParent(child)) { return null }\n\n  let parent = getParent(child)\n  while (parent) {\n    if (filterFunction(parent)) {\n      return parent\n    }\n\n    if (!hasParent(parent)) { return null }\n    parent = getParent(parent)\n  }\n\n  return null\n}\n","import { types } from 'mobx-state-tree'\nimport Attribute from '@/models/Attribute'\nimport CollectionOf from '@/models/generic/Collection'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\nimport findParent from '@/utilities/findParent'\n\nexport default types.compose(\n  IIdentity,\n  IEditable,\n  types.model({\n    condition: '',\n    modifier: 0,\n    targetId: '',\n  }).actions(self => ({\n    afterAttach() {\n      if (!self.targetId && self.available().length) {\n        // eslint-disable-next-line no-param-reassign\n        self.targetId = self.available().first.id\n      }\n    },\n\n    available() {\n      const character = self.character()\n      return character ? character.attributes : CollectionOf(Attribute).create([])\n    },\n    character() { return findParent(self, p => p.isCharacter) },\n    isApplicable() {\n      const character = self.character()\n      return Boolean(\n        !self.condition ||\n        (character && character.conditions.includes(self.condition))\n      )\n    },\n    source() { return findParent(self, p => p.name) || null },\n    sourceName() { return self.source() ? self.source().name : 'Unknown' },\n    target() {\n      const character = self.character()\n      return character ? character.attributes.findBy('name', self.targetId) : null\n    },\n  }))\n).named('Effect')\n","import { types } from 'mobx-state-tree'\nimport Attribute from '@/models/Attribute'\nimport Descriptor from '@/models/Descriptor'\nimport CollectionOf from '@/models/generic/Collection'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\nimport Item from '@/models/Item'\nimport Resource from '@/models/Resource'\nimport Skill from '@/models/Skill'\nimport Spell from '@/models/Spell'\nimport Trait from '@/models/Trait'\nimport flatten from '@/utilities/flatten'\n\nexport default types.compose(\n  IIdentity,\n  IEditable,\n  types.model({\n    attributes: CollectionOf(Attribute),\n    conditions: CollectionOf(types.string), // ['vs Goblins', 'Crinos Form']\n    descriptors: CollectionOf(Descriptor),\n    experience: 0,\n    items: CollectionOf(Item), // equipped / unequipped, have Effects\n    resources: CollectionOf(Resource),\n    skills: CollectionOf(Skill),\n    spells: CollectionOf(Spell),\n    traits: CollectionOf(Trait), // have Effects\n  }).volatile(() => ({\n    isCharacter: true,\n  })).actions(self => ({\n    activeEffects() {\n      return self.effects().filter(effect => effect && effect.isApplicable())\n    },\n    availableConditions() {\n      return self.effects()\n        .map(e => e.condition).concat(self.conditions.asArray)\n        .sort()\n        .filter((effect, i, all) => !i || effect !== all[i - 1])\n        .filter(Boolean)\n    },\n    effects() {\n      return flatten([\n        // Trait Effects first, because they're inherent\n        self.traits.filter(Boolean).map(trait => trait.effects.values),\n        // Direct Effects second, because they're cast on the character\n        self.spells.filter(spell => spell.isActive).map(spell => spell.effects.values),\n        // Item Effects third, because they're indirect\n        self.items.filter(item => item.equipped).map(item => item.effects.values),\n      ]).filter(Boolean)\n    },\n  }))\n).named('Character')\n","export default function flatten(array, depth = Infinity) {\n  if (!array || !Array.isArray(array)) {\n    throw new TypeError(`cannot flatten non-Array value ${JSON.stringify(array)}`)\n  }\n\n  return array.reduce((all, next) => {\n    if (depth > 1 && next && Array.isArray(next)) {\n      return all.concat(flatten(next, depth - 1))\n    }\n\n    return all.concat(next)\n  }, [])\n}\n","import { types } from 'mobx-state-tree'\nimport CollectionOf from '@/models/generic/Collection'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\nimport Resource from '@/models/Resource'\nimport findParent from '@/utilities/findParent'\n\nexport default types.compose(\n  IIdentity,\n  IEditable,\n  types.model({\n    amount: 0,\n    resourceName: '',\n  }).views(self => ({\n    get available() {\n      return self.character ? self.character.resources : CollectionOf(Resource).create([])\n    },\n    get character() { return findParent(self, p => p.isCharacter) },\n  })).actions(self => ({\n    afterAttach() {\n      if (!self.resourceName && self.available.length) {\n        // eslint-disable-next-line no-param-reassign\n        self.resourceName = self.available.first.name\n      }\n    },\n    resource() {\n      if (!self.character) return null\n      return self.character.resources.findBy('name', self.resourceName)\n    },\n  }))\n).named('Cost')\n","import { types } from 'mobx-state-tree'\nimport Effect from '@/models/Effect'\nimport CollectionOf from '@/models/generic/Collection'\nimport ICategorizable from '@/models/generic/ICategorizable'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\nimport ResourceCost from '@/models/ResourceCost'\nimport findParent from '@/utilities/findParent'\n\nexport default types.compose(\n  IIdentity,\n  ICategorizable(self => self.level),\n  IEditable,\n  types.model({\n    costs: CollectionOf(ResourceCost), // Resources\n    description: '',\n    effects: CollectionOf(Effect),\n    isActive: false,\n    level: 0,\n    name: 'New Spell...',\n  }).views(self => ({\n    get character() { return findParent(self, p => p.isCharacter) },\n  })).actions(self => ({\n    cast() {\n      if (self.isAffordable()) {\n        self.costs.forEach((cost) => {\n          const resource = cost.resource()\n          resource.set({ current: resource.current - cost.amount })\n        })\n      }\n    },\n    isAffordable() {\n      if (!self.character || !self.costs.length) return true\n      return self.costs.every(cost => (\n        cost.resource() && cost.resource().current >= cost.amount\n      ))\n    },\n  }))\n).named('Spell')\n","export default (start, end) => {\n  const step = (start <= end) ? 1 : -1\n  const length = (Math.abs(end - start) / Math.abs(step)) + 1\n  return Array(...Array(length)).map((_, i) => start + (i * step))\n}\n","import React, { Component } from 'react'\nimport bound from '@/utilities/bound'\nimport math from '@/utilities/math'\nimport noop from '@/utilities/noop'\nimport range from '@/utilities/range'\nimport './Rating.scss'\n\nexport default class Rating extends Component {\n  static defaultProps = {\n    allowExcess: false,\n    current: 0,\n    iconExcess: <span className=\"dot excess icon-add\" />,\n    iconOff: <span className=\"dot empty\" />,\n    iconOn: <span className=\"dot filled\" />,\n    maximum: 5,\n    onChange: noop,\n  }\n\n  handleIconClick = (event) => {\n    const number = parseInt(event.target.getAttribute('data-number'), 10)\n    this.props.onChange(number === this.props.current ? number - 1 : number)\n  }\n\n  render = () => {\n    const { allowExcess, current, iconExcess, iconOff, iconOn, maximum } = this.props\n    const total = allowExcess ? math.max(current, maximum) : maximum\n\n    return (\n      <div className=\"rating\">\n        {(total > 0 || (allowExcess && current > 0))\n          ? range(1, bound(total, { min: 1 })).map(number => (\n            <span data-number={number} key={number} onClick={this.handleIconClick} title={number}>\n              {(number <= current && number <= maximum) && iconOn}\n              {(number > current && number <= maximum) && iconOff}\n              {(number > maximum) && iconExcess}\n            </span>\n          ))\n          : null\n        }\n      </div>\n    )\n  }\n}\n","import React from 'react'\nimport bound from '@/utilities/bound'\nimport noop from '@/utilities/noop'\nimport './Editable.scss'\n\nconst TYPES = [\n  // Strings\n  'text', 'multiline',\n  // Checkboxes\n  'boolean',\n  // Numbers\n  'number', 'slider',\n]\n\nexport default class Editable extends React.Component {\n  static displayName = 'Editable'\n\n  static defaultProps = {\n    className: '',\n    forceEditMode: false,\n    max: undefined,\n    min: undefined,\n    onChange: noop,\n    onEditEnd: noop,\n    onEditStart: noop,\n    onKeyDown: noop,\n    onKeyPress: noop,\n    onKeyUp: noop,\n    placeholder: '',\n    readOnly: false,\n    readOnlyValue: undefined,\n    step: 1,\n    type: undefined,\n    value: '',\n  }\n\n  state = {\n    editing: false,\n    resetValue: this.props.value,\n  }\n\n  get editing() {\n    return this.props.forceEditMode || this.state.editing\n  }\n\n  getEditorType = () => {\n    const { value } = this.props\n    let { type } = this.props\n\n    if (type !== undefined && TYPES.includes(type)) { return type }\n\n    type = typeof value\n    if (type === 'string') { return value.includes('\\n') ? 'multiline' : 'text' }\n    if (['boolean', 'number'].includes(type)) { return type }\n\n    return 'text'\n  }\n\n  resetChanges = () => {\n    this.props.onChange(this.state.resetValue, this.props.value)\n    this.handleToggleEditing()\n  }\n\n  createRefWithAutoFocus = (editor) => {\n    if (!editor) { return }\n    this.editor = editor\n\n    const editorType = this.getEditorType()\n    if (editorType !== 'boolean' && typeof editor.focus === 'function') { editor.focus() }\n\n    if (['boolean', 'number'].includes(this.getEditorType())) { return }\n    if (this.props.forceEditMode && typeof editor.setSelectionRange === 'function') {\n      editor.setSelectionRange(editor.value.length, editor.value.length)\n    }\n  }\n\n  handleChange = ({ target }) => {\n    const { min, max } = this.props\n    let { value } = target\n\n    // eslint-disable-next-line default-case\n    switch (this.getEditorType()) {\n      case 'slider':\n      case 'number':\n        value = parseFloat(value || 0)\n        // eslint-disable-next-line prefer-destructuring\n        if (Number.isNaN(value)) { value = this.props.value }\n        value = bound(value, { max, min })\n    }\n    this.props.onChange(value, this.state.resetValue)\n  }\n\n  handleKeys = (event) => {\n    const { target, key, ctrlKey, metaKey } = event\n\n    if (this.props.onKeyDown !== noop) {\n      this.props.onKeyDown(event)\n      if (event.isDefaultPrevented()) return\n    }\n\n    if (key === 'Escape') { this.resetChanges() }\n    if (key === 'Enter') {\n      if (target.nodeName !== 'TEXTAREA' || ctrlKey || metaKey) {\n        this.handleToggleEditing()\n      }\n    }\n  }\n\n  handleReceivingFocus = () => {\n    if (this.props.readOnly) { return }\n    if (!this.state.editing) { this.handleToggleEditing() }\n  }\n\n  handleToggleEditing = () => {\n    if (this.props.readOnly) { return }\n\n    const editing = !this.editing\n\n    this.setState({ editing, resetValue: this.props.value }, () => {\n      if (this.state.editing) {\n        this.props.onEditStart()\n      } else {\n        this.props.onEditEnd()\n      }\n    })\n  }\n\n  selectOnFocus = event => event.target.select()\n\n  toggleBoolean = () => {\n    this.props.onEditStart()\n    this.props.onChange(!this.props.value, this.props.value)\n    this.props.onEditEnd()\n  }\n\n  renderBoolean = () => (\n    <input\n      type=\"checkbox\"\n      checked={Boolean(this.props.value)}\n      disabled={this.props.readOnly}\n      onChange={this.toggleBoolean}\n      ref={this.createRefWithAutoFocus}\n    />\n  )\n\n  renderMultiline = () => {\n    if (!this.editing) {\n      const lines = (this.props.value || this.props.placeholder).split('\\n')\n      const paragraphs = lines.map((line, index) => <p key={index}>{line}</p>\n      )\n      const className = ['multiline', this.props.value ? '' : 'placeholder'].join(' ').trim()\n      return <div className={className} onClick={this.handleToggleEditing}>{paragraphs}</div>\n    }\n\n    return (\n      <textarea\n        disabled={this.props.readOnly}\n        onBlur={this.handleToggleEditing}\n        onChange={this.handleChange}\n        onFocus={this.selectOnFocus}\n        onKeyDown={this.handleKeys}\n        onKeyPress={this.props.onKeyPress}\n        onKeyUp={this.props.onKeyUp}\n        placeholder={this.props.placeholder}\n        ref={this.createRefWithAutoFocus}\n        rows={this.props.value.split('\\n').length}\n        value={this.props.value}\n      />\n    )\n  }\n\n  renderNumber = () => {\n    if (!this.editing) { return this.renderStatic() }\n\n    return (\n      <input\n        type=\"number\"\n        disabled={this.props.readOnly}\n        max={this.props.max}\n        min={this.props.min}\n        onBlur={this.handleToggleEditing}\n        onChange={this.handleChange}\n        onFocus={this.selectOnFocus}\n        onKeyDown={this.handleKeys}\n        onKeyPress={this.props.onKeyPress}\n        onKeyUp={this.props.onKeyUp}\n        placeholder={this.props.placeholder}\n        ref={this.createRefWithAutoFocus}\n        step={this.props.step}\n        value={this.props.value}\n      />\n    )\n  }\n\n  renderSlider = () => (\n    <input\n      type=\"range\"\n      disabled={this.props.readOnly}\n      max={this.props.max}\n      min={this.props.min}\n      onBlur={this.handleToggleEditing}\n      onChange={this.handleChange}\n      onKeyDown={this.props.onKeyDown}\n      onKeyPress={this.props.onKeyPress}\n      onKeyUp={this.props.onKeyUp}\n      ref={this.createRefWithAutoFocus}\n      step={this.props.step}\n      value={this.props.value}\n    />\n  )\n\n  renderText = () => {\n    if (!this.editing) { return this.renderStatic() }\n\n    return (\n      <input\n        type=\"text\"\n        disabled={this.props.readOnly}\n        onBlur={this.handleToggleEditing}\n        onChange={this.handleChange}\n        onFocus={this.selectOnFocus}\n        onKeyDown={this.handleKeys}\n        onKeyPress={this.props.onKeyPress}\n        onKeyUp={this.props.onKeyUp}\n        placeholder={this.props.placeholder}\n        ref={this.createRefWithAutoFocus}\n        value={this.props.value}\n      />\n    )\n  }\n\n  renderStatic = () => {\n    const { placeholder, readOnlyValue, value } = this.props\n    const showPlaceholder = placeholder && !value\n    const displayValue = readOnlyValue !== undefined ? readOnlyValue : value\n    const className = showPlaceholder ? 'placeholder' : ''\n    return (\n      <span className={className} onClick={this.handleToggleEditing}>\n        {showPlaceholder ? placeholder : displayValue}\n      </span>\n    )\n  }\n\n  renderEditor = () => {\n    switch (this.getEditorType()) {\n      case 'boolean':\n        return this.renderBoolean()\n      case 'slider':\n        return this.renderSlider()\n      case 'multiline':\n        return this.renderMultiline()\n      case 'number':\n        return this.renderNumber()\n      default:\n        return this.renderText()\n    }\n  }\n\n  render = () => {\n    const { className, readOnly } = this.props\n\n    const classes = [\n      'editable',\n      this.editing ? 'editing' : '',\n      className || '',\n      readOnly ? 'readonly' : '',\n    ].filter(Boolean)\n\n    let props = {}\n    if (!readOnly && !this.editing) {\n      props = { onFocus: this.handleReceivingFocus, tabIndex: '0' }\n    }\n\n    return (\n      <div className={classes.join(' ')} {...props}>\n        {this.renderEditor()}\n      </div>\n    )\n  }\n}\n","const PATH_SPLITTER = /([a-z0-9-_]+)(?![[\"'\\].])*/ig\n\nexport default (path) => {\n  if (typeof path !== 'string') return null\n  return path.match(PATH_SPLITTER)\n}\n","import splitObjectPath from '@/utilities/splitObjectPath'\n\nexport default (object, path) => {\n  if (typeof path !== 'string') return undefined\n\n  const split = splitObjectPath(path)\n\n  if (!Array.isArray(split)) return undefined\n\n  const property = split.pop()\n  const target = split.reduce((o, key) => o[key] || {}, object)\n\n  if (target) return target[property]\n  return undefined\n}\n","import deepEqual from 'deep-equal'\nimport { isObservableArray } from 'mobx'\nimport { types } from 'mobx-state-tree'\nimport getPathValue from '@/utilities/getPathValue'\nimport setPathValue from '@/utilities/setPathValue'\n\nconst IEditable = types.model('IEditable', {\n  // Any\n}).volatile(() => ({\n  isIEditable: true,\n  savedVersion: {},\n})).views(self => ({\n  get isDirty() { return !deepEqual(self.toJSON(), self.savedVersion) },\n})).actions(self => ({\n  /* eslint-disable no-param-reassign */\n\n  afterCreate() { self.savedVersion = self.toJSON() },\n  isPathDirty: (path) => {\n    const current = getPathValue(self.toJSON(), path)\n    const initial = getPathValue(self.savedVersion, path)\n    return !deepEqual(current, initial)\n  },\n  markAsClean() {\n    self.savedVersion = self.toJSON()\n\n    Object.keys(self.savedVersion).forEach((key) => {\n      const value = self[key]\n      if (!value) { return }\n\n      if (value.isIEditable) {\n        value.markAsClean()\n      } else if (isObservableArray(value)) {\n        value.forEach(child => (child && child.isIEditable && child.markAsClean()))\n      }\n    })\n  },\n  reset() { Object.assign(self, self.savedVersion) },\n  set(key = {}, value = undefined) {\n    if (typeof key === 'string' && value !== undefined) {\n      // allows: model.set('foo.bar', 'bar')\n      if (self[key] !== undefined) {\n        self[key] = value\n      } else {\n        setPathValue(self, key, value)\n      }\n    } else if (typeof key === 'object' && value === undefined) {\n      // allows: model.set({ foo: 'Foo', bar: 'Bar' })\n      Object.assign(self, key)\n    }\n  },\n\n  /* eslint-enable no-param-reassign */\n}))\n\nexport default IEditable\n","import splitObjectPath from '@/utilities/splitObjectPath'\n\nexport default (object, path, value) => {\n  const split = splitObjectPath(path)\n  const property = split.pop()\n  const target = split.reduce((o, key) => o[key] || {}, object)\n\n  if (target && target.isIEditable) {\n    target.set(property, value)\n  } else {\n    target[property] = value\n  }\n}\n","import { isObservableArray } from 'mobx'\nimport { types } from 'mobx-state-tree'\nimport compareBy from '@/utilities/compareBy'\n\nexport default (TYPE, options = {}) => {\n  const TypedArrayWrapper = types.model({\n    values: types.array(TYPE),\n  }).views(self => ({\n    get asArray() { return self.values.slice() },\n    get first() { return self.length ? self.at(0) : undefined },\n    get last() { return self.length ? self.at(self.length - 1) : undefined },\n    get length() { return self.values.length },\n  })).actions(self => ({\n    /* eslint-disable no-param-reassign */\n\n    at: n => self.values[n],\n    clear: () => self.values.clear(),\n    delete: (object) => { self.values.replace(self.values.filter(item => item !== object)) },\n    deleteAt: (index) => { self.values.replace(self.values.filter((_, n) => n !== index)) },\n    every: fn => self.values.every(fn),\n    filter: fn => self.values.filter(fn),\n    find: fn => self.values.find(fn),\n    findBy: (key, value) => self.find(item => item[key] === value),\n    findById: (id) => {\n      if (!TYPE.identifierAttribute) return null\n      return self.find(item => item[TYPE.identifierAttribute] === id) || null\n    },\n    forEach: fn => self.values.forEach(fn),\n    includes: (searchElement, fromIndex) => self.values.includes(searchElement, fromIndex),\n    indexOf: element => self.values.indexOf(element),\n    insert: (object, index) => self.splice(index, 0, object),\n    map: fn => self.values.map(fn),\n    pop: () => self.values.pop(),\n    push: (...values) => self.values.replace([].concat(self.values, values)),\n    reduce: (fn, initial) => self.values.reduce(fn, initial),\n    replace: values => self.values.replace(values),\n    shift: () => self.values.shift(),\n    slice: (start, end) => self.values.slice(start, end),\n    some: fn => self.values.some(fn),\n    sortBy: (property, direction = 'asc') => {\n      if (!['asc', 'desc'].includes(direction)) {\n        throw new TypeError(`direction must be \"asc\" or \"desc\", got: \"${direction}\"`)\n      }\n      const values = self.values.slice().sort(compareBy(property))\n      self.values.replace(direction === 'desc' ? values.reverse() : values)\n      return self\n    },\n    splice: (index, deleteCount, value) => self.values.splice(index, deleteCount, value),\n    toObject: (keyProp, valueProp) => self.values.reduce((object, entry) => {\n      const key = entry[keyProp]\n      const value = valueProp !== undefined ? entry[valueProp] : entry\n      return { ...object, [key]: typeof value === 'function' ? value() : value }\n    }, {}),\n    unshift: (...values) => self.values.replace([].concat(values, self.values)),\n\n    /* eslint-enable no-param-reassign */\n  })).postProcessSnapshot(({ values }) => values)\n\n  return types.custom({\n    ...options,\n    fromSnapshot: (snapshot = []) => TypedArrayWrapper.create({ values: snapshot }),\n    getValidationMessage: (snapshot) => {\n      if (!snapshot) return ''\n      if (isObservableArray(snapshot) || Array.isArray(snapshot)) {\n        if (snapshot.every(f => TYPE.is(f))) return ''\n      }\n\n      return 'Collection types must be assigned an array of values or null'\n    },\n    isTargetType: target => TypedArrayWrapper.is(target),\n    name: options.name || 'Collection',\n  })\n}\n","export default (prop, reversed = false) => (objectA, objectB) => {\n  const a = String(objectA instanceof Map ? objectA.get(prop) : objectA[prop])\n  const b = String(objectB instanceof Map ? objectB.get(prop) : objectB[prop])\n\n  if (reversed) return b.localeCompare(a)\n  return a.localeCompare(b)\n}\n","import { types } from 'mobx-state-tree'\nimport ICategorizable from '@/models/generic/ICategorizable'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\n\nexport default types.compose(\n  IIdentity,\n  ICategorizable(),\n  IEditable,\n  types.model({\n    current: 0,\n    maximum: 10,\n    name: 'New Resource...',\n  })\n).named('Resource')\n","\n  import React from 'react'\n  import { MDXTag } from '@mdx-js/tag'\n  import { Playground } from 'docz'\nimport Attribute from '@/components/Attribute'\nimport AttributeModel from '@/models/Attribute'\nimport CharacterModel from '@/models/Character'\n\nconst layoutProps = {\n  \n};\nexport default class MDXContent extends React.Component {\n  constructor(props) {\n    super(props)\n    this.layout = null\n  }\n  render() {\n    const { components, ...props } = this.props\n\n    return <MDXTag\n             name=\"wrapper\"\n             \n             components={components}>\n<MDXTag name=\"h2\" components={components} props={{\"id\":\"attribute\"}}>{`Attribute`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`The `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`Attribute`}</MDXTag>{` component displays the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`name`}</MDXTag>{` and `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`value`}</MDXTag>{` of an `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`Attribute`}</MDXTag>{` model. If this `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`Attribute`}</MDXTag>{` model is part of a `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`Character`}</MDXTag>{`, it will also display any applicable `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`Effect`}</MDXTag>{` modifiers.`}</MDXTag>\n<MDXTag name=\"p\" components={components}><MDXTag name=\"strong\" components={components} parentName=\"p\">{`Note`}</MDXTag>{`: You can hover your mouse over any of the modifier displays to see `}<MDXTag name=\"em\" components={components} parentName=\"p\">{`which effects`}</MDXTag>{` caused that modifier to be applied.`}</MDXTag>\n<Playground __position={0} __code={'() => {\\n  const character = CharacterModel.create({\\n    attributes: [\\n      { name: \\'Strength\\', value: 4 },\\n      { name: \\'Dexterity\\', value: 3 },\\n      { name: \\'Stamina\\', value: 4 },\\n      { name: \\'Charisma\\', value: 3 },\\n    ],\\n    items: [\\n      {\\n        equipped: true,\\n        name: \\'Belt of Dwarven Strength\\',\\n        effects: [{ targetId: \\'Strength\\', modifier: 2 }],\\n      },\\n      {\\n        equipped: true,\\n        name: \\\"Potion: Eagle\\'s Splendor\\\",\\n        effects: [{ targetId: \\'Charisma\\', modifier: 2 }],\\n      },\\n    ],\\n    traits: [\\n      {\\n        name: \\'Half Giant\\',\\n        effects: [{ targetId: \\'Strength\\', modifier: 4 }],\\n      },\\n    ],\\n    spells: [\\n      {\\n        isActive: true,\\n        name: \\'Curse: Rotting Flesh\\',\\n        effects: [\\n          { targetId: \\'Stamina\\', modifier: -2 },\\n          { targetId: \\'Charisma\\', modifier: -2 },\\n        ],\\n      },\\n    ],\\n  })\\n  return (\\n    <>\\n      <h2>Dexterity</h2>\\n      <p>No modifiers.</p>\\n      <Attribute model={character.attributes.findBy(\\'name\\', \\'Dexterity\\')} />\\n      <Attribute\\n        model={character.attributes.findBy(\\'name\\', \\'Dexterity\\')}\\n        rating\\n      />\\n      <h2>Strength</h2>\\n      <p>+2 from an equipped Item, +4 from a Trait</p>\\n      <Attribute model={character.attributes.findBy(\\'name\\', \\'Strength\\')} />\\n      <Attribute\\n        model={character.attributes.findBy(\\'name\\', \\'Strength\\')}\\n        rating\\n      />\\n\\n      <h2>Stamina</h2>\\n      <p>-2 from a Curse</p>\\n      <Attribute model={character.attributes.findBy(\\'name\\', \\'Stamina\\')} />\\n      <Attribute\\n        model={character.attributes.findBy(\\'name\\', \\'Stamina\\')}\\n        rating\\n      />\\n\\n      <h2>Charisma</h2>\\n      <p>+2 from an equipped Item, -2 from a Curse</p>\\n      <Attribute model={character.attributes.findBy(\\'name\\', \\'Charisma\\')} />\\n      <Attribute\\n        model={character.attributes.findBy(\\'name\\', \\'Charisma\\')}\\n        rating\\n      />\\n    </>\\n  )\\n}'} __scope={{props: this ? this.props : props,Attribute,AttributeModel,CharacterModel}}>\n  {() => {\n    const character = CharacterModel.create({\n      attributes: [\n        { name: 'Strength', value: 4 },\n        { name: 'Dexterity', value: 3 },\n        { name: 'Stamina', value: 4 },\n        { name: 'Charisma', value: 3 },\n      ],\n      items: [\n        { equipped: true, name: 'Belt of Dwarven Strength', effects: [{ targetId: 'Strength', modifier: 2 }] },\n        { equipped: true, name: 'Potion: Eagle\\'s Splendor', effects: [{ targetId: 'Charisma', modifier: 2 }] },\n      ],\n      traits: [\n        { name: 'Half Giant', effects: [{ targetId: 'Strength', modifier: 4 }] },\n      ],\n      spells: [\n        { isActive: true, name: 'Curse: Rotting Flesh', effects: [\n          { targetId: 'Stamina', modifier: -2 },\n          { targetId: 'Charisma', modifier: -2 },\n        ] },\n      ],\n    })\n    return (<>\n      <h2>Dexterity</h2>\n      <p>No modifiers.</p>\n      <Attribute model={character.attributes.findBy('name', 'Dexterity')} />\n      <Attribute model={character.attributes.findBy('name', 'Dexterity')} rating />\n  <h2>Strength</h2>\n  <p>+2 from an equipped Item, +4 from a Trait</p>\n  <Attribute model={character.attributes.findBy('name', 'Strength')} />\n  <Attribute model={character.attributes.findBy('name', 'Strength')} rating />\n\n  <h2>Stamina</h2>\n  <p>-2 from a Curse</p>\n  <Attribute model={character.attributes.findBy('name', 'Stamina')} />\n  <Attribute model={character.attributes.findBy('name', 'Stamina')} rating />\n\n  <h2>Charisma</h2>\n  <p>+2 from an equipped Item, -2 from a Curse</p>\n  <Attribute model={character.attributes.findBy('name', 'Charisma')} />\n  <Attribute model={character.attributes.findBy('name', 'Charisma')} rating />\n</>)\n  }}\n</Playground>\n           </MDXTag>\n  }\n}\n  ","import { types } from 'mobx-state-tree'\nimport Effect from '@/models/Effect'\nimport CollectionOf from '@/models/generic/Collection'\nimport ICategorizable from '@/models/generic/ICategorizable'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\n\nexport default types.compose(\n  IIdentity,\n  ICategorizable(self => self.value),\n  IEditable,\n  types.model('Trait', {\n    effects: CollectionOf(Effect),\n    name: 'New Trait...',\n    value: 0,\n  })\n).named('Trait')\n","export default (value, { min, max }) => {\n  if (min !== undefined && value < min) return min\n  if (max !== undefined && value > max) return max\n  return value\n}\n","export default function hash(value = '', radix = 16) {\n  const string = String(value)\n  let h = 0\n  string.split('').forEach((char) => {\n    /* eslint-disable no-bitwise */\n    h = ((h << 5) - h) + char.charCodeAt(0)\n    h &= h // Convert to 32-bit integer\n    /* eslint-enable no-bitwise */\n  })\n  return Math.abs(h).toString(radix)\n}\n\nexport const randomHash = () => hash(Math.random().toString())\n","import { types } from 'mobx-state-tree'\nimport { randomHash } from '@/utilities/hash'\n\nexport default types.model({\n  // Nothing\n}).volatile(() => ({\n  hash: '',\n})).actions(self => ({\n  afterCreate() { self.hash = randomHash() }, // eslint-disable-line no-param-reassign\n}))\n","import { observer } from 'mobx-react'\nimport { onSnapshot } from 'mobx-state-tree'\nimport React, { Component } from 'react'\nimport Editable from '@/components/Editable'\nimport Rating from '@/components/Rating'\nimport bound from '@/utilities/bound'\nimport math from '@/utilities/math'\nimport noop from '@/utilities/noop'\nimport './Attribute.scss'\n\n@observer class Attribute extends Component {\n  static defaultProps = {\n    model: {},\n    onDelete: noop,\n    rating: false,\n  }\n\n  static sortOptions = [{\n    display: 'icon-sort-name-asc',\n    getter: model => model.name,\n  }, {\n    display: 'icon-sort-value-asc',\n    getter: model => model.modifiedValue(),\n  }]\n\n  CACHE = {}\n\n  componentDidMount() {\n    this.onSnapshotDisposer = onSnapshot(this.props.model.character, this.handleSnapshot)\n  }\n  componentWillUnmount() { this.onSnapshotDisposer() }\n\n  handleSnapshot = (snapshot) => {\n    const effects = this.props.model.effects().map(e => e.toJSON())\n    if (\n      JSON.stringify(effects) !== JSON.stringify(this.CACHE.effects) ||\n      JSON.stringify(snapshot.conditions) !== this.CACHE.conditions ||\n      this.CACHE.value !== this.props.model.value()\n    ) {\n      this.CACHE.conditions = JSON.stringify(snapshot.conditions)\n      this.CACHE.effects = effects\n      this.CACHE.value = this.props.model.value()\n      this.forceUpdate()\n    }\n  }\n  handleChangeName = (name) => {\n    const { id } = this.props.model\n    this.props.model.set({ name })\n    this.props.model.character.effects()\n      .filter(effect => effect.targetId === id)\n      .forEach((effect) => {\n        effect.set({ targetId: '' })\n        effect.set({ targetId: this.props.model.id })\n      })\n  }\n  handleCommitName = () => (this.props.model.name === '' && this.props.onDelete(this.props.model))\n  handleChangeValue = (raw) => {\n    let value = String(raw).replace(/[^a-z0-9+*()\\-/, ]/gi, '')\n    if (!Number.isNaN(Number(raw))) {\n      value = bound(Number(raw) || '', { max: 999, min: -99 })\n    }\n    this.props.model.set({ raw: value })\n  }\n  handleCommitValue = () => {\n    if (String(this.props.model.raw) === '') this.props.model.set({ raw: 0 })\n  }\n  handleValueKeyDown = ({ key }) => {\n    const { model } = this.props\n    if (model.isComputed) return\n\n    switch (key) {\n      case 'ArrowUp':\n        model.set({ raw: model.value() + 1 }); break\n      case 'ArrowDown':\n        model.set({ raw: model.value() - 1 }); break\n      default:\n    }\n  }\n\n  render() {\n    const { model, rating } = this.props\n    const modifiedValue = model.modifiedValue()\n    const value = model.value()\n\n    const className = [\n      'attribute',\n      `as-${rating ? 'rating' : 'numeric'}`,\n      `${model.isComputed ? 'is' : 'not'}-computed`,\n    ].join(' ')\n\n    const modifier = model.modifier()\n    const modifierClassName = [\n      'modifier',\n      modifier > 0 && 'positive',\n      modifier < 0 && 'negative',\n      modifier === 0 && 'zero',\n    ].filter(Boolean).join(' ')\n\n    return (\n      <div className={className}>\n        <Editable\n          className=\"name\"\n          onChange={this.handleChangeName}\n          onEditEnd={this.handleCommitName}\n          value={model.name}\n        />\n        <Editable\n          className=\"value rating\"\n          onChange={this.handleChangeValue}\n          onEditEnd={this.handleCommitValue}\n          onKeyDown={this.handleValueKeyDown}\n          readOnlyValue={(\n            <Rating\n              allowExcess\n              current={modifiedValue}\n              maximum={value}\n            />\n          )}\n          type=\"text\"\n          value={model.raw}\n        />\n        <Editable\n          className=\"value numeric\"\n          onChange={this.handleChangeValue}\n          onEditEnd={this.handleCommitValue}\n          onKeyDown={this.handleValueKeyDown}\n          readOnlyValue={value}\n          type=\"text\"\n          value={model.raw}\n        />\n        {model.effects().length !== 0 && (\n          <div\n            className={modifierClassName}\n            title={model.modifierText()}\n          >\n            {modifiedValue}\n          </div>\n        )}\n      </div>\n    )\n  }\n}\n\nexport default Attribute\n","import core from 'mathjs/core'\n\nconst math = core.create()\nmath.import(require('mathjs/lib/expression/function/eval'))\nmath.import(require('mathjs/lib/expression/function/parse'))\nmath.import(require('mathjs/lib/function/arithmetic/add'))\nmath.import(require('mathjs/lib/function/arithmetic/ceil'))\nmath.import(require('mathjs/lib/function/arithmetic/divide'))\nmath.import(require('mathjs/lib/function/arithmetic/floor'))\nmath.import(require('mathjs/lib/function/arithmetic/mod'))\nmath.import(require('mathjs/lib/function/arithmetic/multiply'))\nmath.import(require('mathjs/lib/function/arithmetic/pow'))\nmath.import(require('mathjs/lib/function/arithmetic/round'))\nmath.import(require('mathjs/lib/function/arithmetic/subtract'))\nmath.import(require('mathjs/lib/function/logical'))\nmath.import(require('mathjs/lib/function/statistics/max'))\nmath.import(require('mathjs/lib/function/statistics/mean'))\nmath.import(require('mathjs/lib/function/statistics/min'))\nmath.import(require('mathjs/lib/function/statistics/sum'))\nmath.import(require('mathjs/lib/type/matrix/function/matrix'))\nmath.import(require('mathjs/lib/type/matrix/Matrix'))\nmath.import(require('mathjs/lib/type/matrix/DenseMatrix'))\n\nexport default math\n","import math from '@/utilities/math'\n\nexport default (expression) => {\n  const fns = []\n  const symbols = []\n\n  math.parse(expression).traverse((node) => {\n    if (node.fn) {\n      fns.push(node.fn.name)\n    }\n    if (\n      node.type === 'SymbolNode'\n      && !symbols.includes(node.name)\n      && !fns.includes(node.name)\n    ) {\n      symbols.push(node.name)\n    }\n  })\n  return symbols\n}\n","import { types } from 'mobx-state-tree'\nimport ICategorizable from '@/models/generic/ICategorizable'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\nimport findParent from '@/utilities/findParent'\nimport math from '@/utilities/math'\nimport calculate from '@/utilities/math/calculate'\nimport toSymbols from '@/utilities/math/toSymbols'\n\nexport default types.compose(\n  IIdentity,\n  ICategorizable(self => self.modifiedValue()),\n  IEditable,\n  types.model({\n    name: 'New Attribute...',\n    raw: types.optional(types.union(types.number, types.string), 0),\n  }).views(self => ({\n    get character() { return findParent(self, p => p.isCharacter) },\n    get id() {\n      return self.name.split(':').pop()\n        .trim().toLowerCase()\n        .replace(/[^a-z0-9]/ig, '')\n    },\n    get isComputed() { return typeof self.raw === 'string' },\n  })).actions((self) => {\n    let computing = false\n\n    return ({\n      effects() {\n        if (!self.character) return []\n        return self.character.activeEffects().filter(effect => effect.targetId === self.id)\n      },\n      modifiedValue() { return (self.value() || 0) + self.modifier() },\n      modifier() { return math.sum(self.effects().map(effect => effect.modifier)) },\n      modifierText() {\n        return self.effects().map(effect => `${effect.sourceName()}: ${effect.modifier}`).join(', ')\n      },\n      value() {\n        if (!self.isComputed) return self.raw\n        if (self.character === null) return 0\n        if (computing) return 0\n\n        computing = true\n        let computed = 0\n\n        try {\n          const values = toSymbols(self.raw).reduce((all, symbol) => {\n            const attribute = self.character.attributes.findBy('id', symbol)\n            return Object.assign(all, { [symbol]: attribute ? attribute.modifiedValue() : 0 })\n          }, {})\n\n          computed = calculate(self.raw, values)\n        } catch (error) {\n          // eslint-disable-next-line no-undef\n          if (process.env.NODE_ENV !== 'production') {\n            // eslint-disable-next-line no-console\n            console.error(`Error computing: ${self.raw}`)\n          }\n          computed = 0\n        }\n\n        computing = false\n        return computed\n      },\n    })\n  }).preProcessSnapshot(({ value, ...snapshot }) => ({ ...snapshot, raw: value }))\n    .postProcessSnapshot(({ raw, ...snapshot }) => ({ ...snapshot, value: raw }))\n).named('Attribute')\n","import math from '@/utilities/math'\nimport toSymbols from '@/utilities/math/toSymbols'\n\nexport default (expression = '', data = {}, options = { defaultSymbolValue: 0 }) => {\n  const safeData = { ...data }\n  toSymbols(expression).forEach((symbol) => {\n    if (safeData[symbol] === undefined) {\n      safeData[symbol] = options.defaultSymbolValue\n    }\n  })\n\n  return math.eval(expression, safeData)\n}\n","import { types } from 'mobx-state-tree'\nimport noop from '@/utilities/noop'\nimport unique from '@/utilities/unique'\n\nexport default (getValue = noop) => types.model({\n}).volatile(() => ({\n  isICategorizable: true,\n})).views((self) => {\n  function getCategories() {\n    if (!self.name) return []\n\n    const categories = self.name.split(':')\n    categories.pop() // remove the name\n\n    return unique(categories.map(category => category.trim()).filter(Boolean)).sort()\n  }\n  let lastUsedName = self.name\n  let categories = getCategories()\n\n  return {\n    get categories() {\n      if (!self.name || self.name === lastUsedName) return categories\n\n      lastUsedName = self.name\n      categories = getCategories()\n\n      return categories\n    },\n    get categoryValue() { return getValue(self) },\n  }\n})\n","import { types } from 'mobx-state-tree'\nimport ICategorizable from '@/models/generic/ICategorizable'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\n\nexport default types.compose(\n  IIdentity,\n  ICategorizable(self => self.mastery),\n  IEditable,\n  types.model({\n    mastery: 1,\n    name: 'New Skill...',\n    theory: 0,\n  }).views(self => ({\n    get isComplex() { return self.theory !== 0 },\n    get isSimple() { return self.theory === 0 },\n  }))\n).named('Skill')\n","export default () => {}\n"],"sourceRoot":""}