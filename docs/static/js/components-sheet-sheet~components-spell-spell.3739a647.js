(window.webpackJsonpsheetforge=window.webpackJsonpsheetforge||[]).push([[2],{"0dDA":function(e,t,n){},"1T+A":function(e,t,n){"use strict";n.d(t,"a",function(){return x});var a=n("b696"),r=n.n(a),o=n("Nogc"),s=n.n(o),l=n("WEGp"),i=n.n(l),c=n("Amxr"),u=n.n(c),p=n("o1mq"),d=n.n(p),m=n("cEnY"),h=n.n(m),g=n("itEV"),f=n.n(g),v=n("cNEE"),y=n.n(v),E=n("q1tI"),C=n.n(E),N=n("x6zz"),x=(n("djCb"),function(e){function t(){var e,n;s()(this,t);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=u()(this,(e=d()(t)).call.apply(e,[this].concat(o))),y()(h()(n),"state",{selected:null}),y()(h()(n),"handleOptionClick",function(e){var t=e.target,a=r()(t.parentElement.children).indexOf(t),o=n.props.options[a];void 0!==n.props.selected?n.props.onChange(o):n.setState({selected:o})}),n}return f()(t,e),i()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.options,r=void 0!==this.props.selected?this.props.selected:this.state.selected;return C.a.createElement("div",{className:"multi-toggle ".concat(n).trim()},a.map(function(t,n){return C.a.createElement("div",{className:"toggle ".concat(t===r?"on":"off").trim(),key:n,onClick:e.handleOptionClick},t.display)}))}}]),t}(E.Component));y()(x,"defaultProps",{className:"",onChange:N.a,options:[],selected:void 0})},"8qIS":function(e,t,n){"use strict";var a,r,o,s,l,i,c=n("Nogc"),u=n.n(c),p=n("WEGp"),d=n.n(p),m=n("Amxr"),h=n.n(m),g=n("o1mq"),f=n.n(g),v=n("cEnY"),y=n.n(v),E=n("itEV"),C=n.n(E),N=n("cNEE"),x=n.n(N),b=n("NbXW"),A=n("uqjs"),D=n("q1tI"),O=n.n(D),k=n("O+tL"),S=n("a4BR"),I=n("I7n6"),z=n("t524"),T=(n("y+pi"),Object(b.observer)((o=r=function(e){function t(){var e,n;u()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=h()(this,(e=f()(t)).call.apply(e,[this].concat(r))),x()(y()(n),"handleChangeAmount",function(e){return n.props.model.set({amount:e})}),x()(y()(n),"handleChangeResource",function(e){var t=e.target.value;return n.props.model.set({resourceName:t})}),n}return C()(t,e),d()(t,[{key:"render",value:function(){var e=this.props.model,t=e.amount,n=e.available,a=e.resourceName;return O.a.createElement("div",{className:"resource-cost"},O.a.createElement("select",{className:"resource-id",value:a,onChange:this.handleChangeResource},n.map(function(e){var t=e.name;return O.a.createElement("option",{key:t,value:t},t)})),O.a.createElement(k.a,{className:"amount",max:999,min:-99,onChange:this.handleChangeAmount,value:t}))}}]),t}(D.Component),x()(r,"defaultProps",{model:{}}),x()(r,"sortOptions",[{display:"icon-sort-name-asc",getter:function(e){return e.resourceName}},{display:"icon-sort-value-asc",getter:function(e){return e.amount}}]),a=o))||a),w=n("HyL6"),j=n("ITnf"),W=n("x6zz"),L=(n("IURI"),Object(z.a)(w.a,S.a,{className:"effect-list"})),U=Object(z.a)(j.a,T,{className:"resource-cost-list"}),q=Object(b.observer)((i=l=function(e){function t(){var e,n;u()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=h()(this,(e=f()(t)).call.apply(e,[this].concat(r))),x()(y()(n),"onResourceSnapshotDisposer",W.a),x()(y()(n),"handleCast",function(){n.props.model.cast(),n.forceUpdate()}),x()(y()(n),"handleChangeDescription",function(e){return n.props.model.set({description:e})}),x()(y()(n),"handleChangeLevel",function(e){return n.props.model.set({level:e})}),x()(y()(n),"handleChangeName",function(e){return n.props.model.set({name:e})}),x()(y()(n),"handleCommitName",function(){return""===n.props.model.name&&n.props.onDelete(n.props.model)}),x()(y()(n),"handleToggleActive",function(){return n.props.model.set({isActive:!n.props.model.isActive})}),n}return C()(t,e),d()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.model.character.resources;this.onResourceSnapshotDisposer=Object(A.onSnapshot)(t,function(){return e.forceUpdate()})}},{key:"componentWillUnmount",value:function(){this.onResourceSnapshotDisposer()}},{key:"render",value:function(){var e=this,t=this.props.model,n=t.costs,a=t.description,r=t.name,o=t.effects,s=t.hash,l=t.isActive,i=t.isAffordable,c=t.level;return O.a.createElement("div",{className:"spell ".concat(l?"":"in","active")},O.a.createElement(k.a,{className:"is-active",onChange:this.handleToggleActive,value:l}),O.a.createElement(k.a,{className:"name",onChange:this.handleChangeName,onEditEnd:this.handleCommitName,value:r}),O.a.createElement(k.a,{className:"level",onChange:this.handleChangeLevel,value:c}),O.a.createElement("button",{className:"cast icon-magic",onClick:this.handleCast,disabled:!i()}),O.a.createElement(I.a,{onToggle:function(t){return e.props.onToggleExpanded(s,t)}},O.a.createElement(k.a,{className:"description",type:"multiline",onChange:this.handleChangeDescription,placeholder:"Description...",value:a}),O.a.createElement(U,{collection:n,title:"Casting Costs"}),O.a.createElement(L,{collection:o,title:"Effects"})))}}]),t}(D.Component),x()(l,"defaultProps",{model:{},onDelete:W.a,onToggleExpanded:W.a}),x()(l,"sortOptions",[{display:"icon-sort-name-asc",getter:function(e){return[e.name,e.level]}},{display:"icon-sort-value-asc",getter:function(e){return[e.level,e.name]}},{display:"icon-sort-value-desc",getter:function(e){return[-e.level,e.name]}}]),s=i))||s;t.a=q},I7n6:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var a=n("cFUw"),r=n.n(a),o=n("Nogc"),s=n.n(o),l=n("WEGp"),i=n.n(l),c=n("Amxr"),u=n.n(c),p=n("o1mq"),d=n.n(p),m=n("cEnY"),h=n.n(m),g=n("itEV"),f=n.n(g),v=n("cNEE"),y=n.n(v),E=n("q1tI"),C=n.n(E),N=n("i8i4"),x=n("x6zz"),b=(n("0dDA"),function(e){function t(){var e,n;s()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=u()(this,(e=d()(t)).call.apply(e,[this].concat(r))),y()(h()(n),"state",{expanded:!1}),y()(h()(n),"expander",C.a.createRef()),y()(h()(n),"handleToggle",function(){var e=n.expander.current.parentElement.classList,t=n.state.expanded;n.setState({expanded:!t},function(){n.props.onToggle(!t),e[t?"remove":"add"]("expanded")})}),y()(h()(n),"renderExpanded",function(){var e=n.props,t=e.children;return e.omitItemWrapper?t:C.a.createElement("div",{className:"expandable"}," ",t)}),n}return f()(t,e),i()(t,[{key:"componentWillMount",value:function(){this.setState({expanded:this.props.expandByDefault})}},{key:"componentDidMount",value:function(){this.expander.current.parentElement.classList.add("expandable-wrapper")}},{key:"render",value:function(){var e=this.props,t=e.toggleButtonParent,n=e.toggleButtonText,a=this.state.expanded?"expanded":"collapsed",o={className:"expandable-toggle icon-".concat(a),onClick:this.handleToggle,ref:this.expander},s=C.a.createElement("div",r()({},o,{text:n}));return C.a.createElement(E.Fragment,null,t?Object(N.createPortal)(s,t):s,this.state.expanded&&this.renderExpanded())}}]),t}(E.Component));y()(b,"defaultProps",{expandByDefault:!1,omitItemWrapper:!1,onToggle:x.a,toggleButtonParent:null,toggleButtonText:""})},IURI:function(e,t,n){},djCb:function(e,t,n){},e8LY:function(e,t,n){},t524:function(e,t,n){"use strict";var a=n("b696"),r=n.n(a),o=n("cFUw"),s=n.n(o),l=n("Nogc"),i=n.n(l),c=n("WEGp"),u=n.n(c),p=n("Amxr"),d=n.n(p),m=n("o1mq"),h=n.n(m),g=n("cEnY"),f=n.n(g),v=n("itEV"),y=n.n(v),E=n("cNEE"),C=n.n(E),N=n("ubaz"),x=n.n(N),b=n("uqjs"),A=n("q1tI"),D=n.n(A),O=n("U/5H"),k=n.n(O),S=n("1T+A"),I=n("YFLu");var z=n("x6zz"),T=n("DODz"),w=(n("e8LY"),"Uncategorized"),j=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,a){var r=e(n),o=e(a);if(Array.isArray(r)&&Array.isArray(o)){for(var s=0;s<r.length;s+=1)if(r[s]!==o[s])return t?o[s]<r[s]?-1:1:r[s]<o[s]?-1:1;return 0}if("number"===typeof r&&"number"===typeof o)return r===o?0:t?o<r?-1:1:r<o?-1:1;var l=String(r),i=String(o);return t?i.localeCompare(l):l.localeCompare(i)}};t.a=function(e,t){var n,a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=(t.sortOptions||[]).map(function(e){return x()({},e,{comparitor:j(e.getter),display:"string"===typeof e.display?D.a.createElement("span",{className:e.display}):e.display})});return a=n=function(n){function a(){var n,o;i()(this,a);for(var c=arguments.length,u=new Array(c),p=0;p<c;p++)u[p]=arguments[p];return o=d()(this,(n=h()(a)).call.apply(n,[this].concat(u))),C()(f()(o),"Component",t),C()(f()(o),"Model",e),C()(f()(o),"container",D.a.createRef()),C()(f()(o),"expandedItems",{}),C()(f()(o),"filterEl",D.a.createRef()),C()(f()(o),"onDataSnapshotDisposer",z.a),C()(f()(o),"onLayoutSnapshotDisposer",z.a),C()(f()(o),"sortable",null),C()(f()(o),"state",{expanded:{},sortOption:null}),C()(f()(o),"getCategoryItems",function(e,t){return t&&t!==w?e.filter(function(e){return(e.categories||[]).includes(t)}):e.filter(function(e){return 0===(e.categories||[]).length})}),C()(f()(o),"handleAdd",function(){o.props.collection.push(e.create({})),o.forceUpdate()}),C()(f()(o),"handleDelete",function(e){var t=e.target,n=parseInt(t.parentNode.getAttribute("data-index"),10);o.props.collection.deleteAt(n),o.forceUpdate()}),C()(f()(o),"handleFilterChange",function(e){var t=e.target;return o.props.layout.set({filter:t.value})}),C()(f()(o),"handleSort",function(){return o.props.collection.sortBy("name")}),C()(f()(o),"handleSortChange",function(e){var t=o.state.sortOption;o.setState({sortOption:t===e?null:e},function(){o.props.layout.set({sortOption:t===e?void 0:l.indexOf(e)})})}),C()(f()(o),"handleToggleCategorized",function(){o.props.layout.set({categorize:!o.props.layout.categorize})}),C()(f()(o),"handleToggleExpanded",function(e,t){o.setState(function(n){return x()({},n,{expanded:x()({},n.expanded,C()({},e,t))})})}),C()(f()(o),"renderCategoryWidget",function(){var e=o.props.layout,t=f()(o).categories;if(!t.length)return null;var n=["categorize icon-categorize",e.categorize?"on":"off"].join(" ");return D.a.createElement(D.a.Fragment,null,D.a.createElement("div",s()({className:n},{onClick:o.handleToggleCategorized})),D.a.createElement("select",{className:"filter",onChange:o.handleFilterChange,ref:o.filterEl,tabIndex:-1,value:e.filter},D.a.createElement("option",{value:""},"All"),t.map(function(e){return D.a.createElement("option",{key:e,value:e},e)})))}),C()(f()(o),"renderSortWidget",function(){return o.props.sortable&&l.length?D.a.createElement(S.a,{className:"sorter",onChange:o.handleSortChange,options:l,selected:o.state.sortOption}):null}),C()(f()(o),"renderCategory",function(e,t){var n=o.props.columns,a=o.getCategoryItems(t,e);if(!a.length)return null;var s=a.map(function(e){return e.categoryValue}),l=Math.min.apply(Math,r()(s)),i=Math.max.apply(Math,r()(s));return D.a.createElement("div",{key:e,className:"category"},D.a.createElement("div",{className:"details"},D.a.createElement("div",{className:"title"},"Category: ",e," (",a.length,")"),!Number.isNaN(l)&&!Number.isNaN(i)&&D.a.createElement("div",{className:"range"},l,"-",i)),D.a.createElement("div",{className:"category-items",style:{columns:n}},a.map(o.renderItem)))}),C()(f()(o),"renderItem",function(e){var n=o.props,a=n.collection,r=n.layout,s=n.sortable,l=o.state,i=l.expanded,c=l.sortOption,u=s&&null!==c,p=r&&r.categorize;return D.a.createElement("div",{className:"list-item-wrapper ".concat(i[e.hash]?"expanded":"").trim(),"data-index":a.indexOf(e),key:e.hash},!u&&!p&&D.a.createElement("div",{className:"drag-handle"}),D.a.createElement(t,{model:e,onDelete:a.delete,onToggleExpanded:o.handleToggleExpanded}),D.a.createElement("button",{className:"icon-remove",onClick:o.handleDelete}))}),o}return y()(a,n),u()(a,[{key:"componentDidMount",value:function(){var e=this;if(this.props.layout){var t=this.props.layout.sortOption;l.length&&void 0!==t&&this.setState({sortOption:l[t]||null}),this.onLayoutSnapshotDisposer=Object(b.onSnapshot)(this.props.layout,function(e,t,n){var a,r=this;return function(){for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];var i=n&&!a;clearTimeout(a),a=setTimeout(function(){a=null,n||e.apply(r,s)},t),i&&e.apply(r,s)}}(function(){return e.forceUpdate()},100,!0))}var n=this.props.sortable;n&&(this.sortable=k.a.create(this.container.current,{disabled:!n,draggable:".list-item-wrapper",handle:".drag-handle",onEnd:function(){e.container.current.classList.remove("dragging"),e.props.collection.replace(r()(e.container.current.querySelectorAll(".list-item-wrapper")).map(function(e){return parseInt(e.getAttribute("data-index"),10)}).map(function(t){return e.props.collection.at(t)}))},onStart:function(){return e.container.current.classList.add("dragging")}})),this.onDataSnapshotDisposer=Object(b.onSnapshot)(this.props.collection,function(){return e.forceUpdate()})}},{key:"componentWillReceiveProps",value:function(){this.sortable&&this.sortable.option("disabled",!this.props.sortable)}},{key:"componentWillUnmount",value:function(){this.onDataSnapshotDisposer(),this.onLayoutSnapshotDisposer()}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=void 0===n?"":n,r=t.columns,o=t.layout,s=void 0===o?{}:o,l=t.title,i=this.state.sortOption,c=this.categories,u=this.props.collection.asArray;null!==i&&(u=u.sort(i.comparitor));var p=Boolean(c.length);p&&s.filter&&(u=this.getCategoryItems(u,s.filter),c=[s.filter]);var d={columns:s.categorize?1:r};return D.a.createElement("div",{className:"list ".concat(a).trim(),ref:this.container,style:d},D.a.createElement("div",{className:"title-bar"},this.renderSortWidget(),this.renderCategoryWidget(),D.a.createElement("div",{className:"text"},l),D.a.createElement("button",{className:"add icon-add",onClick:this.handleAdd})),p&&s.categorize?c.map(function(t){return e.renderCategory(t,u)}):u.map(this.renderItem))}},{key:"categories",get:function(){var e=this.props.collection.asArray.reduce(function(e,t){return e.concat(t.categories||[])},[]);return e.length?Object(T.a)(e.filter(function(e){return e!==w})).sort().concat(w):[]}}]),a}(D.a.Component),C()(n,"defaultProps",x()({className:"",collection:Object(I.a)(e).create([]),columns:1,layout:void 0,sortable:!0,title:o.title||""},o)),a}},"y+pi":function(e,t,n){}}]);
//# sourceMappingURL=components-sheet-sheet~components-spell-spell.15df6c647993d56e296e.js.map