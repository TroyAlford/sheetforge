{"version":3,"sources":["webpack://sheetforge/./source/utilities/range.js","webpack://sheetforge/./source/components/Rating/Rating.js","webpack://sheetforge/./source/components/Attribute/Attribute.mdx","webpack://sheetforge/./source/components/Attribute/Attribute.js"],"names":["range","start","end","Math","TypeError","step","length","Array","apply","toConsumableArray_default","map","_","i","Rating","event","number","parseInt","_this","props","onChange","_this$props","allowExcess","current","iconExcess","iconOff","iconOn","maximum","total","math","react_default","a","createElement","className","ceil","bound","min","data-number","key","onClick","handleIconClick","title","Component","noop","MDXContent","_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default","this","_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default","_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default","call","layout","components","_babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0___default","react__WEBPACK_IMPORTED_MODULE_6___default","_mdx_js_tag__WEBPACK_IMPORTED_MODULE_7__","name","id","parentName","docz__WEBPACK_IMPORTED_MODULE_8__","__position","__code","__scope","Attribute","AttributeModel","CharacterModel","character","create","attributes","value","items","equipped","effects","targetId","modifier","traits","spells","isActive","Fragment","_components_Attribute__WEBPACK_IMPORTED_MODULE_9__","model","findBy","rating","React","observer","snapshot","e","toJSON","JSON","CACHE","conditions","forceUpdate","set","filter","effect","forEach","onDelete","raw","String","Number","max","_ref","isComputed","onSnapshotDisposer","onSnapshot","handleSnapshot","modifiedValue","concat","join","modifierClassName","Boolean","react__WEBPACK_IMPORTED_MODULE_9___default","_components_Editable__WEBPACK_IMPORTED_MODULE_10__","handleChangeName","onEditEnd","handleCommitName","handleChangeValue","handleCommitValue","onKeyDown","handleValueKeyDown","readOnlyValue","_components_Rating__WEBPACK_IMPORTED_MODULE_11__","type","_utilities_noop__WEBPACK_IMPORTED_MODULE_14__","display","getter","__webpack_exports__"],"mappings":"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","file":"static/js/components-attribute-attribute.65dd0f4a.js","sourcesContent":["export default (start, end) => {\n  if (\n    typeof start !== 'number' || typeof end !== 'number' ||\n    Math.round(start) !== start || Math.round(end) !== end\n  ) {\n    throw new TypeError('range(start, end) requires integer values for both start and end')\n  }\n\n  const step = (start <= end) ? 1 : -1\n  const length = Math.floor(Math.abs(end - start) / Math.abs(step)) + 1\n  return Array(...Array(length)).map((_, i) => start + (i * step))\n}\n","import React, { Component } from 'react'\nimport bound from '@/utilities/bound'\nimport math from '@/utilities/math'\nimport noop from '@/utilities/noop'\nimport range from '@/utilities/range'\nimport './Rating.scss'\n\nexport default class Rating extends Component {\n  static defaultProps = {\n    allowExcess: false,\n    current: 0,\n    iconExcess: <span className=\"dot excess icon-add\" />,\n    iconOff: <span className=\"dot empty\" />,\n    iconOn: <span className=\"dot filled\" />,\n    maximum: 5,\n    onChange: noop,\n  }\n\n  handleIconClick = (event) => {\n    const number = parseInt(event.target.getAttribute('data-number'), 10)\n    this.props.onChange(number === this.props.current ? number - 1 : number)\n  }\n\n  render = () => {\n    const { allowExcess, current, iconExcess, iconOff, iconOn, maximum } = this.props\n    const total = allowExcess ? math.max(current, maximum) : maximum\n\n    return (\n      <div className=\"rating\">\n        {(total > 0 || (allowExcess && current > 0))\n          ? range(1, Math.ceil(bound(total, { min: 1 }))).map(number => (\n            <span data-number={number} key={number} onClick={this.handleIconClick} title={number}>\n              {(number <= current && number <= maximum) && iconOn}\n              {(number > current && number <= maximum) && iconOff}\n              {(number > maximum) && iconExcess}\n            </span>\n          ))\n          : null\n        }\n      </div>\n    )\n  }\n}\n","\n  import React from 'react'\n  import { MDXTag } from '@mdx-js/tag'\n  import { Playground } from 'docz'\nimport Attribute from '@/components/Attribute'\nimport AttributeModel from '@/models/Attribute'\nimport CharacterModel from '@/models/Character'\n\nconst layoutProps = {\n  \n};\nexport default class MDXContent extends React.Component {\n  constructor(props) {\n    super(props)\n    this.layout = null\n  }\n  render() {\n    const { components, ...props } = this.props\n\n    return <MDXTag\n             name=\"wrapper\"\n             \n             components={components}>\n<MDXTag name=\"h2\" components={components} props={{\"id\":\"attribute\"}}>{`Attribute`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`The `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`Attribute`}</MDXTag>{` component displays the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`name`}</MDXTag>{` and `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`value`}</MDXTag>{` of an `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`Attribute`}</MDXTag>{` model. If this `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`Attribute`}</MDXTag>{` model is part of a `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`Character`}</MDXTag>{`, it will also display any applicable `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`Effect`}</MDXTag>{` modifiers.`}</MDXTag>\n<MDXTag name=\"p\" components={components}><MDXTag name=\"strong\" components={components} parentName=\"p\">{`Note`}</MDXTag>{`: You can hover your mouse over any of the modifier displays to see `}<MDXTag name=\"em\" components={components} parentName=\"p\">{`which effects`}</MDXTag>{` caused that modifier to be applied.`}</MDXTag>\n<Playground __position={0} __code={'() => {\\n  const character = CharacterModel.create({\\n    attributes: [\\n      { name: \\'Strength\\', value: 4 },\\n      { name: \\'Dexterity\\', value: 3 },\\n      { name: \\'Stamina\\', value: 4 },\\n      { name: \\'Charisma\\', value: 3 },\\n    ],\\n    items: [\\n      {\\n        equipped: true,\\n        name: \\'Belt of Dwarven Strength\\',\\n        effects: [{ targetId: \\'Strength\\', modifier: 2 }],\\n      },\\n      {\\n        equipped: true,\\n        name: \\\"Potion: Eagle\\'s Splendor\\\",\\n        effects: [{ targetId: \\'Charisma\\', modifier: 2 }],\\n      },\\n    ],\\n    traits: [\\n      {\\n        name: \\'Half Giant\\',\\n        effects: [{ targetId: \\'Strength\\', modifier: 4 }],\\n      },\\n    ],\\n    spells: [\\n      {\\n        isActive: true,\\n        name: \\'Curse: Rotting Flesh\\',\\n        effects: [\\n          { targetId: \\'Stamina\\', modifier: -2 },\\n          { targetId: \\'Charisma\\', modifier: -2 },\\n        ],\\n      },\\n    ],\\n  })\\n  return (\\n    <>\\n      <h2>Dexterity</h2>\\n      <p>No modifiers.</p>\\n      <Attribute model={character.attributes.findBy(\\'name\\', \\'Dexterity\\')} />\\n      <Attribute\\n        model={character.attributes.findBy(\\'name\\', \\'Dexterity\\')}\\n        rating\\n      />\\n      <h2>Strength</h2>\\n      <p>+2 from an equipped Item, +4 from a Trait</p>\\n      <Attribute model={character.attributes.findBy(\\'name\\', \\'Strength\\')} />\\n      <Attribute\\n        model={character.attributes.findBy(\\'name\\', \\'Strength\\')}\\n        rating\\n      />\\n\\n      <h2>Stamina</h2>\\n      <p>-2 from a Curse</p>\\n      <Attribute model={character.attributes.findBy(\\'name\\', \\'Stamina\\')} />\\n      <Attribute\\n        model={character.attributes.findBy(\\'name\\', \\'Stamina\\')}\\n        rating\\n      />\\n\\n      <h2>Charisma</h2>\\n      <p>+2 from an equipped Item, -2 from a Curse</p>\\n      <Attribute model={character.attributes.findBy(\\'name\\', \\'Charisma\\')} />\\n      <Attribute\\n        model={character.attributes.findBy(\\'name\\', \\'Charisma\\')}\\n        rating\\n      />\\n    </>\\n  )\\n}'} __scope={{props: this ? this.props : props,Attribute,AttributeModel,CharacterModel}}>\n  {() => {\n    const character = CharacterModel.create({\n      attributes: [\n        { name: 'Strength', value: 4 },\n        { name: 'Dexterity', value: 3 },\n        { name: 'Stamina', value: 4 },\n        { name: 'Charisma', value: 3 },\n      ],\n      items: [\n        { equipped: true, name: 'Belt of Dwarven Strength', effects: [{ targetId: 'Strength', modifier: 2 }] },\n        { equipped: true, name: 'Potion: Eagle\\'s Splendor', effects: [{ targetId: 'Charisma', modifier: 2 }] },\n      ],\n      traits: [\n        { name: 'Half Giant', effects: [{ targetId: 'Strength', modifier: 4 }] },\n      ],\n      spells: [\n        { isActive: true, name: 'Curse: Rotting Flesh', effects: [\n          { targetId: 'Stamina', modifier: -2 },\n          { targetId: 'Charisma', modifier: -2 },\n        ] },\n      ],\n    })\n    return (<>\n      <h2>Dexterity</h2>\n      <p>No modifiers.</p>\n      <Attribute model={character.attributes.findBy('name', 'Dexterity')} />\n      <Attribute model={character.attributes.findBy('name', 'Dexterity')} rating />\n  <h2>Strength</h2>\n  <p>+2 from an equipped Item, +4 from a Trait</p>\n  <Attribute model={character.attributes.findBy('name', 'Strength')} />\n  <Attribute model={character.attributes.findBy('name', 'Strength')} rating />\n\n  <h2>Stamina</h2>\n  <p>-2 from a Curse</p>\n  <Attribute model={character.attributes.findBy('name', 'Stamina')} />\n  <Attribute model={character.attributes.findBy('name', 'Stamina')} rating />\n\n  <h2>Charisma</h2>\n  <p>+2 from an equipped Item, -2 from a Curse</p>\n  <Attribute model={character.attributes.findBy('name', 'Charisma')} />\n  <Attribute model={character.attributes.findBy('name', 'Charisma')} rating />\n</>)\n  }}\n</Playground>\n           </MDXTag>\n  }\n}\n  ","import { observer } from 'mobx-react'\nimport { onSnapshot } from 'mobx-state-tree'\nimport React, { Component } from 'react'\nimport Editable from '@/components/Editable'\nimport Rating from '@/components/Rating'\nimport bound from '@/utilities/bound'\nimport math from '@/utilities/math'\nimport noop from '@/utilities/noop'\nimport './Attribute.scss'\n\n@observer class Attribute extends Component {\n  static defaultProps = {\n    model: {},\n    onDelete: noop,\n    rating: false,\n  }\n\n  static sortOptions = [{\n    display: 'icon-sort-name-asc',\n    getter: model => model.name,\n  }, {\n    display: 'icon-sort-value-asc',\n    getter: model => model.modifiedValue(),\n  }]\n\n  CACHE = {}\n\n  componentDidMount() {\n    this.onSnapshotDisposer = onSnapshot(this.props.model.character, this.handleSnapshot)\n  }\n  componentWillUnmount() { this.onSnapshotDisposer() }\n\n  handleSnapshot = (snapshot) => {\n    const effects = this.props.model.effects().map(e => e.toJSON())\n    if (\n      JSON.stringify(effects) !== JSON.stringify(this.CACHE.effects) ||\n      JSON.stringify(snapshot.conditions) !== this.CACHE.conditions ||\n      this.CACHE.value !== this.props.model.value()\n    ) {\n      this.CACHE.conditions = JSON.stringify(snapshot.conditions)\n      this.CACHE.effects = effects\n      this.CACHE.value = this.props.model.value()\n      this.forceUpdate()\n    }\n  }\n  handleChangeName = (name) => {\n    const { id } = this.props.model\n    this.props.model.set({ name })\n    this.props.model.character.effects()\n      .filter(effect => effect.targetId === id)\n      .forEach((effect) => {\n        effect.set({ targetId: '' })\n        effect.set({ targetId: this.props.model.id })\n      })\n  }\n  handleCommitName = () => (this.props.model.name === '' && this.props.onDelete(this.props.model))\n  handleChangeValue = (raw) => {\n    let value = String(raw).replace(/[^a-z0-9+*()\\-/, ]/gi, '')\n    if (!Number.isNaN(Number(raw))) {\n      value = bound(Number(raw) || '', { max: 999, min: -99 })\n    }\n    this.props.model.set({ raw: value })\n  }\n  handleCommitValue = () => {\n    if (String(this.props.model.raw) === '') this.props.model.set({ raw: 0 })\n  }\n  handleValueKeyDown = ({ key }) => {\n    const { model } = this.props\n    if (model.isComputed) return\n\n    switch (key) {\n      case 'ArrowUp':\n        model.set({ raw: model.value() + 1 }); break\n      case 'ArrowDown':\n        model.set({ raw: model.value() - 1 }); break\n      default:\n    }\n  }\n\n  render() {\n    const { model, rating } = this.props\n    const modifiedValue = model.modifiedValue()\n    const value = model.value()\n\n    const className = [\n      'attribute',\n      `as-${rating ? 'rating' : 'numeric'}`,\n      `${model.isComputed ? 'is' : 'not'}-computed`,\n    ].join(' ')\n\n    const modifier = model.modifier()\n    const modifierClassName = [\n      'modifier',\n      modifier > 0 && 'positive',\n      modifier < 0 && 'negative',\n      modifier === 0 && 'zero',\n    ].filter(Boolean).join(' ')\n\n    return (\n      <div className={className}>\n        <Editable\n          className=\"name\"\n          onChange={this.handleChangeName}\n          onEditEnd={this.handleCommitName}\n          value={model.name}\n        />\n        <Editable\n          className=\"value rating\"\n          onChange={this.handleChangeValue}\n          onEditEnd={this.handleCommitValue}\n          onKeyDown={this.handleValueKeyDown}\n          readOnlyValue={(\n            <Rating\n              allowExcess\n              current={modifiedValue}\n              maximum={value}\n            />\n          )}\n          type=\"text\"\n          value={model.raw}\n        />\n        <Editable\n          className=\"value numeric\"\n          onChange={this.handleChangeValue}\n          onEditEnd={this.handleCommitValue}\n          onKeyDown={this.handleValueKeyDown}\n          readOnlyValue={value}\n          type=\"text\"\n          value={model.raw}\n        />\n        {model.effects().length !== 0 && (\n          <div\n            className={modifierClassName}\n            title={model.modifierText()}\n          >\n            {modifiedValue}\n          </div>\n        )}\n      </div>\n    )\n  }\n}\n\nexport default Attribute\n"],"sourceRoot":""}