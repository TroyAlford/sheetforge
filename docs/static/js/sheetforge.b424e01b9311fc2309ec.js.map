{"version":3,"sources":["webpack://sheetforge/webpack/universalModuleDefinition","webpack://sheetforge/./source/index.js","webpack://sheetforge/./source/components/MultiToggle/MultiToggle.js","webpack://sheetforge/./source/components/ResourceCost/ResourceCost.js","webpack://sheetforge/./source/components/Spell/Spell.js","webpack://sheetforge/./source/models/Descriptor/Descriptor.js","webpack://sheetforge/./source/models/Item/Item.js","webpack://sheetforge/./source/utilities/unique.js","webpack://sheetforge/./source/utilities/findParent.js","webpack://sheetforge/./source/models/Effect/Effect.js","webpack://sheetforge/./source/components/Expandable/Expandable.js","webpack://sheetforge/./source/models/Character/Character.js","webpack://sheetforge/./source/utilities/flatten.js","webpack://sheetforge/./source/models/ResourceCost/ResourceCost.js","webpack://sheetforge/./source/models/Spell/Spell.js","webpack://sheetforge/./source/utilities/range.js","webpack://sheetforge/./source/components/Rating/Rating.js","webpack://sheetforge/./source/components/Trait/Trait.js","webpack://sheetforge/./source/components/Editable/Editable.js","webpack://sheetforge/./source/utilities/splitObjectPath.js","webpack://sheetforge/./source/utilities/getPathValue.js","webpack://sheetforge/./source/models/generic/IEditable/IEditable.js","webpack://sheetforge/./source/utilities/setPathValue.js","webpack://sheetforge/./source/components/Descriptor/Descriptor.js","webpack://sheetforge/./source/models/generic/Collection/Collection.js","webpack://sheetforge/./source/utilities/compareBy.js","webpack://sheetforge/./source/models/Resource/Resource.js","webpack://sheetforge/./source/models/Trait/Trait.js","webpack://sheetforge/./source/components/Effect/Effect.js","webpack://sheetforge/./source/components/Skill/Skill.js","webpack://sheetforge/./source/utilities/bound.js","webpack://sheetforge/./source/utilities/hash.js","webpack://sheetforge/./source/models/generic/IIdentity/IIdentity.js","webpack://sheetforge/./source/components/Attribute/Attribute.js","webpack://sheetforge/./source/utilities/math/math.js","webpack://sheetforge/./source/utilities/math/toSymbols.js","webpack://sheetforge/./source/models/Attribute/Attribute.js","webpack://sheetforge/./source/utilities/math/calculate.js","webpack://sheetforge/./source/components/Item/Item.js","webpack://sheetforge/./source/components/List/List.js","webpack://sheetforge/./source/utilities/debounce.js","webpack://sheetforge/./source/components/index.js","webpack://sheetforge/./source/components/Conditions/Conditions.js","webpack://sheetforge/./source/components/Layout/Layout.js","webpack://sheetforge/./source/models/index.js","webpack://sheetforge/./source/components/Sheet/Sheet.js","webpack://sheetforge/./source/models/generic/ICategorizable/ICategorizable.js","webpack://sheetforge/./source/models/Skill/Skill.js","webpack://sheetforge/./source/components/Resource/Resource.js","webpack://sheetforge/./source/utilities/noop.js","webpack://sheetforge/./source/models/types/between.js","webpack://sheetforge/./source/models/Layout/Layout.js"],"names":["root","factory","exports","module","define","amd","window","__webpack_require__","r","__webpack_exports__","_models_Attribute__WEBPACK_IMPORTED_MODULE_1__","d","_models_Character__WEBPACK_IMPORTED_MODULE_2__","_models_Descriptor__WEBPACK_IMPORTED_MODULE_3__","_models_Effect__WEBPACK_IMPORTED_MODULE_4__","_models_Item__WEBPACK_IMPORTED_MODULE_5__","_models_Layout__WEBPACK_IMPORTED_MODULE_6__","_models_ResourceCost__WEBPACK_IMPORTED_MODULE_7__","_models_Resource__WEBPACK_IMPORTED_MODULE_8__","_components_Sheet__WEBPACK_IMPORTED_MODULE_9__","_models_Skill__WEBPACK_IMPORTED_MODULE_10__","_models_Spell__WEBPACK_IMPORTED_MODULE_11__","_models_Trait__WEBPACK_IMPORTED_MODULE_12__","MultiToggle","selected","_ref","target","index","_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default","children","indexOf","_this","props","options","undefined","onChange","setState","_this2","this","_this$props","className","state","react__WEBPACK_IMPORTED_MODULE_8___default","a","createElement","concat","trim","map","option","key","onClick","handleOptionClick","display","Component","_utilities_noop__WEBPACK_IMPORTED_MODULE_9__","components_ResourceCost_ResourceCost","observer","amount","model","set","value","resourceName","_this$props$model","available","react_default","handleChangeResource","_ref2","name","Editable","max","min","handleChangeAmount","getter","EffectList","ListOf","Effect_Effect","Effect","ListOfCosts","models_ResourceCost_ResourceCost","Spell","noop","cast","forceUpdate","description","level","onDelete","isActive","resources","character","onResourceSnapshotDisposer","onSnapshot","_this3","costs","effects","hash","isAffordable","handleToggleActive","handleChangeName","onEditEnd","handleCommitName","handleChangeLevel","handleCast","disabled","Expandable","onToggle","expanded","onToggleExpanded","type","handleChangeDescription","placeholder","collection","title","mobx_state_tree__WEBPACK_IMPORTED_MODULE_0__","_models_generic_ICategorizable__WEBPACK_IMPORTED_MODULE_1__","_models_generic_IEditable__WEBPACK_IMPORTED_MODULE_2__","_models_generic_IIdentity__WEBPACK_IMPORTED_MODULE_3__","compose","ICategorizable","named","_models_Effect__WEBPACK_IMPORTED_MODULE_1__","_models_generic_Collection__WEBPACK_IMPORTED_MODULE_2__","_models_generic_ICategorizable__WEBPACK_IMPORTED_MODULE_3__","_models_generic_IEditable__WEBPACK_IMPORTED_MODULE_4__","_models_generic_IIdentity__WEBPACK_IMPORTED_MODULE_5__","CollectionOf","equipped","arguments","length","filter","item","all","child","filterFunction","Boolean","hasParent","parent","getParent","_models_generic_IEditable__WEBPACK_IMPORTED_MODULE_3__","_models_generic_IIdentity__WEBPACK_IMPORTED_MODULE_4__","_utilities_findParent__WEBPACK_IMPORTED_MODULE_5__","condition","modifier","targetId","actions","self","afterAttach","attributes","findParent","p","isCharacter","isApplicable","source","Object","sourceName","React","classList","expander","current","parentElement","omitItemWrapper","expandByDefault","add","_this$props2","toggleButtonParent","toggleButtonText","toggleState","buttonProps","handleToggle","ref","toggleButton","_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default","text","react__WEBPACK_IMPORTED_MODULE_8__","createPortal","renderExpanded","_utilities_noop__WEBPACK_IMPORTED_MODULE_10__","mobx_state_tree","IIdentity","IEditable","Attribute","conditions","types","string","descriptors","Descriptor","experience","items","Item","Resource","skills","Skill","spells","traits","Trait","volatile","activeEffects","effect","availableConditions","e","asArray","sort","i","flatten","array","depth","Infinity","Array","TypeError","JSON","reduce","next","trait","values","spell","_models_generic_Collection__WEBPACK_IMPORTED_MODULE_1__","_models_Resource__WEBPACK_IMPORTED_MODULE_4__","views","resource","_models_ResourceCost__WEBPACK_IMPORTED_MODULE_6__","_utilities_findParent__WEBPACK_IMPORTED_MODULE_7__","cost","every","range","start","end","step","Math","apply","toConsumableArray_default","_","Rating","event","number","parseInt","allowExcess","iconExcess","iconOff","iconOn","maximum","total","math","bound","data-number","handleIconClick","_models_Effect__WEBPACK_IMPORTED_MODULE_13__","_components_Effect__WEBPACK_IMPORTED_MODULE_10__","_components_Editable__WEBPACK_IMPORTED_MODULE_9__","handleChangeValue","_components_Expandable__WEBPACK_IMPORTED_MODULE_11__","_utilities_noop__WEBPACK_IMPORTED_MODULE_14__","TYPES","editing","resetValue","_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_1___default","includes","handleToggleEditing","editor","editorType","getEditorType","focus","forceEditMode","setSelectionRange","parseFloat","Number","ctrlKey","metaKey","onKeyDown","_utilities_noop__WEBPACK_IMPORTED_MODULE_11__","isDefaultPrevented","resetChanges","readOnly","onEditStart","select","react__WEBPACK_IMPORTED_MODULE_9___default","checked","toggleBoolean","createRefWithAutoFocus","paragraphs","split","line","join","onBlur","handleChange","onFocus","selectOnFocus","handleKeys","onKeyPress","onKeyUp","rows","renderStatic","readOnlyValue","showPlaceholder","displayValue","renderBoolean","renderSlider","renderMultiline","renderNumber","renderText","_this$props3","classes","handleReceivingFocus","tabIndex","renderEditor","PATH_SPLITTER","splitObjectPath","path","getPathValue","object","property","pop","o","isIEditable","savedVersion","isDirty","deepEqual","toJSON","afterCreate","isPathDirty","initial","markAsClean","isObservableArray","reset","setPathValue","typeof_default","TYPE","TypedArrayWrapper","slice","first","last","at","n","clear","delete","deleteAt","fn","find","findBy","findById","id","identifierAttribute","forEach","searchElement","fromIndex","element","insert","push","_len","_key","replace","shift","some","sortBy","direction","prop","reversed","objectA","objectB","String","b","compareBy","splice","deleteCount","toObject","keyProp","valueProp","entry","objectSpread_default","defineProperty_default","unshift","_len2","_key2","postProcessSnapshot","custom","fromSnapshot","snapshot","create","getValidationMessage","f","isTargetType","_this$props$model$con","handleChangeTarget","handleChangeModifier","handleChangeCondition","mastery","theory","onChangeName","onChangeTheory","onChangeMastery","randomHash","radix","h","char","toString","CACHE","raw","isComputed","onSnapshotDisposer","handleSnapshot","rating","modifiedValue","modifierClassName","_components_Editable__WEBPACK_IMPORTED_MODULE_10__","handleCommitValue","handleValueKeyDown","_components_Rating__WEBPACK_IMPORTED_MODULE_11__","mathjs_core__WEBPACK_IMPORTED_MODULE_0__","core","require","toSymbols","expression","fns","symbols","node","computing","sum","modifierText","computed","symbol","attribute","data","defaultSymbolValue","safeData","calculate","error","process","preProcessSnapshot","objectWithoutProperties_default","handleToggleEquipped","NO_CATEGORY","buildSorter","A","B","aString","bString","Model","_class","_temp","sortOptions","sorter","comparitor","_React$Component","List","_getPrototypeOf2","classCallCheck_default","args","possibleConstructorReturn_default","getPrototypeOf_default","call","assertThisInitialized_default","createRef","sortOption","category","layout","clicked","categorize","categories","Fragment","extends_default","handleToggleCategorized","handleFilterChange","filterEl","sortable","handleSortChange","columns","categoryItems","getCategoryItems","categoryValue","style","renderItem","_this$state","sorted","categorized","data-index","handleToggleExpanded","handleDelete","inherits_default","createClass_default","sortOptionIndex","onLayoutSnapshotDisposer","func","wait","immediate","timeout","callNow","clearTimeout","setTimeout","debounce","Sortable_default","container","draggable","handle","onEnd","remove","querySelectorAll","targetIndex","onStart","onDataSnapshotDisposer","_this$props2$classNam","_this$props2$layout","hasCategories","listStyle","renderSortWidget","renderCategoryWidget","handleAdd","renderCategory","get","list","unique","components","_Component","Conditions","isCurrent","handleCheckbox","renderCondition","react","Layout","snapshotJSON","parentColumns","colSpan","width","titleBar","handleChangeTitle","models","Attribute_Attribute","Descriptor_Descriptor","Item_Item","Resource_Resource","Skill_Skill","Spell_Spell","Sheet","size","matches","typename","toLowerCase","Layout_Layout_Layout","renderComponent","onCharacterSnapshotDisposer","handleWindowResize","onMount","components_Conditions_Conditions","bind","_utilities_noop__WEBPACK_IMPORTED_MODULE_1__","_utilities_unique__WEBPACK_IMPORTED_MODULE_2__","getValue","isICategorizable","getCategories","lastUsedName","isComplex","isSimple","handleChangeCurrent","handleChangeMaximum","_components_Rating__WEBPACK_IMPORTED_MODULE_10__","between","defaultTo","optional","refinement","late"],"mappings":"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","file":"static/js/sheetforge.bb2ea737.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"sheetforge\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"sheetforge\"] = factory();\n\telse\n\t\troot[\"sheetforge\"] = factory();\n})(window, function() {\nreturn ","import '@fontello/css/sheetforge-embedded'\n\nexport { default as AttributeModel } from '@/models/Attribute'\nexport { default as CharacterModel } from '@/models/Character'\nexport { default as DescriptorModel } from '@/models/Descriptor'\nexport { default as EffectModel } from '@/models/Effect'\nexport { default as ItemModel } from '@/models/Item'\nexport { default as LayoutModel } from '@/models/Layout'\nexport { default as ResourceCostModel } from '@/models/ResourceCost'\nexport { default as ResourceModel } from '@/models/Resource'\nexport { default as Sheet } from '@/components/Sheet'\nexport { default as SkillModel } from '@/models/Skill'\nexport { default as SpellModel } from '@/models/Spell'\nexport { default as TraitModel } from '@/models/Trait'\n","import React, { Component } from 'react'\nimport noop from '@/utilities/noop'\nimport './MultiToggle.scss'\n\nexport default class MultiToggle extends Component {\n  static defaultProps = {\n    className: '',\n    onChange: noop,\n    options: [],\n    selected: undefined,\n  }\n\n  state = { selected: null }\n\n  handleOptionClick = ({ target }) => {\n    const index = [...target.parentElement.children].indexOf(target)\n    const selected = this.props.options[index]\n\n    if (this.props.selected !== undefined) {\n      this.props.onChange(selected)\n    } else {\n      this.setState({ selected })\n    }\n  }\n\n  render() {\n    const { className, options } = this.props\n    const selected = this.props.selected !== undefined\n      ? this.props.selected\n      : this.state.selected\n\n    return (\n      <div className={`multi-toggle ${className}`.trim()}>\n        {options.map((option, key) => (\n          <div\n            className={`toggle ${option === selected ? 'on' : 'off'}`.trim()}\n            key={key}\n            onClick={this.handleOptionClick}\n          >\n            {option.display}\n          </div>\n        ))}\n      </div>\n    )\n  }\n}\n","import { observer } from 'mobx-react'\nimport React, { Component } from 'react'\nimport Editable from '@/components/Editable'\nimport './ResourceCost.scss'\n\n@observer class ResourceCost extends Component {\n  static defaultProps = {\n    model: {},\n  }\n\n  static sortOptions = [{\n    display: 'icon-sort-name-asc',\n    getter: model => model.resourceName,\n  }, {\n    display: 'icon-sort-value-asc',\n    getter: model => model.amount,\n  }]\n\n  handleChangeAmount = amount => this.props.model.set({ amount })\n  handleChangeResource = ({ target: { value } }) => this.props.model.set({ resourceName: value })\n\n  render() {\n    const { amount, available, resourceName } = this.props.model\n\n    return (\n      <div className=\"resource-cost\">\n        <select className=\"resource-id\" value={resourceName} onChange={this.handleChangeResource}>\n          {available.map(({ name }) => (\n            <option key={name} value={name}>{name}</option>\n          ))}\n        </select>\n        <Editable\n          className=\"amount\"\n          max={999}\n          min={-99}\n          onChange={this.handleChangeAmount}\n          value={amount}\n        />\n      </div>\n    )\n  }\n}\n\nexport default ResourceCost\n","import { observer } from 'mobx-react'\nimport { onSnapshot } from 'mobx-state-tree'\nimport React, { Component } from 'react'\nimport Editable from '@/components/Editable'\nimport Effect from '@/components/Effect'\nimport Expandable from '@/components/Expandable'\nimport ListOf from '@/components/List'\nimport ResourceCost from '@/components/ResourceCost'\nimport EffectModel from '@/models/Effect'\nimport ResourceCostModel from '@/models/ResourceCost'\nimport noop from '@/utilities/noop'\nimport './Spell.scss'\n\nconst EffectList = ListOf(EffectModel, Effect, { className: 'effect-list' })\n\nconst ListOfCosts = ListOf(ResourceCostModel, ResourceCost, {\n  className: 'resource-cost-list',\n})\n\n@observer class Spell extends Component {\n  static defaultProps = {\n    model: {},\n    onDelete: noop,\n    onToggleExpanded: noop,\n  }\n\n  static sortOptions = [{\n    display: 'icon-sort-name-asc',\n    getter: model => [model.name, model.level],\n  }, {\n    display: 'icon-sort-value-asc',\n    getter: model => [model.level, model.name],\n  }, {\n    display: 'icon-sort-value-desc',\n    getter: model => [-model.level, model.name],\n  }]\n\n  onResourceSnapshotDisposer = noop\n\n  componentDidMount() {\n    const { resources } = this.props.model.character\n    this.onResourceSnapshotDisposer = onSnapshot(resources, () => this.forceUpdate())\n  }\n  componentWillUnmount() { this.onResourceSnapshotDisposer() }\n\n  handleCast = () => {\n    this.props.model.cast()\n    this.forceUpdate()\n  }\n\n  handleChangeDescription = description => this.props.model.set({ description })\n  handleChangeLevel = level => this.props.model.set({ level })\n  handleChangeName = name => this.props.model.set({ name })\n  handleCommitName = () => (this.props.model.name === '' && this.props.onDelete(this.props.model))\n  handleToggleActive = () => this.props.model.set({ isActive: !this.props.model.isActive })\n\n  render() {\n    const {\n      costs, description, name, effects, hash, isActive, isAffordable, level,\n    } = this.props.model\n\n    return (\n      <div className={`spell ${isActive ? '' : 'in'}active`}>\n        <Editable className=\"is-active\" onChange={this.handleToggleActive} value={isActive} />\n        <Editable\n          className=\"name\"\n          onChange={this.handleChangeName}\n          onEditEnd={this.handleCommitName}\n          value={name}\n        />\n        <Editable\n          className=\"level\"\n          onChange={this.handleChangeLevel}\n          value={level}\n        />\n        <button className=\"cast icon-magic\" onClick={this.handleCast} disabled={!isAffordable()} />\n        <Expandable onToggle={expanded => this.props.onToggleExpanded(hash, expanded)}>\n          <Editable\n            className=\"description\"\n            type=\"multiline\"\n            onChange={this.handleChangeDescription}\n            placeholder=\"Description...\"\n            value={description}\n          />\n          <ListOfCosts collection={costs} title=\"Casting Costs\" />\n          <EffectList collection={effects} title=\"Effects\" />\n        </Expandable>\n      </div>\n    )\n  }\n}\n\nexport default Spell\n","import { types } from 'mobx-state-tree'\nimport ICategorizable from '@/models/generic/ICategorizable'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\n\nexport default types.compose(\n  IIdentity,\n  ICategorizable(),\n  IEditable,\n  types.model({\n    name: 'New Descriptor...',\n    value: '',\n  })\n).named('Descriptor')\n","import { types } from 'mobx-state-tree'\nimport Effect from '@/models/Effect'\nimport CollectionOf from '@/models/generic/Collection'\nimport ICategorizable from '@/models/generic/ICategorizable'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\n\nexport default types.compose(\n  IIdentity,\n  ICategorizable(),\n  IEditable,\n  types.model({\n    description: '',\n    effects: CollectionOf(Effect),\n    equipped: false,\n    name: 'New Item...',\n  }),\n).named('Item')\n","export default (array = []) => (\n  array.filter((item, index, all) => all.indexOf(item) === index)\n)\n","import { getParent, hasParent } from 'mobx-state-tree'\n\nexport default (child, filterFunction = Boolean) => {\n  if (!hasParent(child)) { return null }\n\n  let parent = getParent(child)\n  while (parent) {\n    if (filterFunction(parent)) {\n      return parent\n    }\n\n    if (!hasParent(parent)) { return null }\n    parent = getParent(parent)\n  }\n\n  return null\n}\n","import { types } from 'mobx-state-tree'\nimport Attribute from '@/models/Attribute'\nimport CollectionOf from '@/models/generic/Collection'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\nimport findParent from '@/utilities/findParent'\n\nexport default types.compose(\n  IIdentity,\n  IEditable,\n  types.model({\n    condition: '',\n    modifier: 0,\n    targetId: '',\n  }).actions(self => ({\n    afterAttach() {\n      if (!self.targetId && self.available().length) {\n        // eslint-disable-next-line no-param-reassign\n        self.targetId = self.available().first.id\n      }\n    },\n\n    available() {\n      const character = self.character()\n      return character ? character.attributes : CollectionOf(Attribute).create([])\n    },\n    character() { return findParent(self, p => p.isCharacter) },\n    isApplicable() {\n      const character = self.character()\n      return Boolean(\n        !self.condition ||\n        (character && character.conditions.includes(self.condition))\n      )\n    },\n    source() { return findParent(self, p => p.name) || null },\n    sourceName() { return self.source() ? self.source().name : 'Unknown' },\n    target() {\n      const character = self.character()\n      return character ? character.attributes.findBy('name', self.targetId) : null\n    },\n  }))\n).named('Effect')\n","import React, { Component, Fragment } from 'react'\nimport { createPortal } from 'react-dom'\nimport noop from '@/utilities/noop'\nimport './Expandable.scss'\n\nexport default class Expandable extends Component {\n  static defaultProps = {\n    expandByDefault: false,\n    omitItemWrapper: false,\n    onToggle: noop,\n    toggleButtonParent: null,\n    toggleButtonText: '',\n  }\n\n  state = {\n    expanded: false,\n  }\n\n  expander = React.createRef()\n\n  componentWillMount() {\n    this.setState({ expanded: this.props.expandByDefault })\n  }\n  componentDidMount() {\n    this.expander.current.parentElement.classList.add('expandable-wrapper')\n  }\n\n  handleToggle = () => {\n    const { classList } = this.expander.current.parentElement\n    const { expanded } = this.state\n\n    // eslint-disable-next-line react/no-access-state-in-setstate\n    this.setState({ expanded: !expanded }, () => {\n      this.props.onToggle(!expanded)\n      classList[!expanded ? 'add' : 'remove']('expanded')\n    })\n  }\n\n  renderExpanded = () => {\n    const { children, omitItemWrapper } = this.props\n    return omitItemWrapper\n      ? children\n      : <div className=\"expandable\"> {children}</div>\n  }\n\n  render() {\n    const { toggleButtonParent, toggleButtonText } = this.props\n    const toggleState = this.state.expanded ? 'expanded' : 'collapsed'\n    const buttonProps = {\n      className: `expandable-toggle icon-${toggleState}`,\n      onClick: this.handleToggle,\n      ref: this.expander,\n    }\n\n    const toggleButton = <div {...buttonProps} text={toggleButtonText} />\n    return (\n      <Fragment>\n        {toggleButtonParent ? createPortal(toggleButton, toggleButtonParent) : toggleButton}\n        {this.state.expanded && this.renderExpanded()}\n      </Fragment>\n    )\n  }\n}\n","import { types } from 'mobx-state-tree'\nimport Attribute from '@/models/Attribute'\nimport Descriptor from '@/models/Descriptor'\nimport CollectionOf from '@/models/generic/Collection'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\nimport Item from '@/models/Item'\nimport Resource from '@/models/Resource'\nimport Skill from '@/models/Skill'\nimport Spell from '@/models/Spell'\nimport Trait from '@/models/Trait'\nimport flatten from '@/utilities/flatten'\n\nexport default types.compose(\n  IIdentity,\n  IEditable,\n  types.model({\n    attributes: CollectionOf(Attribute),\n    conditions: CollectionOf(types.string), // ['vs Goblins', 'Crinos Form']\n    descriptors: CollectionOf(Descriptor),\n    experience: 0,\n    items: CollectionOf(Item), // equipped / unequipped, have Effects\n    resources: CollectionOf(Resource),\n    skills: CollectionOf(Skill),\n    spells: CollectionOf(Spell),\n    traits: CollectionOf(Trait), // have Effects\n  }).volatile(() => ({\n    isCharacter: true,\n  })).actions(self => ({\n    activeEffects() {\n      return self.effects().filter(effect => effect && effect.isApplicable())\n    },\n    availableConditions() {\n      return self.effects()\n        .map(e => e.condition).concat(self.conditions.asArray)\n        .sort()\n        .filter((effect, i, all) => !i || effect !== all[i - 1])\n        .filter(Boolean)\n    },\n    effects() {\n      return flatten([\n        // Trait Effects first, because they're inherent\n        self.traits.filter(Boolean).map(trait => trait.effects.values),\n        // Direct Effects second, because they're cast on the character\n        self.spells.filter(spell => spell.isActive).map(spell => spell.effects.values),\n        // Item Effects third, because they're indirect\n        self.items.filter(item => item.equipped).map(item => item.effects.values),\n      ]).filter(Boolean)\n    },\n  }))\n).named('Character')\n","export default function flatten(array, depth = Infinity) {\n  if (!array || !Array.isArray(array)) {\n    throw new TypeError(`cannot flatten non-Array value ${JSON.stringify(array)}`)\n  }\n\n  return array.reduce((all, next) => {\n    if (depth > 1 && next && Array.isArray(next)) {\n      return all.concat(flatten(next, depth - 1))\n    }\n\n    return all.concat(next)\n  }, [])\n}\n","import { types } from 'mobx-state-tree'\nimport CollectionOf from '@/models/generic/Collection'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\nimport Resource from '@/models/Resource'\nimport findParent from '@/utilities/findParent'\n\nexport default types.compose(\n  IIdentity,\n  IEditable,\n  types.model({\n    amount: 0,\n    resourceName: '',\n  }).views(self => ({\n    get available() {\n      return self.character ? self.character.resources : CollectionOf(Resource).create([])\n    },\n    get character() { return findParent(self, p => p.isCharacter) },\n  })).actions(self => ({\n    afterAttach() {\n      if (!self.resourceName && self.available.length) {\n        // eslint-disable-next-line no-param-reassign\n        self.resourceName = self.available.first.name\n      }\n    },\n    resource() {\n      if (!self.character) return null\n      return self.character.resources.findBy('name', self.resourceName)\n    },\n  }))\n).named('Cost')\n","import { types } from 'mobx-state-tree'\nimport Effect from '@/models/Effect'\nimport CollectionOf from '@/models/generic/Collection'\nimport ICategorizable from '@/models/generic/ICategorizable'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\nimport ResourceCost from '@/models/ResourceCost'\nimport findParent from '@/utilities/findParent'\n\nexport default types.compose(\n  IIdentity,\n  ICategorizable(self => self.level),\n  IEditable,\n  types.model({\n    costs: CollectionOf(ResourceCost), // Resources\n    description: '',\n    effects: CollectionOf(Effect),\n    isActive: false,\n    level: 0,\n    name: 'New Spell...',\n  }).views(self => ({\n    get character() { return findParent(self, p => p.isCharacter) },\n  })).actions(self => ({\n    cast() {\n      if (self.isAffordable()) {\n        self.costs.forEach((cost) => {\n          const resource = cost.resource()\n          resource.set({ current: resource.current - cost.amount })\n        })\n      }\n    },\n    isAffordable() {\n      if (!self.character || !self.costs.length) return true\n      return self.costs.every(cost => (\n        cost.resource() && cost.resource().current >= cost.amount\n      ))\n    },\n  }))\n).named('Spell')\n","export default (start, end) => {\n  const step = (start <= end) ? 1 : -1\n  const length = (Math.abs(end - start) / Math.abs(step)) + 1\n  return Array(...Array(length)).map((_, i) => start + (i * step))\n}\n","import React, { Component } from 'react'\nimport bound from '@/utilities/bound'\nimport math from '@/utilities/math'\nimport noop from '@/utilities/noop'\nimport range from '@/utilities/range'\nimport './Rating.scss'\n\nexport default class Rating extends Component {\n  static defaultProps = {\n    allowExcess: false,\n    current: 0,\n    iconExcess: <span className=\"dot excess icon-add\" />,\n    iconOff: <span className=\"dot empty\" />,\n    iconOn: <span className=\"dot filled\" />,\n    maximum: 5,\n    onChange: noop,\n  }\n\n  handleIconClick = (event) => {\n    const number = parseInt(event.target.getAttribute('data-number'), 10)\n    this.props.onChange(number === this.props.current ? number - 1 : number)\n  }\n\n  render = () => {\n    const { allowExcess, current, iconExcess, iconOff, iconOn, maximum } = this.props\n    const total = allowExcess ? math.max(current, maximum) : maximum\n\n    return (\n      <div className=\"rating\">\n        {(total > 0 || (allowExcess && current > 0))\n          ? range(1, bound(total, { min: 1 })).map(number => (\n            <span data-number={number} key={number} onClick={this.handleIconClick} title={number}>\n              {(number <= current && number <= maximum) && iconOn}\n              {(number > current && number <= maximum) && iconOff}\n              {(number > maximum) && iconExcess}\n            </span>\n          ))\n          : null\n        }\n      </div>\n    )\n  }\n}\n","import { observer } from 'mobx-react'\nimport React, { Component } from 'react'\nimport Editable from '@/components/Editable'\nimport Effect from '@/components/Effect'\nimport Expandable from '@/components/Expandable'\nimport ListOf from '@/components/List'\nimport EffectModel from '@/models/Effect'\nimport noop from '@/utilities/noop'\nimport './Trait.scss'\n\nconst EffectList = ListOf(EffectModel, Effect)\n\n@observer class Trait extends Component {\n  static defaultProps = {\n    model: {},\n    onDelete: noop,\n    onToggleExpanded: noop,\n  }\n\n  static sortOptions = [{\n    display: 'icon-sort-name-asc',\n    getter: model => model.name,\n  }, {\n    display: 'icon-sort-value-asc',\n    getter: model => model.value,\n  }]\n\n  handleChangeName = name => this.props.model.set({ name })\n  handleChangeValue = value => this.props.model.set({ value })\n  handleCommitName = () => (this.props.model.name === '' && this.props.onDelete(this.props.model))\n\n  render() {\n    const { model } = this.props\n\n    return (\n      <div className=\"trait\">\n        <Editable\n          className=\"name\"\n          onChange={this.handleChangeName}\n          onEditEnd={this.handleCommitName}\n          value={model.name}\n        />\n        <Editable\n          className=\"value\"\n          max={999}\n          min={-99}\n          onChange={this.handleChangeValue}\n          value={model.value}\n        />\n        <Expandable onToggle={expanded => this.props.onToggleExpanded(model.hash, expanded)}>\n          <EffectList collection={model.effects} title=\"Effects\" />\n        </Expandable>\n      </div>\n    )\n  }\n}\n\nexport default Trait\n","import React from 'react'\nimport bound from '@/utilities/bound'\nimport noop from '@/utilities/noop'\nimport './Editable.scss'\n\nconst TYPES = [\n  // Strings\n  'text', 'multiline',\n  // Checkboxes\n  'boolean',\n  // Numbers\n  'number', 'slider',\n]\n\nexport default class Editable extends React.Component {\n  static displayName = 'Editable'\n\n  static defaultProps = {\n    className: '',\n    forceEditMode: false,\n    max: undefined,\n    min: undefined,\n    onChange: noop,\n    onEditEnd: noop,\n    onEditStart: noop,\n    onKeyDown: noop,\n    onKeyPress: noop,\n    onKeyUp: noop,\n    placeholder: '',\n    readOnly: false,\n    readOnlyValue: undefined,\n    step: 1,\n    type: undefined,\n    value: '',\n  }\n\n  state = {\n    editing: false,\n    resetValue: this.props.value,\n  }\n\n  get editing() {\n    return this.props.forceEditMode || this.state.editing\n  }\n\n  getEditorType = () => {\n    const { value } = this.props\n    let { type } = this.props\n\n    if (type !== undefined && TYPES.includes(type)) { return type }\n\n    type = typeof value\n    if (type === 'string') { return value.includes('\\n') ? 'multiline' : 'text' }\n    if (['boolean', 'number'].includes(type)) { return type }\n\n    return 'text'\n  }\n\n  resetChanges = () => {\n    this.props.onChange(this.state.resetValue, this.props.value)\n    this.handleToggleEditing()\n  }\n\n  createRefWithAutoFocus = (editor) => {\n    if (!editor) { return }\n    this.editor = editor\n\n    const editorType = this.getEditorType()\n    if (editorType !== 'boolean' && typeof editor.focus === 'function') { editor.focus() }\n\n    if (['boolean', 'number'].includes(this.getEditorType())) { return }\n    if (this.props.forceEditMode && typeof editor.setSelectionRange === 'function') {\n      editor.setSelectionRange(editor.value.length, editor.value.length)\n    }\n  }\n\n  handleChange = ({ target }) => {\n    const { min, max } = this.props\n    let { value } = target\n\n    // eslint-disable-next-line default-case\n    switch (this.getEditorType()) {\n      case 'slider':\n      case 'number':\n        value = parseFloat(value || 0)\n        // eslint-disable-next-line prefer-destructuring\n        if (Number.isNaN(value)) { value = this.props.value }\n        value = bound(value, { max, min })\n    }\n    this.props.onChange(value, this.state.resetValue)\n  }\n\n  handleKeys = (event) => {\n    const { target, key, ctrlKey, metaKey } = event\n\n    if (this.props.onKeyDown !== noop) {\n      this.props.onKeyDown(event)\n      if (event.isDefaultPrevented()) return\n    }\n\n    if (key === 'Escape') { this.resetChanges() }\n    if (key === 'Enter') {\n      if (target.nodeName !== 'TEXTAREA' || ctrlKey || metaKey) {\n        this.handleToggleEditing()\n      }\n    }\n  }\n\n  handleReceivingFocus = () => {\n    if (this.props.readOnly) { return }\n    if (!this.state.editing) { this.handleToggleEditing() }\n  }\n\n  handleToggleEditing = () => {\n    if (this.props.readOnly) { return }\n\n    const editing = !this.editing\n\n    this.setState({ editing, resetValue: this.props.value }, () => {\n      if (this.state.editing) {\n        this.props.onEditStart()\n      } else {\n        this.props.onEditEnd()\n      }\n    })\n  }\n\n  selectOnFocus = event => event.target.select()\n\n  toggleBoolean = () => {\n    this.props.onEditStart()\n    this.props.onChange(!this.props.value, this.props.value)\n    this.props.onEditEnd()\n  }\n\n  renderBoolean = () => (\n    <input\n      type=\"checkbox\"\n      checked={Boolean(this.props.value)}\n      disabled={this.props.readOnly}\n      onChange={this.toggleBoolean}\n      ref={this.createRefWithAutoFocus}\n    />\n  )\n\n  renderMultiline = () => {\n    if (!this.editing) {\n      const lines = (this.props.value || this.props.placeholder).split('\\n')\n      const paragraphs = lines.map((line, index) => <p key={index}>{line}</p>\n      )\n      const className = ['multiline', this.props.value ? '' : 'placeholder'].join(' ').trim()\n      return <div className={className} onClick={this.handleToggleEditing}>{paragraphs}</div>\n    }\n\n    return (\n      <textarea\n        disabled={this.props.readOnly}\n        onBlur={this.handleToggleEditing}\n        onChange={this.handleChange}\n        onFocus={this.selectOnFocus}\n        onKeyDown={this.handleKeys}\n        onKeyPress={this.props.onKeyPress}\n        onKeyUp={this.props.onKeyUp}\n        placeholder={this.props.placeholder}\n        ref={this.createRefWithAutoFocus}\n        rows={this.props.value.split('\\n').length}\n        value={this.props.value}\n      />\n    )\n  }\n\n  renderNumber = () => {\n    if (!this.editing) { return this.renderStatic() }\n\n    return (\n      <input\n        type=\"number\"\n        disabled={this.props.readOnly}\n        max={this.props.max}\n        min={this.props.min}\n        onBlur={this.handleToggleEditing}\n        onChange={this.handleChange}\n        onFocus={this.selectOnFocus}\n        onKeyDown={this.handleKeys}\n        onKeyPress={this.props.onKeyPress}\n        onKeyUp={this.props.onKeyUp}\n        placeholder={this.props.placeholder}\n        ref={this.createRefWithAutoFocus}\n        step={this.props.step}\n        value={this.props.value}\n      />\n    )\n  }\n\n  renderSlider = () => (\n    <input\n      type=\"range\"\n      disabled={this.props.readOnly}\n      max={this.props.max}\n      min={this.props.min}\n      onBlur={this.handleToggleEditing}\n      onChange={this.handleChange}\n      onKeyDown={this.props.onKeyDown}\n      onKeyPress={this.props.onKeyPress}\n      onKeyUp={this.props.onKeyUp}\n      ref={this.createRefWithAutoFocus}\n      step={this.props.step}\n      value={this.props.value}\n    />\n  )\n\n  renderText = () => {\n    if (!this.editing) { return this.renderStatic() }\n\n    return (\n      <input\n        type=\"text\"\n        disabled={this.props.readOnly}\n        onBlur={this.handleToggleEditing}\n        onChange={this.handleChange}\n        onFocus={this.selectOnFocus}\n        onKeyDown={this.handleKeys}\n        onKeyPress={this.props.onKeyPress}\n        onKeyUp={this.props.onKeyUp}\n        placeholder={this.props.placeholder}\n        ref={this.createRefWithAutoFocus}\n        value={this.props.value}\n      />\n    )\n  }\n\n  renderStatic = () => {\n    const { placeholder, readOnlyValue, value } = this.props\n    const showPlaceholder = placeholder && !value\n    const displayValue = readOnlyValue !== undefined ? readOnlyValue : value\n    const className = showPlaceholder ? 'placeholder' : ''\n    return (\n      <span className={className} onClick={this.handleToggleEditing}>\n        {showPlaceholder ? placeholder : displayValue}\n      </span>\n    )\n  }\n\n  renderEditor = () => {\n    switch (this.getEditorType()) {\n      case 'boolean':\n        return this.renderBoolean()\n      case 'slider':\n        return this.renderSlider()\n      case 'multiline':\n        return this.renderMultiline()\n      case 'number':\n        return this.renderNumber()\n      default:\n        return this.renderText()\n    }\n  }\n\n  render = () => {\n    const { className, readOnly } = this.props\n\n    const classes = [\n      'editable',\n      this.editing ? 'editing' : '',\n      className || '',\n      readOnly ? 'readonly' : '',\n    ].filter(Boolean)\n\n    let props = {}\n    if (!readOnly && !this.editing) {\n      props = { onFocus: this.handleReceivingFocus, tabIndex: '0' }\n    }\n\n    return (\n      <div className={classes.join(' ')} {...props}>\n        {this.renderEditor()}\n      </div>\n    )\n  }\n}\n","const PATH_SPLITTER = /([a-z0-9-_]+)(?![[\"'\\].])*/ig\n\nexport default (path) => {\n  if (typeof path !== 'string') return null\n  return path.match(PATH_SPLITTER)\n}\n","import splitObjectPath from '@/utilities/splitObjectPath'\n\nexport default (object, path) => {\n  if (typeof path !== 'string') return undefined\n\n  const split = splitObjectPath(path)\n\n  if (!Array.isArray(split)) return undefined\n\n  const property = split.pop()\n  const target = split.reduce((o, key) => o[key] || {}, object)\n\n  if (target) return target[property]\n  return undefined\n}\n","import deepEqual from 'deep-equal'\nimport { isObservableArray } from 'mobx'\nimport { types } from 'mobx-state-tree'\nimport getPathValue from '@/utilities/getPathValue'\nimport setPathValue from '@/utilities/setPathValue'\n\nconst IEditable = types.model('IEditable', {\n  // Any\n}).volatile(() => ({\n  isIEditable: true,\n  savedVersion: {},\n})).views(self => ({\n  get isDirty() { return !deepEqual(self.toJSON(), self.savedVersion) },\n})).actions(self => ({\n  /* eslint-disable no-param-reassign */\n\n  afterCreate() { self.savedVersion = self.toJSON() },\n  isPathDirty: (path) => {\n    const current = getPathValue(self.toJSON(), path)\n    const initial = getPathValue(self.savedVersion, path)\n    return !deepEqual(current, initial)\n  },\n  markAsClean() {\n    self.savedVersion = self.toJSON()\n\n    Object.keys(self.savedVersion).forEach((key) => {\n      const value = self[key]\n      if (!value) { return }\n\n      if (value.isIEditable) {\n        value.markAsClean()\n      } else if (isObservableArray(value)) {\n        value.forEach(child => (child && child.isIEditable && child.markAsClean()))\n      }\n    })\n  },\n  reset() { Object.assign(self, self.savedVersion) },\n  set(key = {}, value = undefined) {\n    if (typeof key === 'string' && value !== undefined) {\n      // allows: model.set('foo.bar', 'bar')\n      if (self[key] !== undefined) {\n        self[key] = value\n      } else {\n        setPathValue(self, key, value)\n      }\n    } else if (typeof key === 'object' && value === undefined) {\n      // allows: model.set({ foo: 'Foo', bar: 'Bar' })\n      Object.assign(self, key)\n    }\n  },\n\n  /* eslint-enable no-param-reassign */\n}))\n\nexport default IEditable\n","import splitObjectPath from '@/utilities/splitObjectPath'\n\nexport default (object, path, value) => {\n  const split = splitObjectPath(path)\n  const property = split.pop()\n  const target = split.reduce((o, key) => o[key] || {}, object)\n\n  if (target && target.isIEditable) {\n    target.set(property, value)\n  } else {\n    target[property] = value\n  }\n}\n","import { observer } from 'mobx-react'\nimport React, { Component } from 'react'\nimport Editable from '@/components/Editable'\nimport noop from '@/utilities/noop'\nimport './Descriptor.scss'\n\n@observer class Descriptor extends Component {\n  static defaultProps = {\n    model: {},\n    onDelete: noop,\n  }\n\n  static sortOptions = [{\n    display: 'icon-sort-name-asc',\n    getter: model => model.name,\n  }, {\n    display: 'icon-sort-value-asc',\n    getter: model => model.value,\n  }]\n\n  handleChangeName = name => this.props.model.set({ name })\n  handleChangeValue = value => this.props.model.set({ value })\n  handleCommitName = () => (this.props.model.name === '' && this.props.onDelete(this.props.model))\n\n  render() {\n    return (\n      <div className=\"descriptor\">\n        <Editable\n          className=\"name\"\n          onChange={this.handleChangeName}\n          onEditEnd={this.handleCommitName}\n          value={this.props.model.name}\n        />\n        <Editable\n          className=\"value\"\n          type=\"text\"\n          onChange={this.handleChangeValue}\n          value={this.props.model.value}\n        />\n      </div>\n    )\n  }\n}\n\nexport default Descriptor\n","import { isObservableArray } from 'mobx'\nimport { types } from 'mobx-state-tree'\nimport compareBy from '@/utilities/compareBy'\n\nexport default (TYPE, options = {}) => {\n  const TypedArrayWrapper = types.model({\n    values: types.array(TYPE),\n  }).views(self => ({\n    get asArray() { return self.values.slice() },\n    get first() { return self.length ? self.at(0) : undefined },\n    get last() { return self.length ? self.at(self.length - 1) : undefined },\n    get length() { return self.values.length },\n  })).actions(self => ({\n    /* eslint-disable no-param-reassign */\n\n    at: n => self.values[n],\n    clear: () => self.values.clear(),\n    delete: (object) => { self.values.replace(self.values.filter(item => item !== object)) },\n    deleteAt: (index) => { self.values.replace(self.values.filter((_, n) => n !== index)) },\n    every: fn => self.values.every(fn),\n    filter: fn => self.values.filter(fn),\n    find: fn => self.values.find(fn),\n    findBy: (key, value) => self.find(item => item[key] === value),\n    findById: (id) => {\n      if (!TYPE.identifierAttribute) return null\n      return self.find(item => item[TYPE.identifierAttribute] === id) || null\n    },\n    forEach: fn => self.values.forEach(fn),\n    includes: (searchElement, fromIndex) => self.values.includes(searchElement, fromIndex),\n    indexOf: element => self.values.indexOf(element),\n    insert: (object, index) => self.splice(index, 0, object),\n    map: fn => self.values.map(fn),\n    pop: () => self.values.pop(),\n    push: (...values) => self.values.replace([].concat(self.values, values)),\n    reduce: (fn, initial) => self.values.reduce(fn, initial),\n    replace: values => self.values.replace(values),\n    shift: () => self.values.shift(),\n    slice: (start, end) => self.values.slice(start, end),\n    some: fn => self.values.some(fn),\n    sortBy: (property, direction = 'asc') => {\n      if (!['asc', 'desc'].includes(direction)) {\n        throw new TypeError(`direction must be \"asc\" or \"desc\", got: \"${direction}\"`)\n      }\n      const values = self.values.slice().sort(compareBy(property))\n      self.values.replace(direction === 'desc' ? values.reverse() : values)\n      return self\n    },\n    splice: (index, deleteCount, value) => self.values.splice(index, deleteCount, value),\n    toObject: (keyProp, valueProp) => self.values.reduce((object, entry) => {\n      const key = entry[keyProp]\n      const value = valueProp !== undefined ? entry[valueProp] : entry\n      return { ...object, [key]: typeof value === 'function' ? value() : value }\n    }, {}),\n    unshift: (...values) => self.values.replace([].concat(values, self.values)),\n\n    /* eslint-enable no-param-reassign */\n  })).postProcessSnapshot(({ values }) => values)\n\n  return types.custom({\n    ...options,\n    fromSnapshot: (snapshot = []) => TypedArrayWrapper.create({ values: snapshot }),\n    getValidationMessage: (snapshot) => {\n      if (!snapshot) return ''\n      if (isObservableArray(snapshot) || Array.isArray(snapshot)) {\n        if (snapshot.every(f => TYPE.is(f))) return ''\n      }\n\n      return 'Collection types must be assigned an array of values or null'\n    },\n    isTargetType: target => TypedArrayWrapper.is(target),\n    name: options.name || 'Collection',\n  })\n}\n","export default (prop, reversed = false) => (objectA, objectB) => {\n  const a = String(objectA instanceof Map ? objectA.get(prop) : objectA[prop])\n  const b = String(objectB instanceof Map ? objectB.get(prop) : objectB[prop])\n\n  if (reversed) return b.localeCompare(a)\n  return a.localeCompare(b)\n}\n","import { types } from 'mobx-state-tree'\nimport ICategorizable from '@/models/generic/ICategorizable'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\n\nexport default types.compose(\n  IIdentity,\n  ICategorizable(),\n  IEditable,\n  types.model({\n    current: 0,\n    maximum: 10,\n    name: 'New Resource...',\n  })\n).named('Resource')\n","import { types } from 'mobx-state-tree'\nimport Effect from '@/models/Effect'\nimport CollectionOf from '@/models/generic/Collection'\nimport ICategorizable from '@/models/generic/ICategorizable'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\n\nexport default types.compose(\n  IIdentity,\n  ICategorizable(self => self.value),\n  IEditable,\n  types.model('Trait', {\n    effects: CollectionOf(Effect),\n    name: 'New Trait...',\n    value: 0,\n  })\n).named('Trait')\n","import { observer } from 'mobx-react'\nimport React, { Component } from 'react'\nimport Editable from '@/components/Editable'\nimport './Effect.scss'\n\n@observer class Effect extends Component {\n  static defaultProps = {\n    model: {},\n  }\n\n  static sortOptions = [{\n    display: 'icon-sort-name-asc',\n    getter: model => [!model.targetId, model.targetId],\n  }, {\n    display: 'icon-sort-value-asc',\n    getter: model => [!model.condition, model.modifier],\n  }]\n\n  handleChangeCondition = condition => this.props.model.set({ condition })\n  handleChangeModifier = modifier => this.props.model.set({ modifier })\n  handleChangeTarget = ({ target: { value } }) => this.props.model.set({ targetId: value })\n\n  render() {\n    const { available, condition = '', isApplicable, modifier, targetId } = this.props.model\n\n    return (\n      <div className={`effect ${isApplicable ? 'applicable' : ''}`.trim()}>\n        <select className=\"target\" value={targetId} onChange={this.handleChangeTarget}>\n          {available().map(({ hash, id, name }) => (\n            <option key={hash} value={id}>{name}</option>\n          ))}\n        </select>\n        <Editable\n          className=\"modifier\"\n          max={999}\n          min={-99}\n          onChange={this.handleChangeModifier}\n          value={modifier}\n        />\n        <Editable\n          className=\"condition\"\n          onChange={this.handleChangeCondition}\n          placeholder=\"Any\"\n          value={condition}\n        />\n      </div>\n    )\n  }\n}\n\nexport default Effect\n","import { observer } from 'mobx-react'\nimport React, { Component } from 'react'\nimport Editable from '@/components/Editable'\nimport noop from '@/utilities/noop'\nimport './Skill.scss'\n\n@observer class Skill extends Component {\n  static defaultProps = {\n    model: {},\n    onDelete: noop,\n  }\n\n  static sortOptions = [{\n    display: 'icon-sort-name-asc',\n    getter: model => model.name,\n  }, {\n    display: 'icon-sort-value-desc',\n    getter: model => [-model.theory, -model.mastery, model.name],\n  }, {\n    display: 'icon-sort-size-desc',\n    getter: model => [-model.mastery, -model.theory, model.name],\n  }]\n\n  onChangeName = name => this.props.model.set({ name })\n  onChangeMastery = mastery => this.props.model.set({ mastery })\n  handleCommitName = () => (this.props.model.name === '' && this.props.onDelete(this.props.model))\n  onChangeTheory = theory => this.props.model.set({ theory })\n\n  render() {\n    const { model } = this.props\n\n    return (\n      <div className=\"skill\">\n        <Editable\n          className=\"name\"\n          onChange={this.onChangeName}\n          onEditEnd={this.handleCommitName}\n          value={model.name}\n        />\n        <Editable\n          className={`theory ${(!model.theory && 'is-zero') || ''}`}\n          max={999}\n          min={-99}\n          onChange={this.onChangeTheory}\n          value={model.theory}\n        />\n        <Editable\n          className=\"mastery\"\n          max={999}\n          min={-99}\n          onChange={this.onChangeMastery}\n          value={model.mastery}\n        />\n      </div>\n    )\n  }\n}\n\nexport default Skill\n","export default (value, { min, max }) => {\n  if (min !== undefined && value < min) return min\n  if (max !== undefined && value > max) return max\n  return value\n}\n","export default function hash(value = '', radix = 16) {\n  const string = String(value)\n  let h = 0\n  string.split('').forEach((char) => {\n    /* eslint-disable no-bitwise */\n    h = ((h << 5) - h) + char.charCodeAt(0)\n    h &= h // Convert to 32-bit integer\n    /* eslint-enable no-bitwise */\n  })\n  return Math.abs(h).toString(radix)\n}\n\nexport const randomHash = () => hash(Math.random().toString())\n","import { types } from 'mobx-state-tree'\nimport { randomHash } from '@/utilities/hash'\n\nexport default types.model({\n  // Nothing\n}).volatile(() => ({\n  hash: '',\n})).actions(self => ({\n  afterCreate() { self.hash = randomHash() }, // eslint-disable-line no-param-reassign\n}))\n","import { observer } from 'mobx-react'\nimport { onSnapshot } from 'mobx-state-tree'\nimport React, { Component } from 'react'\nimport Editable from '@/components/Editable'\nimport Rating from '@/components/Rating'\nimport bound from '@/utilities/bound'\nimport math from '@/utilities/math'\nimport noop from '@/utilities/noop'\nimport './Attribute.scss'\n\n@observer class Attribute extends Component {\n  static defaultProps = {\n    model: {},\n    onDelete: noop,\n    rating: false,\n  }\n\n  static sortOptions = [{\n    display: 'icon-sort-name-asc',\n    getter: model => model.name,\n  }, {\n    display: 'icon-sort-value-asc',\n    getter: model => model.modifiedValue(),\n  }]\n\n  CACHE = {}\n\n  componentDidMount() {\n    this.onSnapshotDisposer = onSnapshot(this.props.model.character, this.handleSnapshot)\n  }\n  componentWillUnmount() { this.onSnapshotDisposer() }\n\n  handleSnapshot = (snapshot) => {\n    const effects = this.props.model.effects().map(e => e.toJSON())\n    if (\n      JSON.stringify(effects) !== JSON.stringify(this.CACHE.effects) ||\n      JSON.stringify(snapshot.conditions) !== this.CACHE.conditions ||\n      this.CACHE.value !== this.props.model.value()\n    ) {\n      this.CACHE.conditions = JSON.stringify(snapshot.conditions)\n      this.CACHE.effects = effects\n      this.CACHE.value = this.props.model.value()\n      this.forceUpdate()\n    }\n  }\n  handleChangeName = (name) => {\n    const { id } = this.props.model\n    this.props.model.set({ name })\n    this.props.model.character.effects()\n      .filter(effect => effect.targetId === id)\n      .forEach((effect) => {\n        effect.set({ targetId: '' })\n        effect.set({ targetId: this.props.model.id })\n      })\n  }\n  handleCommitName = () => (this.props.model.name === '' && this.props.onDelete(this.props.model))\n  handleChangeValue = (raw) => {\n    let value = String(raw).replace(/[^a-z0-9+*()\\-/, ]/gi, '')\n    if (!Number.isNaN(Number(raw))) {\n      value = bound(Number(raw) || '', { max: 999, min: -99 })\n    }\n    this.props.model.set({ raw: value })\n  }\n  handleCommitValue = () => {\n    if (String(this.props.model.raw) === '') this.props.model.set({ raw: 0 })\n  }\n  handleValueKeyDown = ({ key }) => {\n    const { model } = this.props\n    if (model.isComputed) return\n\n    switch (key) {\n      case 'ArrowUp':\n        model.set({ raw: model.value() + 1 }); break\n      case 'ArrowDown':\n        model.set({ raw: model.value() - 1 }); break\n      default:\n    }\n  }\n\n  render() {\n    const { model, rating } = this.props\n    const modifiedValue = model.modifiedValue()\n    const value = model.value()\n\n    const className = [\n      'attribute',\n      `as-${rating ? 'rating' : 'numeric'}`,\n      `${model.isComputed ? 'is' : 'not'}-computed`,\n    ].join(' ')\n\n    const modifier = model.modifier()\n    const modifierClassName = [\n      'modifier',\n      modifier > 0 && 'positive',\n      modifier < 0 && 'negative',\n      modifier === 0 && 'zero',\n    ].filter(Boolean).join(' ')\n\n    return (\n      <div className={className}>\n        <Editable\n          className=\"name\"\n          onChange={this.handleChangeName}\n          onEditEnd={this.handleCommitName}\n          value={model.name}\n        />\n        <Editable\n          className=\"value rating\"\n          onChange={this.handleChangeValue}\n          onEditEnd={this.handleCommitValue}\n          onKeyDown={this.handleValueKeyDown}\n          readOnlyValue={(\n            <Rating\n              allowExcess\n              current={modifiedValue}\n              maximum={value}\n            />\n          )}\n          type=\"text\"\n          value={model.raw}\n        />\n        <Editable\n          className=\"value numeric\"\n          onChange={this.handleChangeValue}\n          onEditEnd={this.handleCommitValue}\n          onKeyDown={this.handleValueKeyDown}\n          readOnlyValue={value}\n          type=\"text\"\n          value={model.raw}\n        />\n        {model.effects().length !== 0 && (\n          <div\n            className={modifierClassName}\n            title={model.modifierText()}\n          >\n            {modifiedValue}\n          </div>\n        )}\n      </div>\n    )\n  }\n}\n\nexport default Attribute\n","import core from 'mathjs/core'\n\nconst math = core.create()\nmath.import(require('mathjs/lib/expression/function/eval'))\nmath.import(require('mathjs/lib/expression/function/parse'))\nmath.import(require('mathjs/lib/function/arithmetic/add'))\nmath.import(require('mathjs/lib/function/arithmetic/ceil'))\nmath.import(require('mathjs/lib/function/arithmetic/divide'))\nmath.import(require('mathjs/lib/function/arithmetic/floor'))\nmath.import(require('mathjs/lib/function/arithmetic/mod'))\nmath.import(require('mathjs/lib/function/arithmetic/multiply'))\nmath.import(require('mathjs/lib/function/arithmetic/pow'))\nmath.import(require('mathjs/lib/function/arithmetic/round'))\nmath.import(require('mathjs/lib/function/arithmetic/subtract'))\nmath.import(require('mathjs/lib/function/logical'))\nmath.import(require('mathjs/lib/function/statistics/max'))\nmath.import(require('mathjs/lib/function/statistics/mean'))\nmath.import(require('mathjs/lib/function/statistics/min'))\nmath.import(require('mathjs/lib/function/statistics/sum'))\nmath.import(require('mathjs/lib/type/matrix/function/matrix'))\nmath.import(require('mathjs/lib/type/matrix/Matrix'))\nmath.import(require('mathjs/lib/type/matrix/DenseMatrix'))\n\nexport default math\n","import math from '@/utilities/math'\n\nexport default (expression) => {\n  const fns = []\n  const symbols = []\n\n  math.parse(expression).traverse((node) => {\n    if (node.fn) {\n      fns.push(node.fn.name)\n    }\n    if (\n      node.type === 'SymbolNode'\n      && !symbols.includes(node.name)\n      && !fns.includes(node.name)\n    ) {\n      symbols.push(node.name)\n    }\n  })\n  return symbols\n}\n","import { types } from 'mobx-state-tree'\nimport ICategorizable from '@/models/generic/ICategorizable'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\nimport findParent from '@/utilities/findParent'\nimport math from '@/utilities/math'\nimport calculate from '@/utilities/math/calculate'\nimport toSymbols from '@/utilities/math/toSymbols'\n\nexport default types.compose(\n  IIdentity,\n  ICategorizable(self => self.modifiedValue()),\n  IEditable,\n  types.model({\n    name: 'New Attribute...',\n    raw: types.optional(types.union(types.number, types.string), 0),\n  }).views(self => ({\n    get character() { return findParent(self, p => p.isCharacter) },\n    get id() {\n      return self.name.split(':').pop()\n        .trim().toLowerCase()\n        .replace(/[^a-z0-9]/ig, '')\n    },\n    get isComputed() { return typeof self.raw === 'string' },\n  })).actions((self) => {\n    let computing = false\n\n    return ({\n      effects() {\n        if (!self.character) return []\n        return self.character.activeEffects().filter(effect => effect.targetId === self.id)\n      },\n      modifiedValue() { return (self.value() || 0) + self.modifier() },\n      modifier() { return math.sum(self.effects().map(effect => effect.modifier)) },\n      modifierText() {\n        return self.effects().map(effect => `${effect.sourceName()}: ${effect.modifier}`).join(', ')\n      },\n      value() {\n        if (!self.isComputed) return self.raw\n        if (self.character === null) return 0\n        if (computing) return 0\n\n        computing = true\n        let computed = 0\n\n        try {\n          const values = toSymbols(self.raw).reduce((all, symbol) => {\n            const attribute = self.character.attributes.findBy('id', symbol)\n            return Object.assign(all, { [symbol]: attribute ? attribute.modifiedValue() : 0 })\n          }, {})\n\n          computed = calculate(self.raw, values)\n        } catch (error) {\n          // eslint-disable-next-line no-undef\n          if (process.env.NODE_ENV !== 'production') {\n            // eslint-disable-next-line no-console\n            console.error(`Error computing: ${self.raw}`)\n          }\n          computed = 0\n        }\n\n        computing = false\n        return computed\n      },\n    })\n  }).preProcessSnapshot(({ value, ...snapshot }) => ({ ...snapshot, raw: value }))\n    .postProcessSnapshot(({ raw, ...snapshot }) => ({ ...snapshot, value: raw }))\n).named('Attribute')\n","import math from '@/utilities/math'\nimport toSymbols from '@/utilities/math/toSymbols'\n\nexport default (expression = '', data = {}, options = { defaultSymbolValue: 0 }) => {\n  const safeData = { ...data }\n  toSymbols(expression).forEach((symbol) => {\n    if (safeData[symbol] === undefined) {\n      safeData[symbol] = options.defaultSymbolValue\n    }\n  })\n\n  return math.eval(expression, safeData)\n}\n","import { observer } from 'mobx-react'\nimport React, { Component } from 'react'\nimport Editable from '@/components/Editable'\nimport Effect from '@/components/Effect'\nimport Expandable from '@/components/Expandable'\nimport ListOf from '@/components/List'\nimport EffectModel from '@/models/Effect'\nimport noop from '@/utilities/noop'\nimport './Item.scss'\n\nconst EffectList = ListOf(EffectModel, Effect, { className: 'effect-list' })\n\n@observer class Item extends Component {\n  static defaultProps = {\n    model: {},\n    onDelete: noop,\n    onToggleExpanded: noop,\n  }\n\n  static sortOptions = [{\n    display: 'icon-sort-name-asc',\n    getter: model => model.name,\n  }, {\n    display: 'icon-backpack',\n    getter: model => [!model.equipped, model.name],\n  }]\n\n  handleChangeDescription = description => this.props.model.set({ description })\n  handleChangeName = name => this.props.model.set({ name })\n  handleCommitName = () => (this.props.model.name === '' && this.props.onDelete(this.props.model))\n  handleToggleEquipped = () => this.props.model.set({ equipped: !this.props.model.equipped })\n\n  render() {\n    const { description, hash, name, effects, equipped } = this.props.model\n\n    return (\n      <div className={`item ${equipped ? '' : 'un'}equipped`}>\n        <Editable className=\"equipped\" onChange={this.handleToggleEquipped} value={equipped} />\n        <Editable\n          className=\"name\"\n          onChange={this.handleChangeName}\n          onEditEnd={this.handleCommitName}\n          value={name}\n        />\n        <Expandable onToggle={expanded => this.props.onToggleExpanded(hash, expanded)}>\n          <Editable\n            className=\"description\"\n            type=\"multiline\"\n            onChange={this.handleChangeDescription}\n            placeholder=\"Description...\"\n            value={description}\n          />\n          <EffectList collection={effects} title=\"Effects\" />\n        </Expandable>\n      </div>\n    )\n  }\n}\n\nexport default Item\n","import { onSnapshot } from 'mobx-state-tree'\nimport React from 'react'\nimport Sortable from 'sortablejs'\nimport MultiToggle from '@/components/MultiToggle'\nimport CollectionOf from '@/models/generic/Collection'\nimport debounce from '@/utilities/debounce'\nimport noop from '@/utilities/noop'\nimport unique from '@/utilities/unique'\nimport './List.scss'\n\nconst NO_CATEGORY = 'Uncategorized'\n\nconst buildSorter = (getter, reversed = false) => (A, B) => {\n  const a = getter(A)\n  const b = getter(B)\n\n  if (Array.isArray(a) && Array.isArray(b)) {\n    for (let i = 0; i < a.length; i += 1) {\n      if (a[i] !== b[i]) {\n        if (reversed) return b[i] < a[i] ? -1 : 1\n        return a[i] < b[i] ? -1 : 1\n      }\n    }\n\n    return 0\n  }\n\n  if (typeof a === 'number' && typeof b === 'number') {\n    if (a === b) return 0\n    if (reversed) return b < a ? -1 : 1\n    return a < b ? -1 : 1\n  }\n\n  const aString = String(a)\n  const bString = String(b)\n\n  if (reversed) return bString.localeCompare(aString)\n  return aString.localeCompare(bString)\n}\n\nexport default (Model, Component, props = {}) => {\n  const sortOptions = (Component.sortOptions || []).map(sorter => ({\n    ...sorter,\n    comparitor: buildSorter(sorter.getter),\n    display: typeof sorter.display === 'string'\n      ? <span className={sorter.display} />\n      : sorter.display,\n  }))\n\n  return class List extends React.Component {\n    static defaultProps = {\n      className: '',\n      collection: CollectionOf(Model).create([]),\n      columns: 1,\n      layout: undefined,\n      sortable: true,\n      title: props.title || '',\n      ...props,\n    }\n\n    Component = Component\n    Model = Model\n\n    container = React.createRef()\n    expandedItems = {}\n    filterEl = React.createRef()\n    onDataSnapshotDisposer = noop\n    onLayoutSnapshotDisposer = noop\n    sortable = null\n    state = {\n      expanded: {},\n      sortOption: null,\n    }\n\n    componentDidMount() {\n      if (this.props.layout) {\n        const { sortOption: sortOptionIndex } = this.props.layout\n        if (sortOptions.length && sortOptionIndex !== undefined) {\n          this.setState({ sortOption: sortOptions[sortOptionIndex] || null })\n        }\n        this.onLayoutSnapshotDisposer = onSnapshot(this.props.layout,\n          debounce(() => this.forceUpdate(), 100, true)\n        )\n      }\n\n      const { sortable } = this.props\n      if (sortable) {\n        this.sortable = Sortable.create(this.container.current, {\n          disabled: !sortable,\n          draggable: '.list-item-wrapper',\n          handle: '.drag-handle',\n          onEnd: () => {\n            this.container.current.classList.remove('dragging')\n            this.props.collection.replace(\n              [...this.container.current.querySelectorAll('.list-item-wrapper')]\n                .map(item => parseInt(item.getAttribute('data-index'), 10))\n                .map(targetIndex => this.props.collection.at(targetIndex))\n            )\n          },\n          onStart: () => this.container.current.classList.add('dragging'),\n        })\n      }\n      this.onDataSnapshotDisposer = onSnapshot(this.props.collection, () => this.forceUpdate())\n    }\n    componentWillReceiveProps() {\n      if (this.sortable) this.sortable.option('disabled', !this.props.sortable)\n    }\n    componentWillUnmount() {\n      this.onDataSnapshotDisposer()\n      this.onLayoutSnapshotDisposer()\n    }\n\n    get categories() {\n      const list = this.props.collection.asArray.reduce((all, next) => (\n        all.concat(next.categories || [])\n      ), [])\n\n\n      if (!list.length) return []\n      return unique(list.filter(item => item !== NO_CATEGORY)).sort().concat(NO_CATEGORY)\n    }\n\n    getCategoryItems = (items, category) => (\n      (category && category !== NO_CATEGORY)\n        ? items.filter(item => (item.categories || []).includes(category))\n        : items.filter(item => (item.categories || []).length === 0)\n    )\n\n    handleAdd = () => {\n      this.props.collection.push(Model.create({}))\n      this.forceUpdate()\n    }\n    handleDelete = ({ target }) => {\n      const index = parseInt(target.parentNode.getAttribute('data-index'), 10)\n      this.props.collection.deleteAt(index)\n      this.forceUpdate()\n    }\n    handleFilterChange = ({ target }) => this.props.layout.set({ filter: target.value })\n    handleSort = () => this.props.collection.sortBy('name')\n    handleSortChange = (clicked) => {\n      const { sortOption: current } = this.state\n      this.setState({ sortOption: current === clicked ? null : clicked }, () => {\n        this.props.layout.set({\n          sortOption: current === clicked ? undefined : sortOptions.indexOf(clicked),\n        })\n      })\n    }\n    handleToggleCategorized = () => {\n      this.props.layout.set({ categorize: !this.props.layout.categorize })\n    }\n    handleToggleExpanded = (hash, expanded) => {\n      this.setState(state => ({\n        ...state,\n        expanded: { ...state.expanded, [hash]: expanded },\n      }))\n    }\n\n    renderCategoryWidget = () => {\n      const { layout } = this.props\n      const { categories } = this\n      if (!categories.length) return null\n\n      const className = [\n        'categorize icon-categorize',\n        layout.categorize ? 'on' : 'off',\n      ].join(' ')\n\n      return <>\n        <div {...{ className }} onClick={this.handleToggleCategorized} />\n        <select\n          className=\"filter\"\n          onChange={this.handleFilterChange}\n          ref={this.filterEl}\n          tabIndex={-1}\n          value={layout.filter}\n        >\n          <option value=\"\">All</option>\n          {categories.map(name => <option key={name} value={name}>{name}</option>)}\n        </select>\n      </>\n    }\n    renderSortWidget = () => {\n      if (!this.props.sortable) return null\n      if (!sortOptions.length) return null\n\n      return (\n        <MultiToggle\n          className=\"sorter\"\n          onChange={this.handleSortChange}\n          options={sortOptions}\n          selected={this.state.sortOption}\n        />\n      )\n    }\n    renderCategory = (category, data) => {\n      const { columns } = this.props\n      const categoryItems = this.getCategoryItems(data, category)\n      if (!categoryItems.length) return null\n\n      const values = categoryItems.map(item => item.categoryValue)\n      const min = Math.min(...values)\n      const max = Math.max(...values)\n\n      return (\n        <div key={category} className=\"category\">\n          <div className=\"details\">\n            <div className=\"title\">Category: {category} ({categoryItems.length})</div>\n            {(!Number.isNaN(min) && !Number.isNaN(max)) && (\n              <div className=\"range\">{min}-{max}</div>\n            )}\n          </div>\n          <div className=\"category-items\" style={{ columns }}>\n            {categoryItems.map(this.renderItem)}\n          </div>\n        </div>\n      )\n    }\n    renderItem = (model) => {\n      const { collection, layout, sortable } = this.props\n      const { expanded, sortOption } = this.state\n      const sorted = sortable && sortOption !== null\n      const categorized = layout && layout.categorize\n\n      return (\n        <div\n          className={`list-item-wrapper ${expanded[model.hash] ? 'expanded' : ''}`.trim()}\n          data-index={collection.indexOf(model)}\n          key={model.hash}\n        >\n          {(!sorted && !categorized) && <div className=\"drag-handle\" />}\n          <Component\n            model={model}\n            onDelete={collection.delete}\n            onToggleExpanded={this.handleToggleExpanded}\n          />\n          <button className=\"icon-remove\" onClick={this.handleDelete} />\n        </div>\n      )\n    }\n\n    render() {\n      const { className = '', columns, layout = {}, title } = this.props\n      const { sortOption } = this.state\n      let { categories } = this\n      let data = this.props.collection.asArray\n      if (sortOption !== null) data = data.sort(sortOption.comparitor)\n\n      const hasCategories = Boolean(categories.length)\n      if (hasCategories && layout.filter) {\n        data = this.getCategoryItems(data, layout.filter)\n        categories = [layout.filter]\n      }\n      const listStyle = {\n        columns: layout.categorize ? 1 : columns,\n      }\n\n      return (\n        <div className={`list ${className}`.trim()} ref={this.container} style={listStyle}>\n          <div className=\"title-bar\">\n            {this.renderSortWidget()}\n            {this.renderCategoryWidget()}\n            <div className=\"text\">{title}</div>\n            <button className=\"add icon-add\" onClick={this.handleAdd} />\n          </div>\n          {(hasCategories && layout.categorize)\n            ? categories.map(category => this.renderCategory(category, data))\n            : data.map(this.renderItem)\n          }\n        </div>\n      )\n    }\n  }\n}\n","export default function debounce(func, wait, immediate) {\n  let timeout\n\n  return (...args) => {\n    const later = () => {\n      timeout = null\n      if (!immediate) func.apply(this, args)\n    }\n\n    const callNow = immediate && !timeout\n    clearTimeout(timeout)\n    timeout = setTimeout(later, wait)\n    if (callNow) func.apply(this, args)\n  }\n}\n","import Attribute from '@/components/Attribute'\nimport Descriptor from '@/components/Descriptor'\nimport Effect from '@/components/Effect'\nimport Item from '@/components/Item'\nimport Resource from '@/components/Resource'\nimport Skill from '@/components/Skill'\nimport Spell from '@/components/Spell'\nimport Trait from '@/components/Trait'\n\nexport default {\n  Attribute,\n  Descriptor,\n  Effect,\n  Item,\n  Resource,\n  Skill,\n  Spell,\n  Trait,\n}\n","import { observer } from 'mobx-react'\nimport { onSnapshot } from 'mobx-state-tree'\nimport React, { Component } from 'react'\nimport Editable from '@/components/Editable'\nimport Expandable from '@/components/Expandable'\nimport './Conditions.scss'\n\nexport default observer(class Conditions extends Component {\n  static defaultProps = {\n    model: {},\n  }\n\n  CACHE = {}\n\n  componentDidMount() {\n    this.onSnapshotDisposer = onSnapshot(this.props.model, this.handleSnapshot)\n  }\n\n  componentWillUnmount() {\n    this.onSnapshotDisposer()\n  }\n\n  handleSnapshot = () => {\n    const availableConditions = this.props.model.availableConditions()\n    const conditions = this.props.model.conditions.asArray\n\n    if (\n      JSON.stringify(availableConditions) !== JSON.stringify(this.CACHE.availableConditions) ||\n      JSON.stringify(conditions) !== JSON.stringify(this.CACHE.conditions)\n    ) {\n      this.CACHE.availableConditions = availableConditions\n      this.CACHE.conditions = conditions\n      this.forceUpdate()\n    }\n  }\n\n  handleCheckbox = (condition, value) => {\n    const { conditions } = this.props.model\n\n    if (value && !conditions.includes(condition)) {\n      conditions.push(condition)\n    } else if (typeof conditions.delete === 'function') {\n      conditions.delete(condition)\n    } else {\n      conditions.splice(conditions.indexOf(condition), 1)\n    }\n    this.forceUpdate()\n  }\n\n  renderCondition = (condition) => {\n    const { conditions } = this.props.model\n    const isCurrent = conditions.includes(condition)\n    return (\n      <div key={condition} className={`condition ${isCurrent ? 'current' : 'available'}`}>\n        <Editable\n          className=\"current\"\n          onChange={value => this.handleCheckbox(condition, value)}\n          value={isCurrent}\n        />\n        <div className=\"name\">{condition}</div>\n      </div>\n    )\n  }\n\n  render() {\n    return (\n      <div className=\"conditions\">\n        <Expandable>\n          {this.props.model.availableConditions().map(this.renderCondition)}\n        </Expandable>\n      </div>\n    )\n  }\n})\n","import { onSnapshot } from 'mobx-state-tree'\nimport React, { Component } from 'react'\nimport Editable from '@/components/Editable'\nimport Expandable from '@/components/Expandable'\nimport noop from '@/utilities/noop'\nimport './Layout.scss'\n\nexport default class Layout extends Component {\n  titleBar = React.createRef()\n\n  onSnapshotDisposer = noop\n  snapshot = null\n\n  componentDidMount() {\n    this.onSnapshotDisposer = onSnapshot(this.props.model, (snapshot) => {\n      const snapshotJSON = JSON.stringify(snapshot)\n      if (this.snapshot !== snapshotJSON) {\n        this.snapshot = snapshotJSON\n        this.forceUpdate()\n      }\n    })\n    this.forceUpdate() // Immediate redraw to place buttonParent\n  }\n  componentWillUnmount() { this.onSnapshotDisposer() }\n\n  handleChangeTitle = title => this.props.model.set({ title })\n\n  render() {\n    const { children, parentColumns } = this.props\n    const { colSpan, title } = this.props.model\n\n    return (\n      <div className=\"layout\" style={{ width: `calc(100%/${parentColumns}*${colSpan})` }}>\n        {title === undefined\n          ? children\n          : <>\n            <div className=\"title-bar\" ref={this.titleBar}>\n              <Editable\n                className=\"title\"\n                onChange={this.handleChangeTitle}\n                placeholder=\"Section Title\"\n                value={title}\n              />\n            </div>\n            <Expandable\n              expandByDefault\n              omitItemWrapper\n              toggleButtonParent={this.titleBar.current}\n            >\n              {children}\n            </Expandable>\n          </>\n        }\n      </div>\n    )\n  }\n}\n","import Attribute from '@/models/Attribute'\nimport Descriptor from '@/models/Descriptor'\nimport Effect from '@/models/Effect'\nimport Item from '@/models/Item'\nimport Resource from '@/models/Resource'\nimport Skill from '@/models/Skill'\nimport Spell from '@/models/Spell'\nimport Trait from '@/models/Trait'\n\nexport default {\n  Attribute,\n  Descriptor,\n  Effect,\n  Item,\n  Resource,\n  Skill,\n  Spell,\n  Trait,\n}\n","import { observer } from 'mobx-react'\nimport { onSnapshot } from 'mobx-state-tree'\nimport React from 'react'\nimport components from '@/components'\nimport Conditions from '@/components/Conditions'\nimport Layout from '@/components/Layout'\nimport ListOf from '@/components/List'\nimport models from '@/models'\nimport noop from '@/utilities/noop'\nimport './Sheet.scss'\n\n@observer class Sheet extends React.Component {\n  static defaultProps = {\n    character: {},\n    onChange: noop,\n    onMount: noop,\n  }\n\n  state = { size: 'large' }\n\n  constructor(props) {\n    super(props)\n    this.onCharacterSnapshotDisposer = onSnapshot(this.props.character, (snapshot) => {\n      this.props.onChange(snapshot, this.props.layout.toJSON(), this)\n    })\n    this.onLayoutSnapshotDisposer = onSnapshot(this.props.layout, (snapshot) => {\n      this.props.onChange(this.props.character.toJSON(), snapshot, this)\n    })\n    window.addEventListener('resize', this.handleWindowResize)\n  }\n  componentDidMount() {\n    this.handleWindowResize()\n    this.props.onMount(this)\n  }\n  componentWillUnmount() {\n    this.onCharacterSnapshotDisposer()\n    this.onLayoutSnapshotDisposer()\n  }\n\n  handleWindowResize = () => {\n    let size = 'large'\n    if (window.matchMedia('(min-width: 5in) and (max-width: 7.5in)').matches) {\n      size = 'medium'\n    } else if (window.matchMedia('(max-width: 5in)').matches) {\n      size = 'small'\n    }\n    if (size !== this.state.size) this.setState({ size })\n  }\n\n  renderComponent = (parent, model, key) => {\n    if (model.type) {\n      const { title } = model\n      const typename = model.type.toLowerCase()\n      const List = ListOf(\n        models[model.type],\n        components[model.type],\n        { className: `${typename}-list` }\n      )\n      const collection = this.props.character[`${typename}s`]\n      return (\n        <List {...{ key, layout: model, title }} collection={collection} columns={model.columns} />\n      )\n    }\n\n    return (\n      <Layout key={model.hash} model={model} parentColumns={parent.columns}>\n        {model.children.map((child, i) => this.renderComponent(model, child, i))}\n      </Layout>\n    )\n  }\n\n  render() {\n    const { character, layout } = this.props\n    const { size } = this.state\n\n    return (\n      <div className={`sheetforge sheet ${size}`}>\n        <Conditions model={character} />\n        {layout.children.map(this.renderComponent.bind(null, layout))}\n      </div>\n    )\n  }\n}\n\nexport default Sheet\n","import { types } from 'mobx-state-tree'\nimport noop from '@/utilities/noop'\nimport unique from '@/utilities/unique'\n\nexport default (getValue = noop) => types.model({\n}).volatile(() => ({\n  isICategorizable: true,\n})).views((self) => {\n  function getCategories() {\n    if (!self.name) return []\n\n    const categories = self.name.split(':')\n    categories.pop() // remove the name\n\n    return unique(categories.map(category => category.trim()).filter(Boolean)).sort()\n  }\n  let lastUsedName = self.name\n  let categories = getCategories()\n\n  return {\n    get categories() {\n      if (!self.name || self.name === lastUsedName) return categories\n\n      lastUsedName = self.name\n      categories = getCategories()\n\n      return categories\n    },\n    get categoryValue() { return getValue(self) },\n  }\n})\n","import { types } from 'mobx-state-tree'\nimport ICategorizable from '@/models/generic/ICategorizable'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\n\nexport default types.compose(\n  IIdentity,\n  ICategorizable(self => self.mastery),\n  IEditable,\n  types.model({\n    mastery: 1,\n    name: 'New Skill...',\n    theory: 0,\n  }).views(self => ({\n    get isComplex() { return self.theory !== 0 },\n    get isSimple() { return self.theory === 0 },\n  }))\n).named('Skill')\n","import { observer } from 'mobx-react'\nimport React, { Component } from 'react'\nimport Editable from '@/components/Editable'\nimport Rating from '@/components/Rating'\nimport noop from '@/utilities/noop'\nimport './Resource.scss'\n\n@observer class Resource extends Component {\n  static defaultProps = {\n    model: {},\n    onDelete: noop,\n  }\n\n  static sortOptions = [{\n    display: 'icon-sort-name-asc',\n    getter: model => model.name,\n  }]\n\n  handleChangeCurrent = current => this.props.model.set({ current })\n  handleChangeMaximum = maximum => this.props.model.set({ maximum })\n  handleChangeName = name => this.props.model.set({ name })\n  handleCommitName = () => (this.props.model.name === '' && this.props.onDelete(this.props.model))\n\n  render() {\n    const { current, name, maximum } = this.props.model\n\n    return (\n      <div className=\"resource\">\n        <div className=\"display\">\n          <Editable\n            className=\"name\"\n            onChange={this.handleChangeName}\n            onEditEnd={this.handleCommitName}\n            value={name}\n          />\n          <Editable\n            className=\"current\"\n            max={999}\n            min={0}\n            onChange={this.handleChangeCurrent}\n            value={current}\n          />\n          {'of'}\n          <Editable\n            className=\"maximum\"\n            max={999}\n            min={0}\n            onChange={this.handleChangeMaximum}\n            value={maximum}\n          />\n        </div>\n        <Rating\n          allowExcess\n          current={current}\n          maximum={maximum}\n          onChange={this.handleChangeCurrent}\n        />\n      </div>\n    )\n  }\n}\n\nexport default Resource\n","export default () => {}\n","import { types } from 'mobx-state-tree'\n\nexport default (min, max, defaultTo = min) => (\n  types.optional(\n    types.refinement(\n      types.number,\n      n => n === undefined || (n >= min && n <= max)\n    ),\n    defaultTo\n  )\n)\n","import { types } from 'mobx-state-tree'\nimport CollectionOf from '@/models/generic/Collection'\nimport IEditable from '@/models/generic/IEditable'\nimport IIdentity from '@/models/generic/IIdentity'\nimport between from '@/models/types/between'\n\nconst Layout = types.compose(\n  IIdentity,\n  IEditable,\n  types.model({\n    categorize: false,\n    children: CollectionOf(types.late(() => Layout)),\n    colSpan: between(1, 4, 1),\n    columns: between(1, 4, 1),\n    filter: types.maybe(types.string),\n    sortOption: types.maybe(types.number),\n    title: types.union(types.maybe(types.string), types.literal(false)),\n    type: types.maybe(types.string),\n  })\n).named('Layout')\n\nexport default Layout\n"],"sourceRoot":""}