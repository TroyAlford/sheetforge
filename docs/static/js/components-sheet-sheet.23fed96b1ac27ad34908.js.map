{"version":3,"sources":["webpack://sheetforge/./source/components/Sheet/Section/Section.js","webpack://sheetforge/./source/components/components.js","webpack://sheetforge/./source/components/Sheet/Column/Column.js","webpack://sheetforge/./source/components/Sheet/Row/Row.js","webpack://sheetforge/./source/components/Conditions/Conditions.js","webpack://sheetforge/./source/models/models.js","webpack://sheetforge/./source/components/Sheet/Sheet.js","webpack://sheetforge/./source/components/Sheet/Sheet.mdx"],"names":["Section","React","_this$props","this","props","children","_this$props$flex","flex","title","react_default","a","createElement","className","style","ref","titleBar","Expandable","expandByDefault","omitItemWrapper","toggleButtonParent","current","Component","components_components","Attribute","Column","_ref","Descriptor","Effect","HealthBar","Item","Resource","Row","Section_Section_Section","Skill","Spell","Trait","observer","_temp","_class","_Component","Conditions","_getPrototypeOf2","_this","classCallCheck_default","_len","arguments","length","args","Array","_key","possibleConstructorReturn_default","getPrototypeOf_default","call","apply","concat","defineProperty_default","assertThisInitialized_default","availableConditions","model","conditions","asArray","JSON","CACHE","forceUpdate","condition","value","delete","isCurrent","key","Editable","onChange","handleCheckbox","inherits_default","createClass_default","onSnapshotDisposer","onSnapshot","handleSnapshot","map","renderCondition","react","models","Attribute_Attribute","Descriptor_Descriptor","Effect_Effect","HealthLevel","Item_Item","Resource_Resource","Skill_Skill","Spell_Spell","components_Sheet_Sheet","Sheet","_props","size","window","matches","setState","list","lookup","path","type","objectWithoutProperties_default","components","data","getPathValue","character","Object","state","ModelType","List","ListOf","toLowerCase","extends_default","collection","renderComponent","disposeOfSnapshotListener","snapshot","layout","handleWindowResize","onMount","_this$props$layout","components_Conditions_Conditions","noop","__webpack_exports__","dist","name","id","Character","create","localStorage","setItem","stringify","self","getItem","set","parse"],"mappings":"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","file":"static/js/components-sheet-sheet.fcc3cd28.js","sourcesContent":["import React, { Component } from 'react'\nimport Expandable from '@/components/Expandable'\nimport './Section.scss'\n\nexport default class Section extends Component {\n  titleBar = React.createRef()\n\n  render() {\n    const { children, flex = 1, title } = this.props\n\n\n    return (\n      <div className=\"section\" style={{ flex }}>\n        {title && <h1 ref={this.titleBar}>{title}</h1>}\n        <Expandable expandByDefault omitItemWrapper toggleButtonParent={this.titleBar.current}>\n          {children}\n        </Expandable>\n      </div>\n    )\n  }\n}\n","import Attribute from '@/components/Attribute'\nimport Descriptor from '@/components/Descriptor'\nimport Effect from '@/components/Effect'\nimport HealthBar from '@/components/HealthBar'\nimport Item from '@/components/Item'\nimport Resource from '@/components/Resource'\nimport Column from '@/components/Sheet/Column'\nimport Row from '@/components/Sheet/Row'\nimport Section from '@/components/Sheet/Section'\nimport Skill from '@/components/Skill'\nimport Spell from '@/components/Spell'\nimport Trait from '@/components/Trait'\n\nexport default {\n  Attribute,\n  Column,\n  Descriptor,\n  Effect,\n  HealthBar,\n  Item,\n  Resource,\n  Row,\n  Section,\n  Skill,\n  Spell,\n  Trait,\n}\n","import React from 'react'\nimport './Column.scss'\n\nexport default ({ children, flex }) => (\n  <div className=\"column\" style={{ flex }}>{children}</div>\n)\n","import React from 'react'\nimport './Row.scss'\n\nexport default ({ children }) => <div className=\"row\">{children}</div>\n","import { observer } from 'mobx-react'\nimport { onSnapshot } from 'mobx-state-tree'\nimport React, { Component } from 'react'\nimport Editable from '@/components/Editable'\nimport Expandable from '@/components/Expandable'\nimport './Conditions.scss'\n\nexport default observer(class Conditions extends Component {\n  static defaultProps = {\n    model: {},\n  }\n\n  CACHE = {}\n\n  componentDidMount() {\n    this.onSnapshotDisposer = onSnapshot(this.props.model, this.handleSnapshot)\n  }\n\n  componentWillUnmount() {\n    this.onSnapshotDisposer()\n  }\n\n  handleSnapshot = () => {\n    const availableConditions = this.props.model.availableConditions()\n    const conditions = this.props.model.conditions.asArray\n\n    if (\n      JSON.stringify(availableConditions) !== JSON.stringify(this.CACHE.availableConditions) ||\n      JSON.stringify(conditions) !== JSON.stringify(this.CACHE.conditions)\n    ) {\n      this.CACHE.availableConditions = availableConditions\n      this.CACHE.conditions = conditions\n      this.forceUpdate()\n    }\n  }\n\n  handleCheckbox = (condition, value) => {\n    const { conditions } = this.props.model\n\n    if (value && !conditions.includes(condition)) {\n      conditions.push(condition)\n    } else if (typeof conditions.delete === 'function') {\n      conditions.delete(condition)\n    } else {\n      conditions.splice(conditions.indexOf(condition), 1)\n    }\n    this.forceUpdate()\n  }\n\n  renderCondition = (condition) => {\n    const { conditions } = this.props.model\n    const isCurrent = conditions.includes(condition)\n    return (\n      <div key={condition} className={`condition ${isCurrent ? 'current' : 'available'}`}>\n        <Editable\n          className=\"current\"\n          onChange={value => this.handleCheckbox(condition, value)}\n          value={isCurrent}\n        />\n        <div className=\"name\">{condition}</div>\n      </div>\n    )\n  }\n\n  render() {\n    return (\n      <div className=\"conditions\">\n        <Expandable>\n          {this.props.model.availableConditions().map(this.renderCondition)}\n        </Expandable>\n      </div>\n    )\n  }\n})\n","import Attribute from '@/models/Attribute'\nimport Descriptor from '@/models/Descriptor'\nimport Effect from '@/models/Effect'\nimport HealthLevel from '@/models/HealthLevel'\nimport Item from '@/models/Item'\nimport Resource from '@/models/Resource'\nimport Skill from '@/models/Skill'\nimport Spell from '@/models/Spell'\nimport Trait from '@/models/Trait'\n\nexport default {\n  Attribute,\n  Descriptor,\n  Effect,\n  HealthLevel,\n  Item,\n  Resource,\n  Skill,\n  Spell,\n  Trait,\n}\n","import { observer } from 'mobx-react'\nimport { onSnapshot } from 'mobx-state-tree'\nimport React from 'react'\nimport components from '@/components'\nimport Conditions from '@/components/Conditions'\nimport ListOf from '@/components/List'\nimport models from '@/models'\nimport getPathValue from '@/utilities/getPathValue'\nimport noop from '@/utilities/noop'\nimport './Sheet.scss'\n\n@observer class Sheet extends React.Component {\n  static defaultProps = {\n    character: {},\n    onChange: noop,\n    onMount: noop,\n  }\n\n  state = { size: 'large' }\n\n  constructor(props) {\n    super(props)\n    this.disposeOfSnapshotListener = onSnapshot(this.props.character, (snapshot) => {\n      this.props.onChange(snapshot, this.props.layout, this)\n    })\n    window.addEventListener('resize', this.handleWindowResize)\n  }\n\n  componentDidMount() {\n    this.handleWindowResize()\n    this.props.onMount(this)\n  }\n\n  componentWillUnmount() { this.disposeOfSnapshotListener() }\n\n  handleWindowResize = () => {\n    let size = 'large'\n    if (window.matchMedia('(min-width: 5in) and (max-width: 7.5in)').matches) {\n      size = 'medium'\n    } else if (window.matchMedia('(max-width: 5in)').matches) {\n      size = 'small'\n    }\n    this.setState({ size })\n  }\n\n  renderComponent = ({ children, list, lookup, path, type, ...props }, key) => {\n    const Component = components[type]\n    const data = getPathValue(this.props.character, path)\n    Object.assign(props, { size: this.state.size })\n\n    if (list) {\n      const ModelType = models[type]\n\n      const List = ListOf(ModelType, Component, {\n        className: `${type.toLowerCase()}-list`,\n      })\n      return <List key={key} collection={data} {...props} />\n    }\n\n    if (lookup) return <Component key={key} model={data.findById(lookup)} {...props} />\n    if (data) return <Component key={key} model={data} {...props} />\n\n    return (\n      <Component key={key} {...props}>\n        {children.map(this.renderComponent)}\n      </Component>\n    )\n  }\n\n  render() {\n    const { character, layout = [] } = this.props\n    const { size } = this.state\n\n    return (\n      <div className={`sheetforge sheet ${size}`}>\n        <Conditions model={character} />\n        {layout.map(this.renderComponent)}\n      </div>\n    )\n  }\n}\n\nexport default Sheet\n","\n  import React from 'react'\n  import { MDXTag } from '@mdx-js/tag'\n  import { Playground } from 'docz'\nimport { types } from 'mobx-state-tree'\nimport Character from '@/models/Character'\nimport Sheet from '@/components/Sheet'\n\nexport default ({components, ...props}) => <MDXTag name=\"wrapper\"  components={components}>\n<MDXTag name=\"h2\" components={components} props={{\"id\":\"character-sheet\"}}>{`Character Sheet`}</MDXTag>\n<Sheet\n  layout={[\n    { type: 'Section', title: 'Descriptors', children: [\n      { type: 'Descriptor', list: true, path: 'descriptors' },\n    ] },\n    { type: 'Section', title: 'Attributes', children: [\n      { type: 'Attribute', list: true, path: 'attributes' },\n      { type: 'HealthBar', path: 'health' },\n    ] },\n    { type: 'Row', children: [\n      { type: 'Column', flex: 1, children: [\n        { type: 'Section', title: 'Traits', children: [\n          { type: 'Trait', list: true, path: 'traits' },\n        ] },\n        { type: 'Section', title: 'Resources', children: [\n          { type: 'Resource', list: true, path: 'resources' },\n        ] },\n      ] },\n      { type: 'Column', flex: 2, title: 'Skills', children: [\n        { type: 'Section', title: 'Skills', children: [\n          { type: 'Skill', list: true, path: 'skills' },\n        ] },\n        { type: 'Section', title: 'Inventory', children: [\n          { type: 'Item', list: true, path: 'items' },\n        ] },\n        { type: 'Section', title: 'Spellbook', children: [\n          { type: 'Spell', list: true, path: 'spells' },\n        ] }\n      ] },\n    ] }\n  ]}\n  character={Character.create({})}\n  onChange={(character, layout) => {\n    localStorage.setItem('sf-character', JSON.stringify(character))\n    localStorage.setItem('sf-layout', JSON.stringify(layout))\n  }}\n  onMount={(self) => {\n    const character = localStorage.getItem('sf-character')\n    if (character) { self.props.character.set(JSON.parse(character)) }\n  }}\n/></MDXTag>\n  "],"sourceRoot":""}