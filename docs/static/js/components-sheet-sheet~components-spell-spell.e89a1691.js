(window.webpackJsonpsheetforge=window.webpackJsonpsheetforge||[]).push([[2],{"0dDA":function(e,t,n){},"1T+A":function(e,t,n){"use strict";n.d(t,"a",function(){return b});var a=n("b696"),r=n.n(a),o=n("Nogc"),i=n.n(o),l=n("WEGp"),s=n.n(l),c=n("Amxr"),u=n.n(c),p=n("o1mq"),d=n.n(p),m=n("cEnY"),h=n.n(m),g=n("itEV"),f=n.n(g),v=n("cNEE"),y=n.n(v),E=n("q1tI"),C=n.n(E),N=n("x6zz"),b=(n("djCb"),function(e){function t(){var e,n;i()(this,t);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=u()(this,(e=d()(t)).call.apply(e,[this].concat(o))),y()(h()(n),"state",{selected:null}),y()(h()(n),"handleOptionClick",function(e){var t=e.target,a=r()(t.parentElement.children).indexOf(t),o=n.props.options[a];void 0!==n.props.selected?n.props.onChange(o):n.setState({selected:o})}),n}return f()(t,e),s()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.options,r=void 0!==this.props.selected?this.props.selected:this.state.selected;return C.a.createElement("div",{className:"multi-toggle ".concat(n).trim()},a.map(function(t,n){return C.a.createElement("div",{className:"toggle ".concat(t===r?"on":"off").trim(),key:n,onClick:e.handleOptionClick},t.display)}))}}]),t}(E.Component));y()(b,"defaultProps",{className:"",onChange:N.a,options:[],selected:void 0})},"5UjR":function(e,t,n){},"8qIS":function(e,t,n){"use strict";var a,r,o,i,l,s,c=n("Nogc"),u=n.n(c),p=n("WEGp"),d=n.n(p),m=n("Amxr"),h=n.n(m),g=n("o1mq"),f=n.n(g),v=n("cEnY"),y=n.n(v),E=n("itEV"),C=n.n(E),N=n("cNEE"),b=n.n(N),x=n("NbXW"),A=n("uqjs"),O=n("q1tI"),k=n.n(O),D=n("O+tL"),I=n("a4BR"),S=n("I7n6"),T=n("t524"),z=(n("y+pi"),Object(x.observer)((o=r=function(e){function t(){var e,n;u()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=h()(this,(e=f()(t)).call.apply(e,[this].concat(r))),b()(y()(n),"handleChangeAmount",function(e){return n.props.model.set({amount:e})}),b()(y()(n),"handleChangeResource",function(e){var t=e.target.value;return n.props.model.set({resourceName:t})}),n}return C()(t,e),d()(t,[{key:"render",value:function(){var e=this.props.model,t=e.amount,n=e.available,a=e.resourceName;return k.a.createElement("div",{className:"resource-cost"},k.a.createElement("select",{className:"resource-id",value:a,onChange:this.handleChangeResource},n.map(function(e){var t=e.name;return k.a.createElement("option",{key:t,value:t},t)})),k.a.createElement(D.a,{className:"amount",max:999,min:-99,onChange:this.handleChangeAmount,value:t}))}}]),t}(O.Component),b()(r,"defaultProps",{model:{}}),b()(r,"sortOptions",[{display:"icon-sort-name-asc",getter:function(e){return e.resourceName}},{display:"icon-sort-value-asc",getter:function(e){return e.amount}}]),a=o))||a),w=n("HyL6"),j=n("ITnf"),W=n("x6zz"),U=(n("IURI"),Object(T.a)(w.a,I.a,{className:"effect-list"})),L=Object(T.a)(j.a,z,{className:"resource-cost-list"}),R=Object(x.observer)((s=l=function(e){function t(){var e,n;u()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=h()(this,(e=f()(t)).call.apply(e,[this].concat(r))),b()(y()(n),"onResourceSnapshotDisposer",W.a),b()(y()(n),"handleCast",function(){n.props.model.cast(),n.forceUpdate()}),b()(y()(n),"handleChangeDescription",function(e){return n.props.model.set({description:e})}),b()(y()(n),"handleChangeLevel",function(e){return n.props.model.set({level:e})}),b()(y()(n),"handleChangeName",function(e){return n.props.model.set({name:e})}),b()(y()(n),"handleCommitName",function(){return""===n.props.model.name&&n.props.onDelete(n.props.model)}),b()(y()(n),"handleToggleActive",function(){return n.props.model.set({isActive:!n.props.model.isActive})}),n}return C()(t,e),d()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.model.character.resources;this.onResourceSnapshotDisposer=Object(A.onSnapshot)(t,function(){return e.forceUpdate()})}},{key:"componentWillUnmount",value:function(){this.onResourceSnapshotDisposer()}},{key:"render",value:function(){var e=this,t=this.props.model,n=t.costs,a=t.description,r=t.name,o=t.effects,i=t.hash,l=t.isActive,s=t.isAffordable,c=t.level;return k.a.createElement("div",{className:"spell ".concat(l?"":"in","active")},k.a.createElement(D.a,{className:"is-active",onChange:this.handleToggleActive,value:l}),k.a.createElement(D.a,{className:"name",onChange:this.handleChangeName,onEditEnd:this.handleCommitName,value:r}),k.a.createElement(D.a,{className:"level",onChange:this.handleChangeLevel,value:c}),k.a.createElement("button",{className:"cast icon-magic",onClick:this.handleCast,disabled:!s()}),k.a.createElement(S.a,{onToggle:function(t){return e.props.onToggleExpanded(i,t)}},k.a.createElement(D.a,{className:"description",type:"multiline",onChange:this.handleChangeDescription,placeholder:"Description...",value:a}),k.a.createElement(L,{collection:n,title:"Casting Costs"}),k.a.createElement(U,{collection:o,title:"Effects"})))}}]),t}(O.Component),b()(l,"defaultProps",{model:{},onDelete:W.a,onToggleExpanded:W.a}),b()(l,"sortOptions",[{display:"icon-sort-name-asc",getter:function(e){return[e.name,e.level]}},{display:"icon-sort-value-asc",getter:function(e){return[e.level,e.name]}},{display:"icon-sort-value-desc",getter:function(e){return[-e.level,e.name]}}]),i=s))||i;t.a=R},I7n6:function(e,t,n){"use strict";n.d(t,"a",function(){return x});var a=n("cFUw"),r=n.n(a),o=n("Nogc"),i=n.n(o),l=n("WEGp"),s=n.n(l),c=n("Amxr"),u=n.n(c),p=n("o1mq"),d=n.n(p),m=n("cEnY"),h=n.n(m),g=n("itEV"),f=n.n(g),v=n("cNEE"),y=n.n(v),E=n("q1tI"),C=n.n(E),N=n("i8i4"),b=n("x6zz"),x=(n("0dDA"),function(e){function t(){var e,n;i()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=u()(this,(e=d()(t)).call.apply(e,[this].concat(r))),y()(h()(n),"state",{expanded:!1}),y()(h()(n),"expander",C.a.createRef()),y()(h()(n),"handleToggle",function(){var e=n.expander.current.parentElement.classList,t=n.state.expanded;n.setState({expanded:!t},function(){n.props.onToggle(!t),e[t?"remove":"add"]("expanded")})}),y()(h()(n),"renderExpanded",function(){var e=n.props,t=e.children;return e.omitItemWrapper?t:C.a.createElement("div",{className:"expandable"}," ",t)}),n}return f()(t,e),s()(t,[{key:"componentWillMount",value:function(){this.setState({expanded:this.props.expandByDefault})}},{key:"componentDidMount",value:function(){this.expander.current.parentElement.classList.add("expandable-wrapper")}},{key:"render",value:function(){var e=this.props,t=e.toggleButtonParent,n=e.toggleButtonText,a=this.state.expanded?"expanded":"collapsed",o={className:"expandable-toggle icon-".concat(a),onClick:this.handleToggle,ref:this.expander},i=C.a.createElement("div",r()({},o,{text:n}));return C.a.createElement(E.Fragment,null,t?Object(N.createPortal)(i,t):i,this.state.expanded&&this.renderExpanded())}}]),t}(E.Component));y()(x,"defaultProps",{expandByDefault:!1,omitItemWrapper:!1,onToggle:b.a,toggleButtonParent:null,toggleButtonText:""})},IURI:function(e,t,n){},a4BR:function(e,t,n){"use strict";var a,r,o,i=n("Nogc"),l=n.n(i),s=n("WEGp"),c=n.n(s),u=n("Amxr"),p=n.n(u),d=n("o1mq"),m=n.n(d),h=n("cEnY"),g=n.n(h),f=n("itEV"),v=n.n(f),y=n("cNEE"),E=n.n(y),C=n("NbXW"),N=n("q1tI"),b=n.n(N),x=n("O+tL"),A=(n("5UjR"),Object(C.observer)((o=r=function(e){function t(){var e,n;l()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=p()(this,(e=m()(t)).call.apply(e,[this].concat(r))),E()(g()(n),"handleChangeCondition",function(e){return n.props.model.set({condition:e})}),E()(g()(n),"handleChangeModifier",function(e){return n.props.model.set({modifier:e})}),E()(g()(n),"handleChangeTarget",function(e){var t=e.target.value;return n.props.model.set({targetId:t})}),n}return v()(t,e),c()(t,[{key:"render",value:function(){var e=this.props.model,t=e.available,n=e.condition,a=void 0===n?"":n,r=e.isApplicable,o=e.modifier,i=e.targetId;return b.a.createElement("div",{className:"effect ".concat(r?"applicable":"").trim()},b.a.createElement("select",{className:"target",value:i,onChange:this.handleChangeTarget},t().map(function(e){var t=e.hash,n=e.id,a=e.name;return b.a.createElement("option",{key:t,value:n},a)})),b.a.createElement(x.a,{className:"modifier",max:999,min:-99,onChange:this.handleChangeModifier,value:o}),b.a.createElement(x.a,{className:"condition",onChange:this.handleChangeCondition,placeholder:"Any",value:a}))}}]),t}(N.Component),E()(r,"defaultProps",{model:{}}),E()(r,"sortOptions",[{display:"icon-sort-name-asc",getter:function(e){return[!e.targetId,e.targetId]}},{display:"icon-sort-value-asc",getter:function(e){return[!e.condition,e.modifier]}}]),a=o))||a);t.a=A},djCb:function(e,t,n){},e8LY:function(e,t,n){},t524:function(e,t,n){"use strict";var a=n("b696"),r=n.n(a),o=n("cFUw"),i=n.n(o),l=n("Nogc"),s=n.n(l),c=n("WEGp"),u=n.n(c),p=n("Amxr"),d=n.n(p),m=n("o1mq"),h=n.n(m),g=n("cEnY"),f=n.n(g),v=n("itEV"),y=n.n(v),E=n("cNEE"),C=n.n(E),N=n("ubaz"),b=n.n(N),x=n("uqjs"),A=n("q1tI"),O=n.n(A),k=n("U/5H"),D=n.n(k),I=n("1T+A"),S=n("YFLu");var T=n("x6zz"),z=n("DODz"),w=(n("e8LY"),"Uncategorized"),j=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,a){var r=e(n),o=e(a);if(Array.isArray(r)&&Array.isArray(o)){for(var i=0;i<r.length;i+=1)if(r[i]!==o[i])return t?o[i]<r[i]?-1:1:r[i]<o[i]?-1:1;return 0}if("number"===typeof r&&"number"===typeof o)return r===o?0:t?o<r?-1:1:r<o?-1:1;var l=String(r),s=String(o);return t?s.localeCompare(l):l.localeCompare(s)}};t.a=function(e,t){var n,a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=(t.sortOptions||[]).map(function(e){return b()({},e,{comparitor:j(e.getter),display:"string"===typeof e.display?O.a.createElement("span",{className:e.display}):e.display})});return a=n=function(n){function a(){var n,o;s()(this,a);for(var c=arguments.length,u=new Array(c),p=0;p<c;p++)u[p]=arguments[p];return o=d()(this,(n=h()(a)).call.apply(n,[this].concat(u))),C()(f()(o),"Component",t),C()(f()(o),"Model",e),C()(f()(o),"container",O.a.createRef()),C()(f()(o),"expandedItems",{}),C()(f()(o),"filterEl",O.a.createRef()),C()(f()(o),"onDataSnapshotDisposer",T.a),C()(f()(o),"onLayoutSnapshotDisposer",T.a),C()(f()(o),"sortable",null),C()(f()(o),"state",{expanded:{},sortOption:null}),C()(f()(o),"getCategoryItems",function(e,t){return t&&t!==w?e.filter(function(e){return(e.categories||[]).includes(t)}):e.filter(function(e){return 0===(e.categories||[]).length})}),C()(f()(o),"handleAdd",function(){o.props.collection.push(e.create({})),o.forceUpdate()}),C()(f()(o),"handleDelete",function(e){var t=e.target,n=parseInt(t.parentNode.getAttribute("data-index"),10);o.props.collection.deleteAt(n),o.forceUpdate()}),C()(f()(o),"handleFilterChange",function(e){var t=e.target;return o.props.layout.set({filter:t.value})}),C()(f()(o),"handleSort",function(){return o.props.collection.sortBy("name")}),C()(f()(o),"handleSortChange",function(e){var t=o.state.sortOption;o.setState({sortOption:t===e?null:e},function(){o.props.layout.set({sortOption:t===e?void 0:l.indexOf(e)})})}),C()(f()(o),"handleToggleCategorized",function(){o.props.layout.set({categorize:!o.props.layout.categorize})}),C()(f()(o),"handleToggleExpanded",function(e,t){o.setState(function(n){return b()({},n,{expanded:b()({},n.expanded,C()({},e,t))})})}),C()(f()(o),"renderCategoryWidget",function(){var e=o.props.layout,t=f()(o).categories;if(!t.length)return null;var n=["categorize icon-categorize",e.categorize?"on":"off"].join(" ");return O.a.createElement(O.a.Fragment,null,O.a.createElement("div",i()({className:n},{onClick:o.handleToggleCategorized})),O.a.createElement("select",{className:"filter",onChange:o.handleFilterChange,ref:o.filterEl,tabIndex:-1,value:e.filter},O.a.createElement("option",{value:""},"All"),t.map(function(e){return O.a.createElement("option",{key:e,value:e},e)})))}),C()(f()(o),"renderSortWidget",function(){return o.props.sortable&&l.length?O.a.createElement(I.a,{className:"sorter",onChange:o.handleSortChange,options:l,selected:o.state.sortOption}):null}),C()(f()(o),"renderCategory",function(e,t){var n=o.props.columns,a=o.getCategoryItems(t,e);if(!a.length)return null;var i=a.map(function(e){return e.categoryValue}),l=Math.min.apply(Math,r()(i)),s=Math.max.apply(Math,r()(i));return O.a.createElement("div",{key:e,className:"category"},O.a.createElement("div",{className:"details"},O.a.createElement("div",{className:"title"},"Category: ",e," (",a.length,")"),!Number.isNaN(l)&&!Number.isNaN(s)&&O.a.createElement("div",{className:"range"},l,"-",s)),O.a.createElement("div",{className:"category-items",style:{columns:n}},a.map(o.renderItem)))}),C()(f()(o),"renderItem",function(e){var n=o.props,a=n.collection,r=n.layout,i=n.sortable,l=o.state,s=l.expanded,c=l.sortOption,u=i&&null!==c,p=r&&r.categorize;return O.a.createElement("div",{className:"list-item-wrapper ".concat(s[e.hash]?"expanded":"").trim(),"data-index":a.indexOf(e),key:e.hash},!u&&!p&&O.a.createElement("div",{className:"drag-handle"}),O.a.createElement(t,{model:e,onDelete:a.delete,onToggleExpanded:o.handleToggleExpanded}),O.a.createElement("button",{className:"icon-remove",onClick:o.handleDelete}))}),o}return y()(a,n),u()(a,[{key:"componentDidMount",value:function(){var e=this;if(this.props.layout){var t=this.props.layout.sortOption;l.length&&void 0!==t&&this.setState({sortOption:l[t]||null}),this.onLayoutSnapshotDisposer=Object(x.onSnapshot)(this.props.layout,function(e,t,n){var a,r=this;return function(){for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];var s=n&&!a;clearTimeout(a),a=setTimeout(function(){a=null,n||e.apply(r,i)},t),s&&e.apply(r,i)}}(function(){return e.forceUpdate()},100,!0))}var n=this.props.sortable;n&&(this.sortable=D.a.create(this.container.current,{disabled:!n,draggable:".list-item-wrapper",handle:".drag-handle",onEnd:function(){e.container.current.classList.remove("dragging"),e.props.collection.replace(r()(e.container.current.querySelectorAll(".list-item-wrapper")).map(function(e){return parseInt(e.getAttribute("data-index"),10)}).map(function(t){return e.props.collection.at(t)}))},onStart:function(){return e.container.current.classList.add("dragging")}})),this.onDataSnapshotDisposer=Object(x.onSnapshot)(this.props.collection,function(){return e.forceUpdate()})}},{key:"componentWillReceiveProps",value:function(){this.sortable&&this.sortable.option("disabled",!this.props.sortable)}},{key:"componentWillUnmount",value:function(){this.onDataSnapshotDisposer(),this.onLayoutSnapshotDisposer()}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=void 0===n?"":n,r=t.columns,o=t.layout,i=void 0===o?{}:o,l=t.title,s=this.state.sortOption,c=this.categories,u=this.props.collection.asArray;null!==s&&(u=u.sort(s.comparitor));var p=Boolean(c.length);p&&i.filter&&(u=this.getCategoryItems(u,i.filter),c=[i.filter]);var d={columns:i.categorize?1:r};return O.a.createElement("div",{className:"list ".concat(a).trim(),ref:this.container,style:d},O.a.createElement("div",{className:"title-bar"},this.renderSortWidget(),this.renderCategoryWidget(),O.a.createElement("div",{className:"text"},l),O.a.createElement("button",{className:"add icon-add",onClick:this.handleAdd})),p&&i.categorize?c.map(function(t){return e.renderCategory(t,u)}):u.map(this.renderItem))}},{key:"categories",get:function(){var e=this.props.collection.asArray.reduce(function(e,t){return e.concat(t.categories||[])},[]);return e.length?Object(z.a)(e.filter(function(e){return e!==w})).sort().concat(w):[]}}]),a}(O.a.Component),C()(n,"defaultProps",b()({className:"",collection:Object(S.a)(e).create([]),columns:1,layout:void 0,sortable:!0,title:o.title||""},o)),a}},"y+pi":function(e,t,n){}}]);
//# sourceMappingURL=components-sheet-sheet~components-spell-spell.c36a4835b429fddf534f.js.map